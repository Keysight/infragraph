components:
  schemas:
    GraphRequest:
      type: object
      properties:
        format:
          description: |-
            The format that the graph will be returned in.
          type: string
          x-field-uid: 1
          x-enum:
            networkx:
              x-field-uid: 1
    GraphContent:
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            networkx:
              x-field-uid: 1
        networkx:
          description: |-
            This contains the returned graph content formatted as a networkx yaml string.
          type: string
          x-field-uid: 2
    NameValue:
      type: object
      properties:
        name:
          type: string
          x-field-uid: 1
        value:
          type: string
          x-field-uid: 2
    QueryResponseItem:
      type: object
      properties:
        id:
          type: string
          x-field-uid: 1
        attributes:
          type: array
          items:
            $ref: "#/components/schemas/NameValue"
          x-field-uid: 2
    QueryResponseContent:
      type: object
      properties:
        matches:
          type: array
          items:
            $ref: "#/components/schemas/QueryResponseItem"
          x-field-uid: 1
    QueryAttribute:
      type: object
      properties:
        name:
          type: string
          x-field-uid: 1
        operator:
          type: string
          x-field-uid: 2
          x-enum:
            eq:
              x-field-uid: 1
            regex:
              x-field-uid: 2
            contains:
              x-field-uid: 3
        value:
          type: string
          x-field-uid: 3
        logic:
          type: string
          x-field-uid: 4
          x-enum:
            and:
              x-field-uid: 1
            or:
              x-field-uid: 2
    QueryNodeId:
      type: object
      properties:
        operator:
          type: string
          x-field-uid: 1
          x-enum:
            eq:
              x-field-uid: 1
            regex:
              x-field-uid: 2
            contains:
              x-field-uid: 3
        value:
          type: string
          x-field-uid: 2
        logic:
          type: string
          x-field-uid: 3
          x-enum:
            and:
              x-field-uid: 1
            or:
              x-field-uid: 2
    QueryNodeFilter:
      type: object
      properties:
        name:
          type: string
          x-field-uid: 1
        choice:
          type: string
          x-field-uid: 2
          x-enum:
            attribute_filter:
              x-field-uid: 1
            id_filter:
              x-field-uid: 2
        attribute_filter:
          $ref: "#/components/schemas/QueryAttribute"
          x-field-uid: 3
        id_filter:
          $ref: "#/components/schemas/QueryNodeId"
          x-field-uid: 4
    QueryRequest:
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            node_filters:
              x-field-uid: 1
        node_filters:
          type: array
          items:
            $ref: "#/components/schemas/QueryNodeFilter"
          x-field-uid: 2
    Annotation.Node:
      type: object
      properties:
        name:
          description: |-
            A fully qualified node name that MUST exist in the graph.
            - server.0.npu.0
            - server.6.nic.3
            - switch.2.asic.0
          type: string
          x-field-uid: 1
        attribute:
          description: |-
            The attribute name that will be added to the endpoint.
          type: string
          x-field-uid: 2
        value:
          description: |-
            The attribute value that will be added to the endpoint.
          type: string
          x-field-uid: 3
    Annotation.Edge:
      type: object
      properties:
        ep1:
          description: |-
            A fully qualified endpoint name that MUST exist as part of an edge along with ep2 in the graph.
            - server.0.npu.0
            - server.6.nic.3
            - switch.2.asic.0
          type: string
          x-field-uid: 1
        ep2:
          description: |-
            A fully qualified endpoint name that MUST exist as part of an edge along with ep1 in the graph.
            - server.0.npu.0
            - server.6.nic.3
            - switch.2.asic.0
          type: string
          x-field-uid: 2
        attribute:
          description: |-
            The attribute name that will be added to the edge.
          type: string
          x-field-uid: 3
        value:
          description: |-
            The attribute value that will be added to the edge.
          type: string
          x-field-uid: 4
    AnnotateRequest:
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            nodes:
              x-field-uid: 1
            edges:
              x-field-uid: 2
        nodes:
          type: array
          items:
            $ref: "#/components/schemas/Annotation.Node"
          x-field-uid: 2
        edges:
          type: array
          items:
            $ref: "#/components/schemas/Annotation.Edge"
          x-field-uid: 3
  responses:
    GraphResponse:
      description: |-
        The entire fully validated graph content.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/GraphContent'
    QueryResponse:
      description: |-
        Answer to the query request.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/QueryResponseContent'
