
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
        
      
      
      <link rel="icon" href="../images/infra_logo_favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Print Site - InfraGraph (Infrastructure Graph)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-N6X4KDVDJF"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-N6X4KDVDJF",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-N6X4KDVDJF",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="InfraGraph (Infrastructure Graph)" class="md-header__button md-logo" aria-label="InfraGraph (Infrastructure Graph)" data-md-component="logo">
      
  <img src="../images/infra_logo_favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            InfraGraph (Infrastructure Graph)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Keysight/infragraph" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infragraph
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../background/" class="md-tabs__link">
        
  
  
    
  
  Background

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../ecosystem/" class="md-tabs__link">
        
  
  
    
  
  Chakra Ecosystem

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../schema/" class="md-tabs__link">
        
  
  
    
  
  Schema

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../create/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../blueprints/" class="md-tabs__link">
        
  
  
    
  
  Blueprints

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../annotate/" class="md-tabs__link">
        
  
  
    
  
  Extending The Graph

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../examples/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../openapi.html" class="md-tabs__link">
        
  
  
    
  
  Browse API Spec

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="InfraGraph (Infrastructure Graph)" class="md-nav__button md-logo" aria-label="InfraGraph (Infrastructure Graph)" data-md-component="logo">
      
  <img src="../images/infra_logo_favicon.png" alt="logo">

    </a>
    InfraGraph (Infrastructure Graph)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Keysight/infragraph" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infragraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Background
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ecosystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chakra Ecosystem
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../blueprints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blueprints
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extending The Graph
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Browse API Spec
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      
        1 Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      
        2 Background
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecosystem" class="md-nav__link">
    <span class="md-ellipsis">
      
        3 Chakra Ecosystem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        4 Schema
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      
        5 Getting Started
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blueprints" class="md-nav__link">
    <span class="md-ellipsis">
      
        6 Blueprints
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotate" class="md-nav__link">
    <span class="md-ellipsis">
      
        7 Extending The Graph
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        8 Examples
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openapi" class="md-nav__link">
    <span class="md-ellipsis">
      
        9 Browse API Spec
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index" heading-number="1"><h1 id="index-index">Overview</h1><p>Modern AI systems, comprising diverse scale-up and scale-out interconnect topologies that integrate complex heterogeneous components, connected together via diverse means, face a lack of standardized overall infrastructure description, all which hinders benchmarking, simulation, and emulation.</p>
<p>This documentation covers the following:</p>
<h3 id="index-background">Background</h3>
<p>The <a href="#background">background</a> details and justification behind the schema.</p>
<h3 id="index-chakra-ecosystem">Chakra Ecosystem</h3>
<p>The <a href="#ecosystem">Chakra Ecosystem</a> talks about the Chakra + InfraGraph ecosystem. How they complements each other to describe AI workloads and underlying infrastructures respectively.</p>
<h3 id="index-schema">Schema</h3>
<p>An overview of the <a href="#schema">schema</a> and it's repository.</p>
<h3 id="index-getting-started">Getting Started</h3>
<p>A simple generic case study demonstrating how to <a href="#create">get started</a>.</p>
<h3 id="index-blueprints">Blueprints</h3>
<p>This section defines blueprints for devices and fabrics, enabling users to model various vendor-specific devices and standard fabric architectures.</p>
<h3 id="index-extending-the-case-study-with-additional-data">Extending the case study with additional data</h3>
<p>This section provides a comprehensive guide on how a user can annotate various parts of infrastructre and add more details like DeviceType, Rank Identifier and so on.</p>
<p>It covers the model description with examples for binding physical attributes with the logical infrastructure definition.</p>
<h3 id="index-services">Services</h3>
<p>The site provides services for <code>validating</code> concrete instances of schemas.</p>
<h3 id="index-advanced-examples">Advanced Examples</h3>
<p>Advanced <a href="#examples">examples</a> include such things as:</p>
<ul>
<li>complex servers</li>
<li>composable devices</li>
<li>scaleup/scaleout infrastructure.</li>
</ul>
<h3 id="index-specification-browser">Specification Browser</h3>
<p>The API and Models can easily be reviewed using the auto-generated OpenAPI model and redocly html documentation.</p>
<h3 id="index-community">Community</h3>
<p>Use our community resources to get help with <a href="https://github.com/Keysight/infragraph">InfraGraph</a> on Github</p></section><section class="print-page" id="background" heading-number="2"><h1 id="background-background">Background</h1><h2 id="the-challenge-in-system-description">The Challenge in System Description</h2>
<p>Building and managing AI/HPC systems today feels a bit like untangling a giant ball of yarn.</p>
<p>Modern AI systems integrate <code>complex, heterogeneous components like compute, memory, and storage</code>, all connected by diverse scale-up and scale-out interconnect topologies. Think of the <code>intricate networks</code> in a large AI factory – it's a mix of different technologies and topologies."</p>
<p>But, a clear, <code>standardized</code> way to describe this overall infrastructure is missing. This isn't just a technical challenge; it creates real problems for everyone involved. It makes it incredibly difficult to benchmark, to simulate 'what-if' scenarios, or even to manage these systems efficiently. The result? <code>Significant operational overhead</code>, often <code>low hardware utilization</code>, and a <code>lot of frustration</code> for those trying to get these powerful systems to perform."</p>
<p>We believe <code>capturing this diversity, this inherent complexity, in a structured way</code> is the first step to reasoning with it."</p>
<h2 id="background-why-standardize">Why Standardize?</h2>
<p>Why go through all this effort? Because we want to move beyond just 'making it work' to truly 'optimizing it.' Our goal is to transform massive AI clusters from monolithic problems into structured, analyzable systems. When you have a <code>standardized description</code>, you can feed that information directly into your tools – your simulators, your emulators, even your deployment systems.</p>
<p>This means better predictions about how your AI workloads will perform before you even run them. And it opens the door for something really powerful when doing <code>vertical co-design.</code> It's about making sure your hardware and software are talking to each other, working together seamlessly, from the lowest-level chip to the highest-level application. This ensures accurate performance prediction and validates AI workloads pre-deployment.</p>
<p>This isn't just about efficiency; it's about building performant, reliable, and cost-effective AI infrastructure that can keep up with the demands of tomorrow and experimenting with what-if scenarios.  Let's look at a concrete example.</p>
<h2 id="background-from-schema-to-simulationemulation">From Schema to Simulation/Emulation</h2>
<p><img alt="schema" src="../images/schema-to-emulation.png" /></p>
<p>So, here's how we put it all together. The challenge is that these complex AI systems are incredibly difficult to model accurately. Say you have a particular infrastructure benchmark like looking at how collective libraries will perform given different design choices, A vs. B.</p>
<p>Our solution involves combining two key pieces: our <code>InfraGraph schema</code>, which precisely defines the cluster's topology, and the MLCommons Chakra workload traces, which capture the actual behavior of AI applications.</p>
<p>Together, these standardized inputs feed directly into powerful simulators like AstraSim. This isn't just theoretical; it's a working proof point. It allows us to run detailed 'what-if' analyses, explore different design choices of how a cluster is composed together, and truly understand performance trade-offs.</p>
<p>This capability effectively <code>democratizes</code> the evaluation of complex AI systems, putting powerful analysis tools into more hands.</p>
<ul>
<li>infrastructure schema + MLCommons Chakra<ul>
<li>standardized <code>infrastructure schema</code> defines system of systems</li>
<li><code>chakra</code> provides workload traces</li>
</ul>
</li>
<li>topology input for various tools (ASTRA-Sim)</li>
<li>enabled <code>what-if</code> analysis, design choices</li>
<li>democratizes complex system evaluation</li>
<li>an <code>infrastructure schema</code> is a flexible starting point today</li>
</ul></section><section class="print-page" id="ecosystem" heading-number="3"><h1 id="ecosystem-chakra-infragraph-ecosystem">Chakra + InfraGraph Ecosystem</h1>
<p>MLCommons <a href="https://mlcommons.org/working-groups/research/chakra/"><strong>Chakra</strong></a> represents the details of any AI workload by capturing <em>Execution Traces (ET)</em> - graphs of operators, tensors, dependencies, and timing.</p>
<p><strong>InfraGraph</strong> represents the underlying systems and infrastructure used for AI training or inference - hosts, NICs, xPUs/accelerators, interconnects, and topologies - using programmatic system blueprints.</p>
<p>Together, <strong>Chakra + InfraGraph</strong> let you pair workload traces with infrastructure blueprints to analyze current systems and co‑design future ones, while safely sharing artifacts across teams and partners.</p>
<p><img alt="InfraGraph+Chakra-Ecosystem" src="../images/chakra-infragraph-ecosystem.png" /></p>
<h2 id="ecosystem-infragraph-helper-tools">InfraGraph Helper Tools</h2>
<p>Like <strong>Chakra</strong>, <strong>InfraGraph</strong> also proposes a set of helper tools that can help users while working with InfraGraph. </p>
<h4 id="ecosystem-1-converters">1. Converters</h4>
<p>Many open‑source and commercial tools model systems using their own schemas (e.g., lspci, lshw, OpenMPI tools, NetBox, etc.). InfraGraph is adding translators to ensure interoperability - import from (and export to) these formats without rewriting everything.</p>
<h4 id="ecosystem-2-discoverers">2. Discoverers</h4>
<p>Discovery has two aspects:</p>
<ul>
<li><strong>Configuration discovery</strong> - capture the attributes of each node/host device.</li>
<li><strong>Topology discovery</strong> - map interconnections across a distributed system.</li>
</ul>
<p>InfraGraph aims to support dynamic discovery so infrastructure details can be captured automatically and kept up to date.</p>
<h4 id="ecosystem-3-blueprints">3. Blueprints</h4>
<p>We’re building blueprint templates for commonly used systems in AI data centers (AI DCs):</p>
<ul>
<li><strong>Devices</strong> - hosts from NVIDIA, Meta, Dell, HPE, etc. vendors, devices like NICs, XPUs/accelerators, and other components.</li>
<li><strong>Fabrics/topologies</strong> - standard definitions such as Clos and Dragonfly.</li>
</ul>
<p>These blueprints help researchers quickly assemble infrastructure definitions for experimentation and serve as reference models when building new designs.</p>
<h4 id="ecosystem-4-visualizers">4. Visualizers</h4>
<p>Graphical views make it easier to spot design issues:</p>
<ul>
<li>Drill‑down to component‑level details.</li>
<li>Zoom‑out to high‑level system connectivity.</li>
</ul>
<p>Visualizers assist developers in understanding structure, bottlenecks, and correctness.</p>
<blockquote>
<p><strong>Note:</strong> Some of these tools are <em>work-in-progress</em> and we invite contributions from the community.</p>
</blockquote>
<h2 id="ecosystem-privacy-obfuscation">Privacy &amp; Obfuscation</h2>
<p>InfraGraph, like Chakra, supports selective disclosure and obfuscation so you can safely share only high‑level infrastructure definitions.</p>
<h4 id="ecosystem-private-annotations">Private annotations:</h4>
<p>One can attach additional details to infrastructure elements or devices, links, fabrics, racks/pods - as annotations (structured fields or free text). These may include vendor‑specific information, firmware/driver versions, internal asset tags, SKUs, or configuration notes. </p>
<ul>
<li>Annotations can be <strong>kept private</strong> for internal tools and workflows. </li>
<li>Private annotations can be <strong>excluded or obfuscated</strong> when exporting or sharing the InfraGraph outside your organization.</li>
</ul>
<h4 id="ecosystem-safe-sharing">Safe sharing:</h4>
<p>When publishing to vendors or the open‑source community, you decide which fields remain, which are transformed, and which are removed - preserving the high‑level system definition while protecting sensitive details about the network and device configurations.</p>
<h2 id="ecosystem-sharing-interoperability">Sharing &amp; Interoperability</h2>
<p>InfraGraph definitions can be shared with vendors and the open‑source community and used with a variety of analyzers, simulators, or emulators (open or commercial). The emphasis is on:</p>
<ul>
<li><strong>Portability:</strong> consistent, schema‑driven artifacts.</li>
<li><strong>Compatibility:</strong> converters for common ecosystem tools.</li>
<li><strong>Safety:</strong> optional obfuscation to protect IP while enabling collaboration.</li>
<li><strong>Composability:</strong> components or devices defined separately can be reused across systems or inserted into different topologies, making it easy to mix, match, and assemble infrastructure from modular parts.</li>
</ul></section><section class="print-page" id="schema" heading-number="4"><h1 id="schema-schema">Schema</h1><h2 id="introducing-the-infragraph-infrastructure-graph-schema">Introducing the InfraGraph (INFRAstructure GRAPH) schema</h2>
<p>A graph is a natural fit to describe a system of systems in a clear, intuitive, and mathematically precise manner.</p>
<p><img alt="graph" src="../images/graph.png" /></p>
<ul>
<li>Node or vertex represents an entity like a component, device, user, router, etc</li>
<li>Edge represents a relationship between nodes</li>
<li>Properties store additional information about nodes or edges</li>
</ul>
<h3 id="schema-principles">Principles</h3>
<p><a href="https://github.com/Keysight/infragraph">InfraGraph</a> is a <code>collection of APIs and Models</code> used to describe AI/HPC infrastructure based on the following core principles:</p>
<ul>
<li>infrastructure can be described using graph concepts such as vertexes, edges and properties<ul>
<li>vertexes can be <code>component</code> or device <code>instances</code></li>
<li>an edge contained by a device subgraph is 2 component instances separated by a link<ul>
<li>e.g., <code>xpu.0</code>.<code>pcie</code>.<code>nic.0</code></li>
</ul>
</li>
<li>an edge contained by the infrastructure is 2 device connections separated by a link where a device connection is the device <code>instance</code> name and <code>index</code> and external <code>component</code> name and <code>index</code><ul>
<li>e.g., <code>server.0</code>.<code>nic.0</code>.<code>eth</code>.<code>leafsw.0</code>.<code>port.0</code></li>
</ul>
</li>
<li>a path is a collection of infrastructure and device connections between a single source and destination</li>
<li>properties are fields with in the device and component objects</li>
</ul>
</li>
<li>devices are composable using connections</li>
<li>connections dictate the depth of the graph</li>
<li>infrastructure and device connections dictate the shape of the graph</li>
<li>infrastructure needs to be scalable without duplicating content</li>
</ul>
<h2 id="schema-openapiart">OpenapiArt</h2>
<p>This repository makes use of <a href="https://github.com/open-traffic-generator/openapiart">OpenAPIArt</a> to do the following:</p>
<ul>
<li>create declarative intent based Models and APIs</li>
<li>auto-generate the following artifacts:<ul>
<li>openapi schema</li>
<li>protobuf schema</li>
<li><a href="https://infragraph.dev/openapi.html">Redocly documentation</a> of APIs and Models</li>
<li><code>Python/Go SDKs</code> that allow for creating <code>fluent</code> client/server code over <code>REST/Protobuf</code> transports</li>
</ul>
</li>
</ul></section><section class="print-page" id="create" heading-number="5"><h1 id="create-case-study-two-tier-clos-fabric">Case Study: Two Tier Clos Fabric</h1>
<p>The main steps in designing a network infrastructure are as follows:</p>
<ul>
<li>Use text and/or diagrams to create an <code>infrastructure description</code></li>
<li>Then <code>use the standardized schema to capture the infrastructure description</code> in a machine readable format by doing the following:<ul>
<li>Add infrastructure <code>device</code> subgraphs using <code>components</code> and <code>links</code> to create <code>edges</code> between components</li>
<li>Add infrastructure <code>instances</code> to define the number of devices in a reusable manner</li>
<li>Add infrastructure <code>links</code> to define additional information that exists between device <code>instances</code> in the infrastructure</li>
<li>Add infrastructure <code>edges</code> between device <code>instances</code></li>
</ul>
</li>
</ul>
<h2 id="create-infrastructure-description">Infrastructure Description</h2>
<p>The following is a diagrammatic and textual description of a <code>generic two tier clos fabric</code> that will be modeled using the standardized schema.</p>
<p><img alt="spine and leaf" src="../images/spine-and-leaf.jpg" /></p>
<p>It consists of the following devices:</p>
<ul>
<li>4 generic <code>servers</code> with each server composed of 4 npus and 4 nics with each nic directly connected to one xpu via a pcie link.  Also every xpu in a server is connected to every other xpu by an nvlink switch. In addition the server includes a management nic that is separate from test nics.</li>
<li>4 <code>leaf switches</code> composed of one asic and 16 ethernet ports</li>
<li>3 <code>spine switches</code> composed of one asic and 16 ethernet ports</li>
</ul>
<p>The above devices will be interconnected in the following manner:</p>
<ul>
<li>each <code>leaf</code> switch is connected directly to 1 <code>server</code> and to all <code>spine</code> switches</li>
<li>every <code>server</code> is connected to a <code>leaf</code> switch at 100 gpbs</li>
<li>every <code>leaf</code> switch is connected to every <code>spine</code> switch at 400 gpbs</li>
</ul>
<h2 id="create-standardized-definitions">Standardized Definitions</h2>
<p>A standardized definition of the preceding two tier clos fabric can be created by following these steps:</p>
<ul>
<li>The device is a subgraph which is composed of two components connected to each other using a link.</li>
<li>It acts as a blueprint allowing for a single definition to be reused multiple times for optimal space complexity.</li>
</ul>
<h4 id="create-create-a-server-device">Create a Server Device</h4>
<p>Define a server device based on the infrastructure description.</p>
<details open>
<summary><strong>Server device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#create-__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#create-__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#create-__codelineno-0-3"></a><span class="c1"># pyright: reportArgumentType=false</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#create-__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#create-__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#create-__codelineno-0-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Server</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#create-__codelineno-0-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">npu_factor</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#create-__codelineno-0-8"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an InfraGraph device to infrastructure based on the following components:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#create-__codelineno-0-9"></a><span class="sd">        - 1 cpu for every 2 npus</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#create-__codelineno-0-10"></a><span class="sd">        - 1 pcie switch for every 1 cpu</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#create-__codelineno-0-11"></a><span class="sd">        - X npus = npu_factor * 2</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#create-__codelineno-0-12"></a><span class="sd">        - 1 nic for every xpu with 2 nics connected to a pcie switch</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#create-__codelineno-0-13"></a><span class="sd">        - 1 nvswitch connected to all npus</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#create-__codelineno-0-14"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#create-__codelineno-0-15"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#create-__codelineno-0-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;server&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#create-__codelineno-0-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A generic server with npu_factor * 4 xpu(s)&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#create-__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#create-__codelineno-0-19"></a>        <span class="n">cpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#create-__codelineno-0-20"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#create-__codelineno-0-21"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic CPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#create-__codelineno-0-22"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#create-__codelineno-0-23"></a>        <span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#create-__codelineno-0-24"></a>        <span class="n">cpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#create-__codelineno-0-25"></a>        <span class="n">xpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#create-__codelineno-0-26"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;xpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#create-__codelineno-0-27"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic GPU/XPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#create-__codelineno-0-28"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#create-__codelineno-0-29"></a>        <span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#create-__codelineno-0-30"></a>        <span class="n">xpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">XPU</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#create-__codelineno-0-31"></a>        <span class="n">nvlsw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#create-__codelineno-0-32"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlsw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#create-__codelineno-0-33"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;NVLink Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#create-__codelineno-0-34"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#create-__codelineno-0-35"></a>        <span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#create-__codelineno-0-36"></a>        <span class="n">nvlsw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#create-__codelineno-0-37"></a>        <span class="n">pciesw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#create-__codelineno-0-38"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pciesw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#create-__codelineno-0-39"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;PCI Express Switch Gen 4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#create-__codelineno-0-40"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span><span class="p">,</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#create-__codelineno-0-41"></a>        <span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#create-__codelineno-0-42"></a>        <span class="n">pciesw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#create-__codelineno-0-43"></a>        <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#create-__codelineno-0-44"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#create-__codelineno-0-45"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic Nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#create-__codelineno-0-46"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#create-__codelineno-0-47"></a>        <span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#create-__codelineno-0-48"></a>        <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#create-__codelineno-0-49"></a>        <span class="n">mgmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#create-__codelineno-0-50"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mgmt&quot;</span><span class="p">,</span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#create-__codelineno-0-51"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Mgmt Nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#create-__codelineno-0-52"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#create-__codelineno-0-53"></a>        <span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#create-__codelineno-0-54"></a>        <span class="n">mgmt</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mgmt-nic&quot;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#create-__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#create-__codelineno-0-56"></a>        <span class="n">cpu_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fabric&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;CPU Fabric&quot;</span><span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#create-__codelineno-0-57"></a>        <span class="n">nvlink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlink&quot;</span><span class="p">)</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#create-__codelineno-0-58"></a>        <span class="n">pcie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;pcie&quot;</span><span class="p">)</span>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#create-__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#create-__codelineno-0-60"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#create-__codelineno-0-61"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#create-__codelineno-0-62"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0]&quot;</span>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#create-__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#create-__codelineno-0-64"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">cpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#create-__codelineno-0-65"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#create-__codelineno-0-66"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#create-__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#create-__codelineno-0-68"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">nvlink</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#create-__codelineno-0-69"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">xpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#create-__codelineno-0-70"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">nvlsw</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#create-__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#create-__codelineno-0-72"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#create-__codelineno-0-73"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#create-__codelineno-0-74"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#create-__codelineno-0-75"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#create-__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#create-__codelineno-0-77"></a>        <span class="n">npu_slices</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xpu</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#create-__codelineno-0-78"></a>        <span class="k">for</span> <span class="n">npu_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npu_slices</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#create-__codelineno-0-79"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#create-__codelineno-0-80"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">npu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#create-__codelineno-0-81"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#create-__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#create-__codelineno-0-83"></a>        <span class="k">for</span> <span class="n">nic_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npu_slices</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#create-__codelineno-0-84"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#create-__codelineno-0-85"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nic</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">nic_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#create-__codelineno-0-86"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#create-__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#create-__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#create-__codelineno-0-89"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#create-__codelineno-0-90"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="n">npu_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#create-__codelineno-0-91"></a>    <span class="n">device</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#create-__codelineno-0-92"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>Server device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#create-__codelineno-1-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#create-__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#create-__codelineno-1-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#create-__codelineno-1-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic CPU</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#create-__codelineno-1-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#create-__codelineno-1-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#create-__codelineno-1-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#create-__codelineno-1-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic GPU/XPU</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#create-__codelineno-1-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#create-__codelineno-1-10"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#create-__codelineno-1-11"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#create-__codelineno-1-12"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVLink Switch</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#create-__codelineno-1-13"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#create-__codelineno-1-14"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#create-__codelineno-1-15"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#create-__codelineno-1-16"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express Switch Gen 4</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#create-__codelineno-1-17"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#create-__codelineno-1-18"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#create-__codelineno-1-19"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#create-__codelineno-1-20"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic Nic</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#create-__codelineno-1-21"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#create-__codelineno-1-22"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#create-__codelineno-1-23"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#create-__codelineno-1-24"></a><span class="w">  </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#create-__codelineno-1-25"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt-nic</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#create-__codelineno-1-26"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mgmt Nic</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#create-__codelineno-1-27"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#create-__codelineno-1-28"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic server with npu_factor * 4 xpu(s)</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#create-__codelineno-1-29"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#create-__codelineno-1-30"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#create-__codelineno-1-31"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#create-__codelineno-1-32"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#create-__codelineno-1-33"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#create-__codelineno-1-34"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#create-__codelineno-1-35"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#create-__codelineno-1-36"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#create-__codelineno-1-37"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#create-__codelineno-1-38"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#create-__codelineno-1-39"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#create-__codelineno-1-40"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#create-__codelineno-1-41"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#create-__codelineno-1-42"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#create-__codelineno-1-43"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#create-__codelineno-1-44"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#create-__codelineno-1-45"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#create-__codelineno-1-46"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#create-__codelineno-1-47"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#create-__codelineno-1-48"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#create-__codelineno-1-49"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#create-__codelineno-1-50"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#create-__codelineno-1-51"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#create-__codelineno-1-52"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#create-__codelineno-1-53"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#create-__codelineno-1-54"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#create-__codelineno-1-55"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0:2]</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#create-__codelineno-1-56"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#create-__codelineno-1-57"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#create-__codelineno-1-58"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#create-__codelineno-1-59"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#create-__codelineno-1-60"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#create-__codelineno-1-61"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[0:2]</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#create-__codelineno-1-62"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#create-__codelineno-1-63"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#create-__codelineno-1-64"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#create-__codelineno-1-65"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#create-__codelineno-1-66"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#create-__codelineno-1-67"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CPU Fabric</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#create-__codelineno-1-68"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#create-__codelineno-1-69"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#create-__codelineno-1-70"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#create-__codelineno-1-71"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
</code></pre></div>
</details>

<h4 id="create-create-a-switch-device">Create a Switch Device</h4>
<p>Define a switch device based on the infrastructure description.</p>
<details open>
<summary><strong>Switch device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#create-__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#create-__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#create-__codelineno-2-3"></a><span class="c1"># pyright: reportArgumentType=false</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#create-__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#create-__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#create-__codelineno-2-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Switch</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#create-__codelineno-2-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">):</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#create-__codelineno-2-8"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an InfraGraph device to infrastructure based on the following components:</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#create-__codelineno-2-9"></a><span class="sd">        - 1 generic asic</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#create-__codelineno-2-10"></a><span class="sd">        - nic_count number of ports</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#create-__codelineno-2-11"></a><span class="sd">        - integrated circuitry connecting ports to asic</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#create-__codelineno-2-12"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#create-__codelineno-2-13"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#create-__codelineno-2-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;switch&quot;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#create-__codelineno-2-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A generic switch&quot;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#create-__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#create-__codelineno-2-17"></a>        <span class="n">asic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#create-__codelineno-2-18"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;asic&quot;</span><span class="p">,</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#create-__codelineno-2-19"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic ASIC&quot;</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#create-__codelineno-2-20"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#create-__codelineno-2-21"></a>        <span class="p">)</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#create-__codelineno-2-22"></a>        <span class="n">asic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#create-__codelineno-2-23"></a>        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#create-__codelineno-2-24"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#create-__codelineno-2-25"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#create-__codelineno-2-26"></a>            <span class="n">count</span><span class="o">=</span><span class="n">port_count</span><span class="p">,</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#create-__codelineno-2-27"></a>        <span class="p">)</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#create-__codelineno-2-28"></a>        <span class="n">port</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#create-__codelineno-2-29"></a>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#create-__codelineno-2-30"></a>        <span class="n">ic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic integrated circuitry&quot;</span><span class="p">)</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#create-__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#create-__codelineno-2-32"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">ic</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#create-__codelineno-2-33"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">asic</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#create-__codelineno-2-34"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#create-__codelineno-2-35"></a>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#create-__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#create-__codelineno-2-37"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#create-__codelineno-2-38"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">Switch</span><span class="p">()</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#create-__codelineno-2-39"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>Switch device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#create-__codelineno-3-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#create-__codelineno-3-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#create-__codelineno-3-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#create-__codelineno-3-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic ASIC</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#create-__codelineno-3-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#create-__codelineno-3-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#create-__codelineno-3-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#create-__codelineno-3-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic port</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#create-__codelineno-3-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#create-__codelineno-3-10"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic switch</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#create-__codelineno-3-11"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#create-__codelineno-3-12"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#create-__codelineno-3-13"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#create-__codelineno-3-14"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#create-__codelineno-3-15"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#create-__codelineno-3-16"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#create-__codelineno-3-17"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#create-__codelineno-3-18"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#create-__codelineno-3-19"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic integrated circuitry</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#create-__codelineno-3-20"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#create-__codelineno-3-21"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
</code></pre></div>
</details>

<h4 id="create-create-an-infrastructure-of-instances-of-devices-links-and-edges">Create an Infrastructure of Instances of devices, Links and Edges</h4>
<p>Define an infrastructure based on the infrastructure description.</p>
<details open>
<summary><strong>Two Tier Clos Fabric Infrastructure using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#create-__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#create-__codelineno-4-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.generic.server</span><span class="w"> </span><span class="kn">import</span> <span class="n">Server</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#create-__codelineno-4-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.generic.generic_switch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Switch</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#create-__codelineno-4-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#create-__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#create-__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#create-__codelineno-4-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">ClosFabric</span><span class="p">(</span><span class="n">Infrastructure</span><span class="p">):</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#create-__codelineno-4-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a 2 tier clos fabric with the following characteristics:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#create-__codelineno-4-9"></a><span class="sd">    - 4 generic servers</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#create-__codelineno-4-10"></a><span class="sd">    - each generic server with 2 npus and 2 nics</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#create-__codelineno-4-11"></a><span class="sd">    - 4 leaf switches each with 16 ports</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#create-__codelineno-4-12"></a><span class="sd">    - 3 spine switch each with 16 ports</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#create-__codelineno-4-13"></a><span class="sd">    - connectivity between servers and leaf switches is 100G</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#create-__codelineno-4-14"></a><span class="sd">    - connectivity between servers and spine switch is 400G</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#create-__codelineno-4-15"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#create-__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#create-__codelineno-4-17"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#create-__codelineno-4-18"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;closfabric&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;2 Tier Clos Fabric&quot;</span><span class="p">)</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#create-__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#create-__codelineno-4-20"></a>        <span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">()</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#create-__codelineno-4-21"></a>        <span class="n">switch</span> <span class="o">=</span> <span class="n">Switch</span><span class="p">()</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#create-__codelineno-4-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">switch</span><span class="p">)</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#create-__codelineno-4-23"></a>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#create-__codelineno-4-24"></a>        <span class="n">hosts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#create-__codelineno-4-25"></a>        <span class="n">leaf_switches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;leafsw&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">switch</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#create-__codelineno-4-26"></a>        <span class="n">spine_switches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;spinesw&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">switch</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#create-__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#create-__codelineno-4-28"></a>        <span class="n">leaf_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#create-__codelineno-4-29"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;leaf-link&quot;</span><span class="p">,</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#create-__codelineno-4-30"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Link characteristics for connectivity between servers and leaf switches&quot;</span><span class="p">,</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#create-__codelineno-4-31"></a>        <span class="p">)</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#create-__codelineno-4-32"></a>        <span class="n">leaf_link</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">bandwidth</span><span class="o">.</span><span class="n">gigabits_per_second</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#create-__codelineno-4-33"></a>        <span class="n">spine_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#create-__codelineno-4-34"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spine-link&quot;</span><span class="p">,</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#create-__codelineno-4-35"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Link characteristics for connectivity between leaf switches and spine switches&quot;</span><span class="p">,</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#create-__codelineno-4-36"></a>        <span class="p">)</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#create-__codelineno-4-37"></a>        <span class="n">spine_link</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">bandwidth</span><span class="o">.</span><span class="n">gigabits_per_second</span> <span class="o">=</span> <span class="mi">400</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#create-__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#create-__codelineno-4-39"></a>        <span class="n">host_component</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span><span class="p">)</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#create-__codelineno-4-40"></a>        <span class="n">switch_component</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">switch</span><span class="p">,</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span><span class="p">)</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#create-__codelineno-4-41"></a>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#create-__codelineno-4-42"></a>        <span class="c1"># link each host to one leaf switch</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#create-__codelineno-4-43"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">hosts</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#create-__codelineno-4-44"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">InfrastructureEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">leaf_link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#create-__codelineno-4-45"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hosts</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#create-__codelineno-4-46"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">host_component</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#create-__codelineno-4-47"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#create-__codelineno-4-48"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">switch_component</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#create-__codelineno-4-49"></a>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#create-__codelineno-4-50"></a>        <span class="c1"># link every leaf switch to every spine switch</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#create-__codelineno-4-51"></a>        <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#create-__codelineno-4-52"></a>        <span class="k">for</span> <span class="n">leaf_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#create-__codelineno-4-53"></a>            <span class="k">for</span> <span class="n">spine_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spine_switches</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#create-__codelineno-4-54"></a>                <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">InfrastructureEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">spine_link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#create-__codelineno-4-55"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">leaf_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#create-__codelineno-4-56"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">switch_component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">host_component</span><span class="o">.</span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">spine_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#create-__codelineno-4-57"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spine_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">spine_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#create-__codelineno-4-58"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">switch_component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">leaf_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
</code></pre></div>
</details>

<details closed>
<summary><strong>ClosFabric infrastructure definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#create-__codelineno-5-1"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2 Tier Clos Fabric</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#create-__codelineno-5-2"></a><span class="nt">devices</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#create-__codelineno-5-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#create-__codelineno-5-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#create-__codelineno-5-5"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#create-__codelineno-5-6"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic CPU</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#create-__codelineno-5-7"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#create-__codelineno-5-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#create-__codelineno-5-9"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#create-__codelineno-5-10"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic GPU/XPU</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#create-__codelineno-5-11"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#create-__codelineno-5-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#create-__codelineno-5-13"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#create-__codelineno-5-14"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVLink Switch</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#create-__codelineno-5-15"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#create-__codelineno-5-16"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#create-__codelineno-5-17"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#create-__codelineno-5-18"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express Switch Gen 4</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#create-__codelineno-5-19"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#create-__codelineno-5-20"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#create-__codelineno-5-21"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#create-__codelineno-5-22"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic Nic</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#create-__codelineno-5-23"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#create-__codelineno-5-24"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#create-__codelineno-5-25"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#create-__codelineno-5-26"></a><span class="w">    </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#create-__codelineno-5-27"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt-nic</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#create-__codelineno-5-28"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mgmt Nic</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#create-__codelineno-5-29"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#create-__codelineno-5-30"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic server with npu_factor * 4 xpu(s)</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#create-__codelineno-5-31"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#create-__codelineno-5-32"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#create-__codelineno-5-33"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#create-__codelineno-5-34"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#create-__codelineno-5-35"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#create-__codelineno-5-36"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#create-__codelineno-5-37"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#create-__codelineno-5-38"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#create-__codelineno-5-39"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#create-__codelineno-5-40"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#create-__codelineno-5-41"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#create-__codelineno-5-42"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#create-__codelineno-5-43"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#create-__codelineno-5-44"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#create-__codelineno-5-45"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#create-__codelineno-5-46"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#create-__codelineno-5-47"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#create-__codelineno-5-48"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#create-__codelineno-5-49"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#create-__codelineno-5-50"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#create-__codelineno-5-51"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#create-__codelineno-5-52"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#create-__codelineno-5-53"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#create-__codelineno-5-54"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#create-__codelineno-5-55"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#create-__codelineno-5-56"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#create-__codelineno-5-57"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0:2]</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#create-__codelineno-5-58"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#create-__codelineno-5-59"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#create-__codelineno-5-60"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#create-__codelineno-5-61"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#create-__codelineno-5-62"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#create-__codelineno-5-63"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[0:2]</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#create-__codelineno-5-64"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#create-__codelineno-5-65"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#create-__codelineno-5-66"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#create-__codelineno-5-67"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#create-__codelineno-5-68"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#create-__codelineno-5-69"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CPU Fabric</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#create-__codelineno-5-70"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#create-__codelineno-5-71"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#create-__codelineno-5-72"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#create-__codelineno-5-73"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#create-__codelineno-5-74"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#create-__codelineno-5-75"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#create-__codelineno-5-76"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#create-__codelineno-5-77"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic ASIC</span>
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#create-__codelineno-5-78"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#create-__codelineno-5-79"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#create-__codelineno-5-80"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#create-__codelineno-5-81"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic port</span>
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#create-__codelineno-5-82"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#create-__codelineno-5-83"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic switch</span>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#create-__codelineno-5-84"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#create-__codelineno-5-85"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#create-__codelineno-5-86"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#create-__codelineno-5-87"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#create-__codelineno-5-88"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#create-__codelineno-5-89"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#create-__codelineno-5-90"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#create-__codelineno-5-91"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#create-__codelineno-5-92"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic integrated circuitry</span>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#create-__codelineno-5-93"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-5-94" name="__codelineno-5-94" href="#create-__codelineno-5-94"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-95" name="__codelineno-5-95" href="#create-__codelineno-5-95"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-96" name="__codelineno-5-96" href="#create-__codelineno-5-96"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-97" name="__codelineno-5-97" href="#create-__codelineno-5-97"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-98" name="__codelineno-5-98" href="#create-__codelineno-5-98"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[0]</span>
<a id="__codelineno-5-99" name="__codelineno-5-99" href="#create-__codelineno-5-99"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-100" name="__codelineno-5-100" href="#create-__codelineno-5-100"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-101" name="__codelineno-5-101" href="#create-__codelineno-5-101"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-102" name="__codelineno-5-102" href="#create-__codelineno-5-102"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-103" name="__codelineno-5-103" href="#create-__codelineno-5-103"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-104" name="__codelineno-5-104" href="#create-__codelineno-5-104"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-105" name="__codelineno-5-105" href="#create-__codelineno-5-105"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-106" name="__codelineno-5-106" href="#create-__codelineno-5-106"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[1]</span>
<a id="__codelineno-5-107" name="__codelineno-5-107" href="#create-__codelineno-5-107"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-108" name="__codelineno-5-108" href="#create-__codelineno-5-108"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-109" name="__codelineno-5-109" href="#create-__codelineno-5-109"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-110" name="__codelineno-5-110" href="#create-__codelineno-5-110"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-111" name="__codelineno-5-111" href="#create-__codelineno-5-111"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-112" name="__codelineno-5-112" href="#create-__codelineno-5-112"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-113" name="__codelineno-5-113" href="#create-__codelineno-5-113"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-114" name="__codelineno-5-114" href="#create-__codelineno-5-114"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[2]</span>
<a id="__codelineno-5-115" name="__codelineno-5-115" href="#create-__codelineno-5-115"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-116" name="__codelineno-5-116" href="#create-__codelineno-5-116"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-117" name="__codelineno-5-117" href="#create-__codelineno-5-117"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-118" name="__codelineno-5-118" href="#create-__codelineno-5-118"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-119" name="__codelineno-5-119" href="#create-__codelineno-5-119"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-120" name="__codelineno-5-120" href="#create-__codelineno-5-120"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-121" name="__codelineno-5-121" href="#create-__codelineno-5-121"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-122" name="__codelineno-5-122" href="#create-__codelineno-5-122"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[3]</span>
<a id="__codelineno-5-123" name="__codelineno-5-123" href="#create-__codelineno-5-123"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-124" name="__codelineno-5-124" href="#create-__codelineno-5-124"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-125" name="__codelineno-5-125" href="#create-__codelineno-5-125"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-126" name="__codelineno-5-126" href="#create-__codelineno-5-126"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-127" name="__codelineno-5-127" href="#create-__codelineno-5-127"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-128" name="__codelineno-5-128" href="#create-__codelineno-5-128"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-129" name="__codelineno-5-129" href="#create-__codelineno-5-129"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-130" name="__codelineno-5-130" href="#create-__codelineno-5-130"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-131" name="__codelineno-5-131" href="#create-__codelineno-5-131"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-132" name="__codelineno-5-132" href="#create-__codelineno-5-132"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-133" name="__codelineno-5-133" href="#create-__codelineno-5-133"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-134" name="__codelineno-5-134" href="#create-__codelineno-5-134"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-135" name="__codelineno-5-135" href="#create-__codelineno-5-135"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-136" name="__codelineno-5-136" href="#create-__codelineno-5-136"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-137" name="__codelineno-5-137" href="#create-__codelineno-5-137"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-138" name="__codelineno-5-138" href="#create-__codelineno-5-138"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-139" name="__codelineno-5-139" href="#create-__codelineno-5-139"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-140" name="__codelineno-5-140" href="#create-__codelineno-5-140"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-141" name="__codelineno-5-141" href="#create-__codelineno-5-141"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-142" name="__codelineno-5-142" href="#create-__codelineno-5-142"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-143" name="__codelineno-5-143" href="#create-__codelineno-5-143"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-144" name="__codelineno-5-144" href="#create-__codelineno-5-144"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-145" name="__codelineno-5-145" href="#create-__codelineno-5-145"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-146" name="__codelineno-5-146" href="#create-__codelineno-5-146"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-147" name="__codelineno-5-147" href="#create-__codelineno-5-147"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-148" name="__codelineno-5-148" href="#create-__codelineno-5-148"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-149" name="__codelineno-5-149" href="#create-__codelineno-5-149"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-150" name="__codelineno-5-150" href="#create-__codelineno-5-150"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-151" name="__codelineno-5-151" href="#create-__codelineno-5-151"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-152" name="__codelineno-5-152" href="#create-__codelineno-5-152"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-153" name="__codelineno-5-153" href="#create-__codelineno-5-153"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-154" name="__codelineno-5-154" href="#create-__codelineno-5-154"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-155" name="__codelineno-5-155" href="#create-__codelineno-5-155"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-156" name="__codelineno-5-156" href="#create-__codelineno-5-156"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-157" name="__codelineno-5-157" href="#create-__codelineno-5-157"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-158" name="__codelineno-5-158" href="#create-__codelineno-5-158"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-159" name="__codelineno-5-159" href="#create-__codelineno-5-159"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-160" name="__codelineno-5-160" href="#create-__codelineno-5-160"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-161" name="__codelineno-5-161" href="#create-__codelineno-5-161"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-162" name="__codelineno-5-162" href="#create-__codelineno-5-162"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-163" name="__codelineno-5-163" href="#create-__codelineno-5-163"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-164" name="__codelineno-5-164" href="#create-__codelineno-5-164"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-165" name="__codelineno-5-165" href="#create-__codelineno-5-165"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-166" name="__codelineno-5-166" href="#create-__codelineno-5-166"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-167" name="__codelineno-5-167" href="#create-__codelineno-5-167"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-168" name="__codelineno-5-168" href="#create-__codelineno-5-168"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-169" name="__codelineno-5-169" href="#create-__codelineno-5-169"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-170" name="__codelineno-5-170" href="#create-__codelineno-5-170"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-171" name="__codelineno-5-171" href="#create-__codelineno-5-171"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-172" name="__codelineno-5-172" href="#create-__codelineno-5-172"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-173" name="__codelineno-5-173" href="#create-__codelineno-5-173"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-174" name="__codelineno-5-174" href="#create-__codelineno-5-174"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-175" name="__codelineno-5-175" href="#create-__codelineno-5-175"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-176" name="__codelineno-5-176" href="#create-__codelineno-5-176"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-177" name="__codelineno-5-177" href="#create-__codelineno-5-177"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-178" name="__codelineno-5-178" href="#create-__codelineno-5-178"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-179" name="__codelineno-5-179" href="#create-__codelineno-5-179"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-180" name="__codelineno-5-180" href="#create-__codelineno-5-180"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-181" name="__codelineno-5-181" href="#create-__codelineno-5-181"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-182" name="__codelineno-5-182" href="#create-__codelineno-5-182"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-183" name="__codelineno-5-183" href="#create-__codelineno-5-183"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-184" name="__codelineno-5-184" href="#create-__codelineno-5-184"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-185" name="__codelineno-5-185" href="#create-__codelineno-5-185"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-186" name="__codelineno-5-186" href="#create-__codelineno-5-186"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-187" name="__codelineno-5-187" href="#create-__codelineno-5-187"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-188" name="__codelineno-5-188" href="#create-__codelineno-5-188"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-189" name="__codelineno-5-189" href="#create-__codelineno-5-189"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-190" name="__codelineno-5-190" href="#create-__codelineno-5-190"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-191" name="__codelineno-5-191" href="#create-__codelineno-5-191"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-192" name="__codelineno-5-192" href="#create-__codelineno-5-192"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-193" name="__codelineno-5-193" href="#create-__codelineno-5-193"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-194" name="__codelineno-5-194" href="#create-__codelineno-5-194"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-195" name="__codelineno-5-195" href="#create-__codelineno-5-195"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-196" name="__codelineno-5-196" href="#create-__codelineno-5-196"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-197" name="__codelineno-5-197" href="#create-__codelineno-5-197"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-198" name="__codelineno-5-198" href="#create-__codelineno-5-198"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-199" name="__codelineno-5-199" href="#create-__codelineno-5-199"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-200" name="__codelineno-5-200" href="#create-__codelineno-5-200"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-201" name="__codelineno-5-201" href="#create-__codelineno-5-201"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-202" name="__codelineno-5-202" href="#create-__codelineno-5-202"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-203" name="__codelineno-5-203" href="#create-__codelineno-5-203"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-204" name="__codelineno-5-204" href="#create-__codelineno-5-204"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-205" name="__codelineno-5-205" href="#create-__codelineno-5-205"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-206" name="__codelineno-5-206" href="#create-__codelineno-5-206"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-207" name="__codelineno-5-207" href="#create-__codelineno-5-207"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-208" name="__codelineno-5-208" href="#create-__codelineno-5-208"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-209" name="__codelineno-5-209" href="#create-__codelineno-5-209"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-210" name="__codelineno-5-210" href="#create-__codelineno-5-210"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-211" name="__codelineno-5-211" href="#create-__codelineno-5-211"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-212" name="__codelineno-5-212" href="#create-__codelineno-5-212"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-213" name="__codelineno-5-213" href="#create-__codelineno-5-213"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-214" name="__codelineno-5-214" href="#create-__codelineno-5-214"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-215" name="__codelineno-5-215" href="#create-__codelineno-5-215"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-216" name="__codelineno-5-216" href="#create-__codelineno-5-216"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-217" name="__codelineno-5-217" href="#create-__codelineno-5-217"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-218" name="__codelineno-5-218" href="#create-__codelineno-5-218"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-219" name="__codelineno-5-219" href="#create-__codelineno-5-219"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-220" name="__codelineno-5-220" href="#create-__codelineno-5-220"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-221" name="__codelineno-5-221" href="#create-__codelineno-5-221"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-222" name="__codelineno-5-222" href="#create-__codelineno-5-222"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-223" name="__codelineno-5-223" href="#create-__codelineno-5-223"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-224" name="__codelineno-5-224" href="#create-__codelineno-5-224"></a><span class="nt">instances</span><span class="p">:</span>
<a id="__codelineno-5-225" name="__codelineno-5-225" href="#create-__codelineno-5-225"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-5-226" name="__codelineno-5-226" href="#create-__codelineno-5-226"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<a id="__codelineno-5-227" name="__codelineno-5-227" href="#create-__codelineno-5-227"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<a id="__codelineno-5-228" name="__codelineno-5-228" href="#create-__codelineno-5-228"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-5-229" name="__codelineno-5-229" href="#create-__codelineno-5-229"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-230" name="__codelineno-5-230" href="#create-__codelineno-5-230"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw</span>
<a id="__codelineno-5-231" name="__codelineno-5-231" href="#create-__codelineno-5-231"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-5-232" name="__codelineno-5-232" href="#create-__codelineno-5-232"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-233" name="__codelineno-5-233" href="#create-__codelineno-5-233"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw</span>
<a id="__codelineno-5-234" name="__codelineno-5-234" href="#create-__codelineno-5-234"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-235" name="__codelineno-5-235" href="#create-__codelineno-5-235"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Link characteristics for connectivity between servers and leaf switches</span>
<a id="__codelineno-5-236" name="__codelineno-5-236" href="#create-__codelineno-5-236"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-237" name="__codelineno-5-237" href="#create-__codelineno-5-237"></a><span class="w">  </span><span class="nt">physical</span><span class="p">:</span>
<a id="__codelineno-5-238" name="__codelineno-5-238" href="#create-__codelineno-5-238"></a><span class="w">    </span><span class="nt">bandwidth</span><span class="p">:</span>
<a id="__codelineno-5-239" name="__codelineno-5-239" href="#create-__codelineno-5-239"></a><span class="w">      </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gigabits_per_second</span>
<a id="__codelineno-5-240" name="__codelineno-5-240" href="#create-__codelineno-5-240"></a><span class="w">      </span><span class="nt">gigabits_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-5-241" name="__codelineno-5-241" href="#create-__codelineno-5-241"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Link characteristics for connectivity between leaf switches and spine</span>
<a id="__codelineno-5-242" name="__codelineno-5-242" href="#create-__codelineno-5-242"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">switches</span>
<a id="__codelineno-5-243" name="__codelineno-5-243" href="#create-__codelineno-5-243"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-244" name="__codelineno-5-244" href="#create-__codelineno-5-244"></a><span class="w">  </span><span class="nt">physical</span><span class="p">:</span>
<a id="__codelineno-5-245" name="__codelineno-5-245" href="#create-__codelineno-5-245"></a><span class="w">    </span><span class="nt">bandwidth</span><span class="p">:</span>
<a id="__codelineno-5-246" name="__codelineno-5-246" href="#create-__codelineno-5-246"></a><span class="w">      </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gigabits_per_second</span>
<a id="__codelineno-5-247" name="__codelineno-5-247" href="#create-__codelineno-5-247"></a><span class="w">      </span><span class="nt">gigabits_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span>
<a id="__codelineno-5-248" name="__codelineno-5-248" href="#create-__codelineno-5-248"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">closfabric</span>
</code></pre></div>
</details></section><section class="print-page" id="blueprints" heading-number="6"><h1 id="blueprints-infragraph-blueprints">Infragraph Blueprints</h1>
<p>Infragraph provides users with multiple <strong>blueprints</strong> that help define the foundational components of an infrastructure. These blueprints cover both <strong>devices</strong> and <strong>fabrics</strong>, enabling flexible and extensible modeling of network and compute infrastructure.</p>
<p>Each blueprint is implemented as Python source code, allowing users to create classes and objects that inherit from the generated SDK. This approach makes it possible to define more realistic and customizable representations of devices and fabrics while maintaining compatibility with Infragraph’s schema and data models.</p>
<p>All available blueprints can be found in the following directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#blueprints-__codelineno-0-1"></a>src/infragraph/blueprints
</code></pre></div>
<hr />
<h2 id="blueprints-device-blueprints">Device Blueprints</h2>
<p>Device blueprints enable you to instantiate specific device types using the Infragraph schema format. Each blueprint encapsulates attributes, component definitions, and configuration logic that represent actual hardware or node types within a network topology.</p>
<p>All device blueprints are organized under:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#blueprints-__codelineno-1-1"></a>src/infragraph/blueprints/devices/&lt;vendor&gt;
</code></pre></div></p>
<p>Each Infragraph device can expose <strong>multiple variants</strong>, allowing the same blueprint to represent different SKUs or generations of hardware. For example, a <code>QSFP</code> device supports the following variants:
- <code>qsfp_plus_40g</code>
- <code>qsfp28_100g</code>
- <code>qsfp56_200g</code>
- <code>qsfp_dd_400g</code>
- <code>qsfp_dd_800g</code></p>
<p>Infragraph devices support variant selection at initialization time, enabling end users to choose the exact hardware variant they want to model when creating a device object.</p>
<p>The example below shows <strong>QSFP</strong> class definition and initialization using a specific variant, demonstrating how variants are applied in practice.</p>
<hr />
<h3 id="blueprints-creating-a-qsfp-transceiver-blueprint">Creating a QSFP Transceiver Blueprint</h3>
<p>The <code>QSFP</code> class defines a <strong>device blueprint</strong> for QSFP-family pluggable transceivers in InfraGraph.<br />
It inherits from the base <code>Device</code> class and models the <strong>internal structure, ports, and signal binding</strong> of a QSFP module in a consistent and reusable way.</p>
<p>All QSFP variants share the same internal topology:</p>
<ul>
<li>One <strong>electrical host-facing interface</strong></li>
<li>One <strong>optical media-facing interface</strong></li>
<li>A fixed <strong>one-to-one electrical ↔ optical binding</strong></li>
</ul>
<p>Only the <strong>capabilities</strong> (form factor, speed, and lane count) differ across variants, and these are strictly controlled using a variant catalog.</p>
<h4 id="blueprints-example-qsfppy">Example: <code>qsfp.py</code></h4>
<p><code>Location: /src/infragraph/blueprints/devices/common/transceiver</code></p>
<details open>
<summary><strong>QSFP device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#blueprints-__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Dict</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#blueprints-__codelineno-2-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#blueprints-__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#blueprints-__codelineno-2-4"></a><span class="n">QsfpVariant</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#blueprints-__codelineno-2-5"></a>    <span class="s2">&quot;qsfp_plus_40g&quot;</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#blueprints-__codelineno-2-6"></a>    <span class="s2">&quot;qsfp28_100g&quot;</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#blueprints-__codelineno-2-7"></a>    <span class="s2">&quot;qsfp56_200g&quot;</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#blueprints-__codelineno-2-8"></a>    <span class="s2">&quot;qsfp_dd_400g&quot;</span><span class="p">,</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#blueprints-__codelineno-2-9"></a>    <span class="s2">&quot;qsfp_dd_800g&quot;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#blueprints-__codelineno-2-10"></a><span class="p">]</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#blueprints-__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#blueprints-__codelineno-2-12"></a><span class="n">QSFP_VARIANT_CATALOG</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">QsfpVariant</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#blueprints-__codelineno-2-13"></a>    <span class="s2">&quot;qsfp_plus_40g&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#blueprints-__codelineno-2-14"></a>        <span class="s2">&quot;form_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;QSFP_PLUS&quot;</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#blueprints-__codelineno-2-15"></a>        <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="s2">&quot;40Gbps&quot;</span><span class="p">,</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#blueprints-__codelineno-2-16"></a>        <span class="s2">&quot;lanes&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#blueprints-__codelineno-2-17"></a>    <span class="p">},</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#blueprints-__codelineno-2-18"></a>    <span class="s2">&quot;qsfp28_100g&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#blueprints-__codelineno-2-19"></a>        <span class="s2">&quot;form_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;QSFP28&quot;</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#blueprints-__codelineno-2-20"></a>        <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="s2">&quot;100Gbps&quot;</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#blueprints-__codelineno-2-21"></a>        <span class="s2">&quot;lanes&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#blueprints-__codelineno-2-22"></a>    <span class="p">},</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#blueprints-__codelineno-2-23"></a>    <span class="s2">&quot;qsfp56_200g&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#blueprints-__codelineno-2-24"></a>        <span class="s2">&quot;form_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;QSFP56&quot;</span><span class="p">,</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#blueprints-__codelineno-2-25"></a>        <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="s2">&quot;200Gbps&quot;</span><span class="p">,</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#blueprints-__codelineno-2-26"></a>        <span class="s2">&quot;lanes&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#blueprints-__codelineno-2-27"></a>    <span class="p">},</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#blueprints-__codelineno-2-28"></a>    <span class="s2">&quot;qsfp_dd_400g&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#blueprints-__codelineno-2-29"></a>        <span class="s2">&quot;form_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;QSFP-DD&quot;</span><span class="p">,</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#blueprints-__codelineno-2-30"></a>        <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="s2">&quot;400Gbps&quot;</span><span class="p">,</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#blueprints-__codelineno-2-31"></a>        <span class="s2">&quot;lanes&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#blueprints-__codelineno-2-32"></a>    <span class="p">},</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#blueprints-__codelineno-2-33"></a>    <span class="s2">&quot;qsfp_dd_800g&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#blueprints-__codelineno-2-34"></a>        <span class="s2">&quot;form_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;QSFP-DD&quot;</span><span class="p">,</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#blueprints-__codelineno-2-35"></a>        <span class="s2">&quot;speed&quot;</span><span class="p">:</span> <span class="s2">&quot;800Gbps&quot;</span><span class="p">,</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#blueprints-__codelineno-2-36"></a>        <span class="s2">&quot;lanes&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#blueprints-__codelineno-2-37"></a>    <span class="p">}</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#blueprints-__codelineno-2-38"></a><span class="p">}</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#blueprints-__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#blueprints-__codelineno-2-40"></a><span class="k">class</span><span class="w"> </span><span class="nc">QSFP</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#blueprints-__codelineno-2-41"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#blueprints-__codelineno-2-42"></a><span class="sd">    InfraGraph model of a QSFP-family pluggable transceiver.</span>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#blueprints-__codelineno-2-43"></a>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="#blueprints-__codelineno-2-44"></a><span class="sd">    This class represents QSFP+, QSFP28, QSFP56, QSFP-DD 400 &amp; 800G</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="#blueprints-__codelineno-2-45"></a><span class="sd">    optical modules. All variants share the same internal topology:</span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="#blueprints-__codelineno-2-46"></a><span class="sd">    a one-to-one binding between an electrical host interface and</span>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="#blueprints-__codelineno-2-47"></a><span class="sd">    an optical media interface.</span>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="#blueprints-__codelineno-2-48"></a>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="#blueprints-__codelineno-2-49"></a><span class="sd">    Variants are profile-locked via an authoritative catalog and</span>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="#blueprints-__codelineno-2-50"></a><span class="sd">    differ only in bandwidth, signaling lanes, and form factor.</span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="#blueprints-__codelineno-2-51"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-2-52" name="__codelineno-2-52" href="#blueprints-__codelineno-2-52"></a>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="#blueprints-__codelineno-2-53"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variant</span><span class="p">:</span> <span class="n">QsfpVariant</span> <span class="o">=</span> <span class="s2">&quot;qsfp28_100g&quot;</span><span class="p">):</span>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="#blueprints-__codelineno-2-54"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-2-55" name="__codelineno-2-55" href="#blueprints-__codelineno-2-55"></a><span class="sd">        Initialize a QSFP transceiver model.</span>
<a id="__codelineno-2-56" name="__codelineno-2-56" href="#blueprints-__codelineno-2-56"></a>
<a id="__codelineno-2-57" name="__codelineno-2-57" href="#blueprints-__codelineno-2-57"></a><span class="sd">        Args:</span>
<a id="__codelineno-2-58" name="__codelineno-2-58" href="#blueprints-__codelineno-2-58"></a><span class="sd">            variant (QsfpVariant, optional):</span>
<a id="__codelineno-2-59" name="__codelineno-2-59" href="#blueprints-__codelineno-2-59"></a><span class="sd">                QSFP variant to instantiate. Determines form factor,</span>
<a id="__codelineno-2-60" name="__codelineno-2-60" href="#blueprints-__codelineno-2-60"></a><span class="sd">                total bandwidth, and number of electrical lanes.</span>
<a id="__codelineno-2-61" name="__codelineno-2-61" href="#blueprints-__codelineno-2-61"></a><span class="sd">                Defaults to &quot;qsfp28_100g&quot;.</span>
<a id="__codelineno-2-62" name="__codelineno-2-62" href="#blueprints-__codelineno-2-62"></a>
<a id="__codelineno-2-63" name="__codelineno-2-63" href="#blueprints-__codelineno-2-63"></a><span class="sd">        Raises:</span>
<a id="__codelineno-2-64" name="__codelineno-2-64" href="#blueprints-__codelineno-2-64"></a><span class="sd">            ValueError:</span>
<a id="__codelineno-2-65" name="__codelineno-2-65" href="#blueprints-__codelineno-2-65"></a><span class="sd">                If an unsupported QSFP variant is specified.</span>
<a id="__codelineno-2-66" name="__codelineno-2-66" href="#blueprints-__codelineno-2-66"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-2-67" name="__codelineno-2-67" href="#blueprints-__codelineno-2-67"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-2-68" name="__codelineno-2-68" href="#blueprints-__codelineno-2-68"></a>
<a id="__codelineno-2-69" name="__codelineno-2-69" href="#blueprints-__codelineno-2-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_variant</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span>
<a id="__codelineno-2-70" name="__codelineno-2-70" href="#blueprints-__codelineno-2-70"></a>
<a id="__codelineno-2-71" name="__codelineno-2-71" href="#blueprints-__codelineno-2-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="n">variant</span>
<a id="__codelineno-2-72" name="__codelineno-2-72" href="#blueprints-__codelineno-2-72"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span> <span class="o">=</span> <span class="n">QSFP_VARIANT_CATALOG</span><span class="p">[</span><span class="n">variant</span><span class="p">]</span>
<a id="__codelineno-2-73" name="__codelineno-2-73" href="#blueprints-__codelineno-2-73"></a>
<a id="__codelineno-2-74" name="__codelineno-2-74" href="#blueprints-__codelineno-2-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;form_factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
<a id="__codelineno-2-75" name="__codelineno-2-75" href="#blueprints-__codelineno-2-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;form_factor&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> Transceiver&quot;</span>
<a id="__codelineno-2-76" name="__codelineno-2-76" href="#blueprints-__codelineno-2-76"></a>
<a id="__codelineno-2-77" name="__codelineno-2-77" href="#blueprints-__codelineno-2-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">electrical_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_electrical_port</span><span class="p">()</span>
<a id="__codelineno-2-78" name="__codelineno-2-78" href="#blueprints-__codelineno-2-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">optical_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_optical_port</span><span class="p">()</span>
<a id="__codelineno-2-79" name="__codelineno-2-79" href="#blueprints-__codelineno-2-79"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">binding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_links</span><span class="p">()</span>
<a id="__codelineno-2-80" name="__codelineno-2-80" href="#blueprints-__codelineno-2-80"></a>
<a id="__codelineno-2-81" name="__codelineno-2-81" href="#blueprints-__codelineno-2-81"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_internal</span><span class="p">()</span>
<a id="__codelineno-2-82" name="__codelineno-2-82" href="#blueprints-__codelineno-2-82"></a>
<a id="__codelineno-2-83" name="__codelineno-2-83" href="#blueprints-__codelineno-2-83"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_variant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variant</span><span class="p">:</span> <span class="n">QsfpVariant</span><span class="p">):</span>
<a id="__codelineno-2-84" name="__codelineno-2-84" href="#blueprints-__codelineno-2-84"></a>        <span class="k">if</span> <span class="n">variant</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">QSFP_VARIANT_CATALOG</span><span class="p">:</span>
<a id="__codelineno-2-85" name="__codelineno-2-85" href="#blueprints-__codelineno-2-85"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported QSFP variant: </span><span class="si">{</span><span class="n">variant</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-86" name="__codelineno-2-86" href="#blueprints-__codelineno-2-86"></a>
<a id="__codelineno-2-87" name="__codelineno-2-87" href="#blueprints-__codelineno-2-87"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_electrical_port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-2-88" name="__codelineno-2-88" href="#blueprints-__codelineno-2-88"></a>        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-89" name="__codelineno-2-89" href="#blueprints-__codelineno-2-89"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;electrical_port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-90" name="__codelineno-2-90" href="#blueprints-__codelineno-2-90"></a>            <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Electrical host interface (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;lanes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> lanes)&quot;</span><span class="p">,</span>
<a id="__codelineno-2-91" name="__codelineno-2-91" href="#blueprints-__codelineno-2-91"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-92" name="__codelineno-2-92" href="#blueprints-__codelineno-2-92"></a>        <span class="p">)</span>
<a id="__codelineno-2-93" name="__codelineno-2-93" href="#blueprints-__codelineno-2-93"></a>        <span class="n">port</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span>
<a id="__codelineno-2-94" name="__codelineno-2-94" href="#blueprints-__codelineno-2-94"></a>        <span class="k">return</span> <span class="n">port</span>
<a id="__codelineno-2-95" name="__codelineno-2-95" href="#blueprints-__codelineno-2-95"></a>
<a id="__codelineno-2-96" name="__codelineno-2-96" href="#blueprints-__codelineno-2-96"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_optical_port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-2-97" name="__codelineno-2-97" href="#blueprints-__codelineno-2-97"></a>        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-98" name="__codelineno-2-98" href="#blueprints-__codelineno-2-98"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;optical_port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-99" name="__codelineno-2-99" href="#blueprints-__codelineno-2-99"></a>            <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Optical media interface (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
<a id="__codelineno-2-100" name="__codelineno-2-100" href="#blueprints-__codelineno-2-100"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-101" name="__codelineno-2-101" href="#blueprints-__codelineno-2-101"></a>        <span class="p">)</span>
<a id="__codelineno-2-102" name="__codelineno-2-102" href="#blueprints-__codelineno-2-102"></a>        <span class="n">port</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span>
<a id="__codelineno-2-103" name="__codelineno-2-103" href="#blueprints-__codelineno-2-103"></a>        <span class="k">return</span> <span class="n">port</span>
<a id="__codelineno-2-104" name="__codelineno-2-104" href="#blueprints-__codelineno-2-104"></a>
<a id="__codelineno-2-105" name="__codelineno-2-105" href="#blueprints-__codelineno-2-105"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-2-106" name="__codelineno-2-106" href="#blueprints-__codelineno-2-106"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-107" name="__codelineno-2-107" href="#blueprints-__codelineno-2-107"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;internal_binding&quot;</span><span class="p">,</span>
<a id="__codelineno-2-108" name="__codelineno-2-108" href="#blueprints-__codelineno-2-108"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Electrical-to-optical signal binding&quot;</span><span class="p">,</span>
<a id="__codelineno-2-109" name="__codelineno-2-109" href="#blueprints-__codelineno-2-109"></a>        <span class="p">)</span>
<a id="__codelineno-2-110" name="__codelineno-2-110" href="#blueprints-__codelineno-2-110"></a>
<a id="__codelineno-2-111" name="__codelineno-2-111" href="#blueprints-__codelineno-2-111"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wire_internal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-2-112" name="__codelineno-2-112" href="#blueprints-__codelineno-2-112"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-113" name="__codelineno-2-113" href="#blueprints-__codelineno-2-113"></a>            <span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span>
<a id="__codelineno-2-114" name="__codelineno-2-114" href="#blueprints-__codelineno-2-114"></a>            <span class="n">link</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">binding</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-2-115" name="__codelineno-2-115" href="#blueprints-__codelineno-2-115"></a>        <span class="p">)</span>
<a id="__codelineno-2-116" name="__codelineno-2-116" href="#blueprints-__codelineno-2-116"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;electrical_port&quot;</span>
<a id="__codelineno-2-117" name="__codelineno-2-117" href="#blueprints-__codelineno-2-117"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;optical_port&quot;</span>
<a id="__codelineno-2-118" name="__codelineno-2-118" href="#blueprints-__codelineno-2-118"></a>
<a id="__codelineno-2-119" name="__codelineno-2-119" href="#blueprints-__codelineno-2-119"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-120" name="__codelineno-2-120" href="#blueprints-__codelineno-2-120"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">QSFP</span><span class="p">(</span><span class="s2">&quot;qsfp_dd_400g&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>

<h2 id="blueprints-composability">Composability</h2>
<p>Infragraph supports modeling a <strong>device inside another device</strong>, where the nested device behaves as a <strong>component</strong> of the parent device using <code>Component.Device</code>.</p>
<p>The idea is that we can add a <strong>CX5</strong> device to a <strong>DGX</strong>, and then add a <strong>QSFP</strong> to the <strong>CX5</strong>:</p>
<h3 id="blueprints-example-composing-dgx-cx5-qsfp">Example: Composing DGX-CX5-QSFP</h3>
<details open>
<summary><strong>DGX composed of CX5 which has QSFP as a device</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#blueprints-__codelineno-3-1"></a><span class="n">qsfp</span> <span class="o">=</span> <span class="n">QSFP</span><span class="p">(</span><span class="s2">&quot;qsfp28_100g&quot;</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#blueprints-__codelineno-3-2"></a><span class="n">cx5</span> <span class="o">=</span> <span class="n">Cx5</span><span class="p">(</span><span class="n">variant</span><span class="o">=</span><span class="s2">&quot;cx5_100g_single&quot;</span><span class="p">,</span> <span class="n">transceiver</span><span class="o">=</span><span class="n">qsfp</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#blueprints-__codelineno-3-3"></a><span class="n">dgx</span> <span class="o">=</span> <span class="n">NvidiaDGX</span><span class="p">(</span><span class="s2">&quot;dgx_h100&quot;</span><span class="p">,</span> <span class="n">cx5</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#blueprints-__codelineno-3-4"></a><span class="n">infrastructure</span> <span class="o">=</span> <span class="n">Api</span><span class="p">()</span><span class="o">.</span><span class="n">infrastructure</span><span class="p">()</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#blueprints-__codelineno-3-5"></a><span class="c1"># we need to append added devices</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#blueprints-__codelineno-3-6"></a><span class="n">infrastructure</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dgx</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cx5</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qsfp</span><span class="p">)</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#blueprints-__codelineno-3-7"></a><span class="n">infrastructure</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">dgx</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">dgx</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#blueprints-__codelineno-3-8"></a><span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#blueprints-__codelineno-3-9"></a><span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">infrastructure</span><span class="p">)</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#blueprints-__codelineno-3-10"></a><span class="n">g</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_networkx_graph</span><span class="p">()</span>
</code></pre></div>
</details>

<p>This creates a single <strong>DGX h100</strong> variant composed of a <strong>CX5 100g single port</strong> which is composed of a <strong>QSFP 28 100g</strong>. Generated YAML:</p>
<details closed>
<summary><strong>DGX-CX5-QSFP composed device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#blueprints-__codelineno-4-1"></a><span class="nt">devices</span><span class="p">:</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#blueprints-__codelineno-4-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#blueprints-__codelineno-4-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#blueprints-__codelineno-4-4"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#blueprints-__codelineno-4-5"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AMD EPYC 9654 (Genoa)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#blueprints-__codelineno-4-6"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#blueprints-__codelineno-4-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#blueprints-__codelineno-4-8"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#blueprints-__codelineno-4-9"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA H100 / H200 SXM5</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#blueprints-__codelineno-4-10"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#blueprints-__codelineno-4-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#blueprints-__codelineno-4-12"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#blueprints-__codelineno-4-13"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA NVSwitch</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#blueprints-__codelineno-4-14"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#blueprints-__codelineno-4-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#blueprints-__codelineno-4-16"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#blueprints-__codelineno-4-17"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Broadcom PCIe Gen5 Switch</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#blueprints-__codelineno-4-18"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#blueprints-__codelineno-4-19"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#blueprints-__codelineno-4-20"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#blueprints-__codelineno-4-21"></a><span class="w">    </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#blueprints-__codelineno-4-22"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_slot</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#blueprints-__codelineno-4-23"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCIe Gen5 x16 slots (ConnectX / BlueField)</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#blueprints-__codelineno-4-24"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#blueprints-__codelineno-4-25"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">device</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#blueprints-__codelineno-4-26"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#blueprints-__codelineno-4-27"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mellanox ConnectX-5 100GbE NIC</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#blueprints-__codelineno-4-28"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100gbe</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#blueprints-__codelineno-4-29"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA DGX System</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#blueprints-__codelineno-4-30"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#blueprints-__codelineno-4-31"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#blueprints-__codelineno-4-32"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#blueprints-__codelineno-4-33"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#blueprints-__codelineno-4-34"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#blueprints-__codelineno-4-35"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#blueprints-__codelineno-4-36"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#blueprints-__codelineno-4-37"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#blueprints-__codelineno-4-38"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#blueprints-__codelineno-4-39"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#blueprints-__codelineno-4-40"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0:3]</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#blueprints-__codelineno-4-41"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#blueprints-__codelineno-4-42"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#blueprints-__codelineno-4-43"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#blueprints-__codelineno-4-44"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#blueprints-__codelineno-4-45"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#blueprints-__codelineno-4-46"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4:7]</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#blueprints-__codelineno-4-47"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#blueprints-__codelineno-4-48"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#blueprints-__codelineno-4-49"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#blueprints-__codelineno-4-50"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#blueprints-__codelineno-4-51"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#blueprints-__codelineno-4-52"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#blueprints-__codelineno-4-53"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#blueprints-__codelineno-4-54"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#blueprints-__codelineno-4-55"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#blueprints-__codelineno-4-56"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#blueprints-__codelineno-4-57"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#blueprints-__codelineno-4-58"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[1]</span>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#blueprints-__codelineno-4-59"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#blueprints-__codelineno-4-60"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#blueprints-__codelineno-4-61"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#blueprints-__codelineno-4-62"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0]</span>
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#blueprints-__codelineno-4-63"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#blueprints-__codelineno-4-64"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0]</span>
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#blueprints-__codelineno-4-65"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#blueprints-__codelineno-4-66"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#blueprints-__codelineno-4-67"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-68" name="__codelineno-4-68" href="#blueprints-__codelineno-4-68"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[1]</span>
<a id="__codelineno-4-69" name="__codelineno-4-69" href="#blueprints-__codelineno-4-69"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-70" name="__codelineno-4-70" href="#blueprints-__codelineno-4-70"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[1]</span>
<a id="__codelineno-4-71" name="__codelineno-4-71" href="#blueprints-__codelineno-4-71"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-72" name="__codelineno-4-72" href="#blueprints-__codelineno-4-72"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-73" name="__codelineno-4-73" href="#blueprints-__codelineno-4-73"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-74" name="__codelineno-4-74" href="#blueprints-__codelineno-4-74"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[2]</span>
<a id="__codelineno-4-75" name="__codelineno-4-75" href="#blueprints-__codelineno-4-75"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-76" name="__codelineno-4-76" href="#blueprints-__codelineno-4-76"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[2]</span>
<a id="__codelineno-4-77" name="__codelineno-4-77" href="#blueprints-__codelineno-4-77"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-78" name="__codelineno-4-78" href="#blueprints-__codelineno-4-78"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-79" name="__codelineno-4-79" href="#blueprints-__codelineno-4-79"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-80" name="__codelineno-4-80" href="#blueprints-__codelineno-4-80"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[3]</span>
<a id="__codelineno-4-81" name="__codelineno-4-81" href="#blueprints-__codelineno-4-81"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-82" name="__codelineno-4-82" href="#blueprints-__codelineno-4-82"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[3]</span>
<a id="__codelineno-4-83" name="__codelineno-4-83" href="#blueprints-__codelineno-4-83"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-84" name="__codelineno-4-84" href="#blueprints-__codelineno-4-84"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-85" name="__codelineno-4-85" href="#blueprints-__codelineno-4-85"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-86" name="__codelineno-4-86" href="#blueprints-__codelineno-4-86"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4]</span>
<a id="__codelineno-4-87" name="__codelineno-4-87" href="#blueprints-__codelineno-4-87"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-88" name="__codelineno-4-88" href="#blueprints-__codelineno-4-88"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[4]</span>
<a id="__codelineno-4-89" name="__codelineno-4-89" href="#blueprints-__codelineno-4-89"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-90" name="__codelineno-4-90" href="#blueprints-__codelineno-4-90"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-91" name="__codelineno-4-91" href="#blueprints-__codelineno-4-91"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-92" name="__codelineno-4-92" href="#blueprints-__codelineno-4-92"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[5]</span>
<a id="__codelineno-4-93" name="__codelineno-4-93" href="#blueprints-__codelineno-4-93"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-94" name="__codelineno-4-94" href="#blueprints-__codelineno-4-94"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[5]</span>
<a id="__codelineno-4-95" name="__codelineno-4-95" href="#blueprints-__codelineno-4-95"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-96" name="__codelineno-4-96" href="#blueprints-__codelineno-4-96"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-97" name="__codelineno-4-97" href="#blueprints-__codelineno-4-97"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-98" name="__codelineno-4-98" href="#blueprints-__codelineno-4-98"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[6]</span>
<a id="__codelineno-4-99" name="__codelineno-4-99" href="#blueprints-__codelineno-4-99"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-100" name="__codelineno-4-100" href="#blueprints-__codelineno-4-100"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[6]</span>
<a id="__codelineno-4-101" name="__codelineno-4-101" href="#blueprints-__codelineno-4-101"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-102" name="__codelineno-4-102" href="#blueprints-__codelineno-4-102"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-103" name="__codelineno-4-103" href="#blueprints-__codelineno-4-103"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-104" name="__codelineno-4-104" href="#blueprints-__codelineno-4-104"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[7]</span>
<a id="__codelineno-4-105" name="__codelineno-4-105" href="#blueprints-__codelineno-4-105"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-106" name="__codelineno-4-106" href="#blueprints-__codelineno-4-106"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[7]</span>
<a id="__codelineno-4-107" name="__codelineno-4-107" href="#blueprints-__codelineno-4-107"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-108" name="__codelineno-4-108" href="#blueprints-__codelineno-4-108"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-109" name="__codelineno-4-109" href="#blueprints-__codelineno-4-109"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-110" name="__codelineno-4-110" href="#blueprints-__codelineno-4-110"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-4-111" name="__codelineno-4-111" href="#blueprints-__codelineno-4-111"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-112" name="__codelineno-4-112" href="#blueprints-__codelineno-4-112"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-4-113" name="__codelineno-4-113" href="#blueprints-__codelineno-4-113"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-114" name="__codelineno-4-114" href="#blueprints-__codelineno-4-114"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-115" name="__codelineno-4-115" href="#blueprints-__codelineno-4-115"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-116" name="__codelineno-4-116" href="#blueprints-__codelineno-4-116"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-4-117" name="__codelineno-4-117" href="#blueprints-__codelineno-4-117"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-118" name="__codelineno-4-118" href="#blueprints-__codelineno-4-118"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-4-119" name="__codelineno-4-119" href="#blueprints-__codelineno-4-119"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-120" name="__codelineno-4-120" href="#blueprints-__codelineno-4-120"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-121" name="__codelineno-4-121" href="#blueprints-__codelineno-4-121"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-122" name="__codelineno-4-122" href="#blueprints-__codelineno-4-122"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-4-123" name="__codelineno-4-123" href="#blueprints-__codelineno-4-123"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-124" name="__codelineno-4-124" href="#blueprints-__codelineno-4-124"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0:8]</span>
<a id="__codelineno-4-125" name="__codelineno-4-125" href="#blueprints-__codelineno-4-125"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-126" name="__codelineno-4-126" href="#blueprints-__codelineno-4-126"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-127" name="__codelineno-4-127" href="#blueprints-__codelineno-4-127"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-128" name="__codelineno-4-128" href="#blueprints-__codelineno-4-128"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_endpoint[0]</span>
<a id="__codelineno-4-129" name="__codelineno-4-129" href="#blueprints-__codelineno-4-129"></a><span class="w">      </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100gbe[0:8]</span>
<a id="__codelineno-4-130" name="__codelineno-4-130" href="#blueprints-__codelineno-4-130"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-131" name="__codelineno-4-131" href="#blueprints-__codelineno-4-131"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0:8]</span>
<a id="__codelineno-4-132" name="__codelineno-4-132" href="#blueprints-__codelineno-4-132"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-133" name="__codelineno-4-133" href="#blueprints-__codelineno-4-133"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-134" name="__codelineno-4-134" href="#blueprints-__codelineno-4-134"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-4-135" name="__codelineno-4-135" href="#blueprints-__codelineno-4-135"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infinity_fabric</span>
<a id="__codelineno-4-136" name="__codelineno-4-136" href="#blueprints-__codelineno-4-136"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-4-137" name="__codelineno-4-137" href="#blueprints-__codelineno-4-137"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink_4</span>
<a id="__codelineno-4-138" name="__codelineno-4-138" href="#blueprints-__codelineno-4-138"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu_fabric</span>
<a id="__codelineno-4-139" name="__codelineno-4-139" href="#blueprints-__codelineno-4-139"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express PCIE_GEN5 x16</span>
<a id="__codelineno-4-140" name="__codelineno-4-140" href="#blueprints-__codelineno-4-140"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-4-141" name="__codelineno-4-141" href="#blueprints-__codelineno-4-141"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-4-142" name="__codelineno-4-142" href="#blueprints-__codelineno-4-142"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-4-143" name="__codelineno-4-143" href="#blueprints-__codelineno-4-143"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-4-144" name="__codelineno-4-144" href="#blueprints-__codelineno-4-144"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-145" name="__codelineno-4-145" href="#blueprints-__codelineno-4-145"></a><span class="w">    </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-4-146" name="__codelineno-4-146" href="#blueprints-__codelineno-4-146"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_endpoint</span>
<a id="__codelineno-4-147" name="__codelineno-4-147" href="#blueprints-__codelineno-4-147"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express GEN3 x16 endpoint</span>
<a id="__codelineno-4-148" name="__codelineno-4-148" href="#blueprints-__codelineno-4-148"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_endpoint</span>
<a id="__codelineno-4-149" name="__codelineno-4-149" href="#blueprints-__codelineno-4-149"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-4-150" name="__codelineno-4-150" href="#blueprints-__codelineno-4-150"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-151" name="__codelineno-4-151" href="#blueprints-__codelineno-4-151"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConnectX-5 network processing ASIC</span>
<a id="__codelineno-4-152" name="__codelineno-4-152" href="#blueprints-__codelineno-4-152"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-4-153" name="__codelineno-4-153" href="#blueprints-__codelineno-4-153"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-4-154" name="__codelineno-4-154" href="#blueprints-__codelineno-4-154"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-155" name="__codelineno-4-155" href="#blueprints-__codelineno-4-155"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ethernet port (100GbE)</span>
<a id="__codelineno-4-156" name="__codelineno-4-156" href="#blueprints-__codelineno-4-156"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-4-157" name="__codelineno-4-157" href="#blueprints-__codelineno-4-157"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">device</span>
<a id="__codelineno-4-158" name="__codelineno-4-158" href="#blueprints-__codelineno-4-158"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-159" name="__codelineno-4-159" href="#blueprints-__codelineno-4-159"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QSFP transceiver device</span>
<a id="__codelineno-4-160" name="__codelineno-4-160" href="#blueprints-__codelineno-4-160"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qsfp28</span>
<a id="__codelineno-4-161" name="__codelineno-4-161" href="#blueprints-__codelineno-4-161"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mellanox ConnectX-5 100GbE NIC</span>
<a id="__codelineno-4-162" name="__codelineno-4-162" href="#blueprints-__codelineno-4-162"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-4-163" name="__codelineno-4-163" href="#blueprints-__codelineno-4-163"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-164" name="__codelineno-4-164" href="#blueprints-__codelineno-4-164"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_endpoint</span>
<a id="__codelineno-4-165" name="__codelineno-4-165" href="#blueprints-__codelineno-4-165"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-166" name="__codelineno-4-166" href="#blueprints-__codelineno-4-166"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-4-167" name="__codelineno-4-167" href="#blueprints-__codelineno-4-167"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_internal</span>
<a id="__codelineno-4-168" name="__codelineno-4-168" href="#blueprints-__codelineno-4-168"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-169" name="__codelineno-4-169" href="#blueprints-__codelineno-4-169"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-170" name="__codelineno-4-170" href="#blueprints-__codelineno-4-170"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-4-171" name="__codelineno-4-171" href="#blueprints-__codelineno-4-171"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-172" name="__codelineno-4-172" href="#blueprints-__codelineno-4-172"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-4-173" name="__codelineno-4-173" href="#blueprints-__codelineno-4-173"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">serdes</span>
<a id="__codelineno-4-174" name="__codelineno-4-174" href="#blueprints-__codelineno-4-174"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-4-175" name="__codelineno-4-175" href="#blueprints-__codelineno-4-175"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-176" name="__codelineno-4-176" href="#blueprints-__codelineno-4-176"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-4-177" name="__codelineno-4-177" href="#blueprints-__codelineno-4-177"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-178" name="__codelineno-4-178" href="#blueprints-__codelineno-4-178"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical_port[0]</span>
<a id="__codelineno-4-179" name="__codelineno-4-179" href="#blueprints-__codelineno-4-179"></a><span class="w">      </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qsfp28[0]</span>
<a id="__codelineno-4-180" name="__codelineno-4-180" href="#blueprints-__codelineno-4-180"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical</span>
<a id="__codelineno-4-181" name="__codelineno-4-181" href="#blueprints-__codelineno-4-181"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-182" name="__codelineno-4-182" href="#blueprints-__codelineno-4-182"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-183" name="__codelineno-4-183" href="#blueprints-__codelineno-4-183"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-4-184" name="__codelineno-4-184" href="#blueprints-__codelineno-4-184"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-185" name="__codelineno-4-185" href="#blueprints-__codelineno-4-185"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical_port[0]</span>
<a id="__codelineno-4-186" name="__codelineno-4-186" href="#blueprints-__codelineno-4-186"></a><span class="w">      </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qsfp28[0]</span>
<a id="__codelineno-4-187" name="__codelineno-4-187" href="#blueprints-__codelineno-4-187"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical</span>
<a id="__codelineno-4-188" name="__codelineno-4-188" href="#blueprints-__codelineno-4-188"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-189" name="__codelineno-4-189" href="#blueprints-__codelineno-4-189"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-4-190" name="__codelineno-4-190" href="#blueprints-__codelineno-4-190"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Internal PCIe GEN3 fabric</span>
<a id="__codelineno-4-191" name="__codelineno-4-191" href="#blueprints-__codelineno-4-191"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_internal</span>
<a id="__codelineno-4-192" name="__codelineno-4-192" href="#blueprints-__codelineno-4-192"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">High-speed SerDes lanes</span>
<a id="__codelineno-4-193" name="__codelineno-4-193" href="#blueprints-__codelineno-4-193"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">serdes</span>
<a id="__codelineno-4-194" name="__codelineno-4-194" href="#blueprints-__codelineno-4-194"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Electrical interface to transceiver</span>
<a id="__codelineno-4-195" name="__codelineno-4-195" href="#blueprints-__codelineno-4-195"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical</span>
<a id="__codelineno-4-196" name="__codelineno-4-196" href="#blueprints-__codelineno-4-196"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100gbe</span>
<a id="__codelineno-4-197" name="__codelineno-4-197" href="#blueprints-__codelineno-4-197"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-4-198" name="__codelineno-4-198" href="#blueprints-__codelineno-4-198"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-4-199" name="__codelineno-4-199" href="#blueprints-__codelineno-4-199"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-200" name="__codelineno-4-200" href="#blueprints-__codelineno-4-200"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Electrical host interface (4 lanes)</span>
<a id="__codelineno-4-201" name="__codelineno-4-201" href="#blueprints-__codelineno-4-201"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical_port</span>
<a id="__codelineno-4-202" name="__codelineno-4-202" href="#blueprints-__codelineno-4-202"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-4-203" name="__codelineno-4-203" href="#blueprints-__codelineno-4-203"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-204" name="__codelineno-4-204" href="#blueprints-__codelineno-4-204"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Optical media interface (100Gbps)</span>
<a id="__codelineno-4-205" name="__codelineno-4-205" href="#blueprints-__codelineno-4-205"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optical_port</span>
<a id="__codelineno-4-206" name="__codelineno-4-206" href="#blueprints-__codelineno-4-206"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QSFP28 100Gbps Transceiver</span>
<a id="__codelineno-4-207" name="__codelineno-4-207" href="#blueprints-__codelineno-4-207"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-4-208" name="__codelineno-4-208" href="#blueprints-__codelineno-4-208"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-4-209" name="__codelineno-4-209" href="#blueprints-__codelineno-4-209"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">electrical_port</span>
<a id="__codelineno-4-210" name="__codelineno-4-210" href="#blueprints-__codelineno-4-210"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-4-211" name="__codelineno-4-211" href="#blueprints-__codelineno-4-211"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">optical_port</span>
<a id="__codelineno-4-212" name="__codelineno-4-212" href="#blueprints-__codelineno-4-212"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">internal_binding</span>
<a id="__codelineno-4-213" name="__codelineno-4-213" href="#blueprints-__codelineno-4-213"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-4-214" name="__codelineno-4-214" href="#blueprints-__codelineno-4-214"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-4-215" name="__codelineno-4-215" href="#blueprints-__codelineno-4-215"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Electrical-to-optical signal binding</span>
<a id="__codelineno-4-216" name="__codelineno-4-216" href="#blueprints-__codelineno-4-216"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">internal_binding</span>
<a id="__codelineno-4-217" name="__codelineno-4-217" href="#blueprints-__codelineno-4-217"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qsfp28</span>
<a id="__codelineno-4-218" name="__codelineno-4-218" href="#blueprints-__codelineno-4-218"></a><span class="nt">instances</span><span class="p">:</span>
<a id="__codelineno-4-219" name="__codelineno-4-219" href="#blueprints-__codelineno-4-219"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-4-220" name="__codelineno-4-220" href="#blueprints-__codelineno-4-220"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-4-221" name="__codelineno-4-221" href="#blueprints-__codelineno-4-221"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-4-222" name="__codelineno-4-222" href="#blueprints-__codelineno-4-222"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_cx5_qsfp_composed</span>
</code></pre></div>
</details>

<h3 id="blueprints-example-dgx-with-cx5-as-a-nic">Example: DGX with CX5 as a NIC</h3>
<p>In some scenarios, a user may prefer to model <code>cx5</code> as an <strong>abstracted NIC</strong> within a <code>dgx</code> device rather than as a fully instantiated device.</p>
<p>To add <code>cx5</code> as a <code>NIC</code> component, the user can initialize the <code>dgx</code> device by passing the CX5 variant directly, as shown below:</p>
<details open>
<summary><strong>DGX with CX5 as NIC</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#blueprints-__codelineno-5-1"></a><span class="n">dgx_profile</span> <span class="o">=</span> <span class="s2">&quot;dgx_h100&quot;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#blueprints-__codelineno-5-2"></a><span class="n">cx5_variant</span> <span class="o">=</span> <span class="s2">&quot;cx5_100g_single&quot;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#blueprints-__codelineno-5-3"></a><span class="n">device</span> <span class="o">=</span> <span class="n">NvidiaDGX</span><span class="p">(</span><span class="n">dgx_profile</span><span class="p">,</span> <span class="n">cx5_variant</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#blueprints-__codelineno-5-4"></a><span class="n">infrastructure</span> <span class="o">=</span> <span class="n">Api</span><span class="p">()</span><span class="o">.</span><span class="n">infrastructure</span><span class="p">()</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#blueprints-__codelineno-5-5"></a><span class="n">infrastructure</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#blueprints-__codelineno-5-6"></a><span class="n">infrastructure</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#blueprints-__codelineno-5-7"></a><span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#blueprints-__codelineno-5-8"></a><span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">infrastructure</span><span class="p">)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#blueprints-__codelineno-5-9"></a><span class="n">g</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_networkx_graph</span><span class="p">()</span>
</code></pre></div>
</details>

<p>This creates a <code>cx5</code> as a nic component in <code>dgx</code> device. Generated YAML:</p>
<details closed>
<summary><strong>DGX with CX5 NIC definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#blueprints-__codelineno-6-1"></a><span class="nt">devices</span><span class="p">:</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#blueprints-__codelineno-6-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#blueprints-__codelineno-6-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#blueprints-__codelineno-6-4"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#blueprints-__codelineno-6-5"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AMD EPYC 9654 (Genoa)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#blueprints-__codelineno-6-6"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#blueprints-__codelineno-6-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#blueprints-__codelineno-6-8"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#blueprints-__codelineno-6-9"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA H100 / H200 SXM5</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#blueprints-__codelineno-6-10"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#blueprints-__codelineno-6-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#blueprints-__codelineno-6-12"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#blueprints-__codelineno-6-13"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA NVSwitch</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#blueprints-__codelineno-6-14"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#blueprints-__codelineno-6-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#blueprints-__codelineno-6-16"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#blueprints-__codelineno-6-17"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Broadcom PCIe Gen5 Switch</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#blueprints-__codelineno-6-18"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#blueprints-__codelineno-6-19"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#blueprints-__codelineno-6-20"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#blueprints-__codelineno-6-21"></a><span class="w">    </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#blueprints-__codelineno-6-22"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_slot</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#blueprints-__codelineno-6-23"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCIe Gen5 x16 slots (ConnectX / BlueField)</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#blueprints-__codelineno-6-24"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl</span>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#blueprints-__codelineno-6-25"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#blueprints-__codelineno-6-26"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#blueprints-__codelineno-6-27"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single</span>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#blueprints-__codelineno-6-28"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#blueprints-__codelineno-6-29"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA DGX System</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#blueprints-__codelineno-6-30"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#blueprints-__codelineno-6-31"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#blueprints-__codelineno-6-32"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#blueprints-__codelineno-6-33"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#blueprints-__codelineno-6-34"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#blueprints-__codelineno-6-35"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#blueprints-__codelineno-6-36"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#blueprints-__codelineno-6-37"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#blueprints-__codelineno-6-38"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#blueprints-__codelineno-6-39"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#blueprints-__codelineno-6-40"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0:3]</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#blueprints-__codelineno-6-41"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#blueprints-__codelineno-6-42"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#blueprints-__codelineno-6-43"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#blueprints-__codelineno-6-44"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#blueprints-__codelineno-6-45"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#blueprints-__codelineno-6-46"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4:7]</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#blueprints-__codelineno-6-47"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#blueprints-__codelineno-6-48"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#blueprints-__codelineno-6-49"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#blueprints-__codelineno-6-50"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#blueprints-__codelineno-6-51"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#blueprints-__codelineno-6-52"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#blueprints-__codelineno-6-53"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#blueprints-__codelineno-6-54"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#blueprints-__codelineno-6-55"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#blueprints-__codelineno-6-56"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#blueprints-__codelineno-6-57"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#blueprints-__codelineno-6-58"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[1]</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#blueprints-__codelineno-6-59"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#blueprints-__codelineno-6-60"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#blueprints-__codelineno-6-61"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#blueprints-__codelineno-6-62"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0]</span>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#blueprints-__codelineno-6-63"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#blueprints-__codelineno-6-64"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0]</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#blueprints-__codelineno-6-65"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#blueprints-__codelineno-6-66"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#blueprints-__codelineno-6-67"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#blueprints-__codelineno-6-68"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[1]</span>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#blueprints-__codelineno-6-69"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#blueprints-__codelineno-6-70"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[1]</span>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#blueprints-__codelineno-6-71"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#blueprints-__codelineno-6-72"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#blueprints-__codelineno-6-73"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#blueprints-__codelineno-6-74"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[2]</span>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#blueprints-__codelineno-6-75"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#blueprints-__codelineno-6-76"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[2]</span>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#blueprints-__codelineno-6-77"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#blueprints-__codelineno-6-78"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#blueprints-__codelineno-6-79"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#blueprints-__codelineno-6-80"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[3]</span>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#blueprints-__codelineno-6-81"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#blueprints-__codelineno-6-82"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[3]</span>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#blueprints-__codelineno-6-83"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#blueprints-__codelineno-6-84"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#blueprints-__codelineno-6-85"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#blueprints-__codelineno-6-86"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4]</span>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#blueprints-__codelineno-6-87"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#blueprints-__codelineno-6-88"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[4]</span>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#blueprints-__codelineno-6-89"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#blueprints-__codelineno-6-90"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#blueprints-__codelineno-6-91"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#blueprints-__codelineno-6-92"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[5]</span>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#blueprints-__codelineno-6-93"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#blueprints-__codelineno-6-94"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[5]</span>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#blueprints-__codelineno-6-95"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#blueprints-__codelineno-6-96"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#blueprints-__codelineno-6-97"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#blueprints-__codelineno-6-98"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[6]</span>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#blueprints-__codelineno-6-99"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#blueprints-__codelineno-6-100"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[6]</span>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#blueprints-__codelineno-6-101"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#blueprints-__codelineno-6-102"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#blueprints-__codelineno-6-103"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#blueprints-__codelineno-6-104"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[7]</span>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#blueprints-__codelineno-6-105"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#blueprints-__codelineno-6-106"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[7]</span>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#blueprints-__codelineno-6-107"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#blueprints-__codelineno-6-108"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#blueprints-__codelineno-6-109"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#blueprints-__codelineno-6-110"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#blueprints-__codelineno-6-111"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#blueprints-__codelineno-6-112"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#blueprints-__codelineno-6-113"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#blueprints-__codelineno-6-114"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#blueprints-__codelineno-6-115"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#blueprints-__codelineno-6-116"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#blueprints-__codelineno-6-117"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-118" name="__codelineno-6-118" href="#blueprints-__codelineno-6-118"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-6-119" name="__codelineno-6-119" href="#blueprints-__codelineno-6-119"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-120" name="__codelineno-6-120" href="#blueprints-__codelineno-6-120"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-121" name="__codelineno-6-121" href="#blueprints-__codelineno-6-121"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-122" name="__codelineno-6-122" href="#blueprints-__codelineno-6-122"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-6-123" name="__codelineno-6-123" href="#blueprints-__codelineno-6-123"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-124" name="__codelineno-6-124" href="#blueprints-__codelineno-6-124"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0:8]</span>
<a id="__codelineno-6-125" name="__codelineno-6-125" href="#blueprints-__codelineno-6-125"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-126" name="__codelineno-6-126" href="#blueprints-__codelineno-6-126"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-6-127" name="__codelineno-6-127" href="#blueprints-__codelineno-6-127"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-128" name="__codelineno-6-128" href="#blueprints-__codelineno-6-128"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0]</span>
<a id="__codelineno-6-129" name="__codelineno-6-129" href="#blueprints-__codelineno-6-129"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-130" name="__codelineno-6-130" href="#blueprints-__codelineno-6-130"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[0]</span>
<a id="__codelineno-6-131" name="__codelineno-6-131" href="#blueprints-__codelineno-6-131"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-132" name="__codelineno-6-132" href="#blueprints-__codelineno-6-132"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-133" name="__codelineno-6-133" href="#blueprints-__codelineno-6-133"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-134" name="__codelineno-6-134" href="#blueprints-__codelineno-6-134"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[1]</span>
<a id="__codelineno-6-135" name="__codelineno-6-135" href="#blueprints-__codelineno-6-135"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-136" name="__codelineno-6-136" href="#blueprints-__codelineno-6-136"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[1]</span>
<a id="__codelineno-6-137" name="__codelineno-6-137" href="#blueprints-__codelineno-6-137"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-138" name="__codelineno-6-138" href="#blueprints-__codelineno-6-138"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-139" name="__codelineno-6-139" href="#blueprints-__codelineno-6-139"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-140" name="__codelineno-6-140" href="#blueprints-__codelineno-6-140"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[2]</span>
<a id="__codelineno-6-141" name="__codelineno-6-141" href="#blueprints-__codelineno-6-141"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-142" name="__codelineno-6-142" href="#blueprints-__codelineno-6-142"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[2]</span>
<a id="__codelineno-6-143" name="__codelineno-6-143" href="#blueprints-__codelineno-6-143"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-144" name="__codelineno-6-144" href="#blueprints-__codelineno-6-144"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-145" name="__codelineno-6-145" href="#blueprints-__codelineno-6-145"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-146" name="__codelineno-6-146" href="#blueprints-__codelineno-6-146"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[3]</span>
<a id="__codelineno-6-147" name="__codelineno-6-147" href="#blueprints-__codelineno-6-147"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-148" name="__codelineno-6-148" href="#blueprints-__codelineno-6-148"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[3]</span>
<a id="__codelineno-6-149" name="__codelineno-6-149" href="#blueprints-__codelineno-6-149"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-150" name="__codelineno-6-150" href="#blueprints-__codelineno-6-150"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-151" name="__codelineno-6-151" href="#blueprints-__codelineno-6-151"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-152" name="__codelineno-6-152" href="#blueprints-__codelineno-6-152"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4]</span>
<a id="__codelineno-6-153" name="__codelineno-6-153" href="#blueprints-__codelineno-6-153"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-154" name="__codelineno-6-154" href="#blueprints-__codelineno-6-154"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[4]</span>
<a id="__codelineno-6-155" name="__codelineno-6-155" href="#blueprints-__codelineno-6-155"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-156" name="__codelineno-6-156" href="#blueprints-__codelineno-6-156"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-157" name="__codelineno-6-157" href="#blueprints-__codelineno-6-157"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-158" name="__codelineno-6-158" href="#blueprints-__codelineno-6-158"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[5]</span>
<a id="__codelineno-6-159" name="__codelineno-6-159" href="#blueprints-__codelineno-6-159"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-160" name="__codelineno-6-160" href="#blueprints-__codelineno-6-160"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[5]</span>
<a id="__codelineno-6-161" name="__codelineno-6-161" href="#blueprints-__codelineno-6-161"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-162" name="__codelineno-6-162" href="#blueprints-__codelineno-6-162"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-163" name="__codelineno-6-163" href="#blueprints-__codelineno-6-163"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-164" name="__codelineno-6-164" href="#blueprints-__codelineno-6-164"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[6]</span>
<a id="__codelineno-6-165" name="__codelineno-6-165" href="#blueprints-__codelineno-6-165"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-166" name="__codelineno-6-166" href="#blueprints-__codelineno-6-166"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[6]</span>
<a id="__codelineno-6-167" name="__codelineno-6-167" href="#blueprints-__codelineno-6-167"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-168" name="__codelineno-6-168" href="#blueprints-__codelineno-6-168"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-169" name="__codelineno-6-169" href="#blueprints-__codelineno-6-169"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-6-170" name="__codelineno-6-170" href="#blueprints-__codelineno-6-170"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[7]</span>
<a id="__codelineno-6-171" name="__codelineno-6-171" href="#blueprints-__codelineno-6-171"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-6-172" name="__codelineno-6-172" href="#blueprints-__codelineno-6-172"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx5_100g_single[7]</span>
<a id="__codelineno-6-173" name="__codelineno-6-173" href="#blueprints-__codelineno-6-173"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-174" name="__codelineno-6-174" href="#blueprints-__codelineno-6-174"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-6-175" name="__codelineno-6-175" href="#blueprints-__codelineno-6-175"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-6-176" name="__codelineno-6-176" href="#blueprints-__codelineno-6-176"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infinity_fabric</span>
<a id="__codelineno-6-177" name="__codelineno-6-177" href="#blueprints-__codelineno-6-177"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-6-178" name="__codelineno-6-178" href="#blueprints-__codelineno-6-178"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink_4</span>
<a id="__codelineno-6-179" name="__codelineno-6-179" href="#blueprints-__codelineno-6-179"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu_fabric</span>
<a id="__codelineno-6-180" name="__codelineno-6-180" href="#blueprints-__codelineno-6-180"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express PCIE_GEN5 x16</span>
<a id="__codelineno-6-181" name="__codelineno-6-181" href="#blueprints-__codelineno-6-181"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-6-182" name="__codelineno-6-182" href="#blueprints-__codelineno-6-182"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-6-183" name="__codelineno-6-183" href="#blueprints-__codelineno-6-183"></a><span class="nt">instances</span><span class="p">:</span>
<a id="__codelineno-6-184" name="__codelineno-6-184" href="#blueprints-__codelineno-6-184"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-6-185" name="__codelineno-6-185" href="#blueprints-__codelineno-6-185"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-6-186" name="__codelineno-6-186" href="#blueprints-__codelineno-6-186"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
<a id="__codelineno-6-187" name="__codelineno-6-187" href="#blueprints-__codelineno-6-187"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_cx5_nic</span>
</code></pre></div>
</details>

<hr />
<h2 id="blueprints-fabric-blueprints">Fabric Blueprints</h2>
<p>Fabric blueprints allow users to define network fabric topologies by combining multiple devices and specifying their interconnections. They provide an intuitive way to model complex infrastructure setups such as datacenter tiers, clusters, or multi-device fabrics.</p>
<p>All fabric blueprints are located in:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#blueprints-__codelineno-7-1"></a>src/infragraph/blueprints/fabrics/
</code></pre></div>
<strong>Please note that fabric builders only work with non-composed devices.</strong></p>
<h3 id="blueprints-creating-a-single-tier-fabric-with-multiple-dgx-hosts">Creating a Single Tier Fabric with Multiple DGX Hosts</h3>
<p>The following example demonstrates how to use the <code>SingleTierFabric</code> class to create a simple fabric connecting two DGX devices via a generic switch:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#blueprints-__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.nvidia.dgx</span><span class="w"> </span><span class="kn">import</span> <span class="n">NvidiaDGX</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#blueprints-__codelineno-8-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.single_tier_fabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">SingleTierFabric</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#blueprints-__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#blueprints-__codelineno-8-4"></a><span class="n">Instantiate</span> <span class="n">a</span> <span class="n">DGX</span> <span class="n">device</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#blueprints-__codelineno-8-5"></a><span class="n">dgx</span> <span class="o">=</span> <span class="n">NvidiaDGX</span><span class="p">()</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#blueprints-__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#blueprints-__codelineno-8-7"></a><span class="c1"># Create a single-tier fabric connecting two DGX devices via a single switch</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#blueprints-__codelineno-8-8"></a><span class="n">fabric</span> <span class="o">=</span> <span class="n">SingleTierFabric</span><span class="p">(</span><span class="n">dgx</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># 2 DGX devices</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#blueprints-__codelineno-8-9"></a><span class="c1"># &#39;fabric&#39; now contains the infrastructure graph with two DGX devices and the connecting switch</span>
</code></pre></div>
<p>The <code>SingleTierFabric</code> blueprint returns an Infragraph object that includes two DGX devices along with a generic switch defined in the device blueprints, connected to form a simple topology.</p>
<hr />
<h3 id="blueprints-creating-a-clos-fat-tree-fabric-with-dgx-hosts">Creating a CLOS Fat Tree Fabric with DGX Hosts</h3>
<p>The following example demonstrates how to use the <code>ClosFatTreeFabric</code> class to create a clos fat tree fabric connecting dgx devices via a generic switch:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#blueprints-__codelineno-9-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.clos_fat_tree_fabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClosFatTreeFabric</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#blueprints-__codelineno-9-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.dgx</span><span class="w"> </span><span class="kn">import</span> <span class="n">NvidiaDGX</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#blueprints-__codelineno-9-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.generic.generic_switch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Switch</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#blueprints-__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#blueprints-__codelineno-9-5"></a><span class="c1"># Instantiate a DGX device</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#blueprints-__codelineno-9-6"></a><span class="n">dgx</span> <span class="o">=</span> <span class="n">NvidiaDGX</span><span class="p">()</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#blueprints-__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#blueprints-__codelineno-9-8"></a><span class="c1"># Instantiate a Switch</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#blueprints-__codelineno-9-9"></a><span class="n">switch</span> <span class="o">=</span> <span class="n">Switch</span><span class="p">(</span><span class="n">port_count</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#blueprints-__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#blueprints-__codelineno-9-11"></a><span class="c1"># Create a clos fat tree fabric with switch radix as 16 and with two levels:</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#blueprints-__codelineno-9-12"></a><span class="n">clos_fat_tree</span> <span class="o">=</span> <span class="n">ClosFatTreeFabric</span><span class="p">(</span><span class="n">switch</span><span class="p">,</span> <span class="n">dgx</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#blueprints-__codelineno-9-13"></a><span class="c1"># &#39;fabric&#39; now contains the infrastructure graph with two tier clos fat tree fabric</span>
</code></pre></div>
<h3 id="blueprints-clos-fat-tree-fabric-overview">CLOS Fat Tree Fabric Overview</h3>
<p>The CLOS Fat Tree fabric builds a scalable network using multiple levels of identical switches connected in a tree pattern. It is defined by FT(k, L), where:
- <strong>k</strong> = number of ports per switch (switch radix)<br />
- <strong>L</strong> = number of levels in the fabric (depth)</p>
<h3 id="blueprints-inputs">Inputs</h3>
<ul>
<li><strong>Switch device:</strong> Defines the switch type and port count (k).  </li>
<li><strong>Host device:</strong> Defines the servers or hosts (e.g., DGX) connected to the fabric edge.  </li>
<li><strong>Levels (L):</strong> Number of switch layers (tiers) in the network.  </li>
<li><strong>Bandwidth array:</strong> Link speeds at each level, e.g., host-to-edge (tier_0), edge-to-aggregation (tier_0 -&gt; tier_1), aggregation-to-spine (tier_1 -&gt; tier_2).</li>
</ul>
<h3 id="blueprints-two-level-fat-tree-network-sizing-computation">Two-Level Fat-Tree: Network Sizing Computation</h3>
<ol>
<li><strong>switch downlink</strong>: k/2 </li>
<li><strong>Number of Hosts:</strong> 
    = (2 * (switch_downlink) ^ Levels)/ (total ports in host)</li>
<li><strong>tier_0 (rack switches):</strong> Number of switches facing hosts.<br />
   = (2 * (switch_downlink) ^ Levels - 1)</li>
<li><strong>tier_1 (spine switches):</strong> Uplink switches connecting tier_0 switches.<br />
   = ((switch_downlink) ^ Levels - 1)</li>
</ol>
<p><strong>Connections:</strong> Hosts → tier_0 (rack) → tier_1 (spines).</p>
<h3 id="blueprints-three-level-fat-tree-topology-network-sizing-computation">Three-Level Fat-Tree Topology: Network Sizing Computation</h3>
<ol>
<li><strong>switch downlink</strong>: k/2 </li>
<li><strong>Number of Hosts:</strong> 
    = (2 * (switch_downlink) ^ Levels)/ (total ports in host)</li>
<li><strong>Tier_0 (rack switches):</strong><br />
   = (2 * (switch_downlink) ^ Levels - 1)</li>
<li><strong>Tier_1 (aggregation switches):</strong> Same number as tier_0:<br />
   = (2 * (switch_downlink) ^ Levels - 1)</li>
<li><strong>Pods:</strong> Derived by dividing tier_0 by the downlinks per switch (k/2), matching pod size:<br />
   = switch downlink = k/2</li>
<li><strong>Spines (core switches):</strong> Number of spines is:<br />
   = ((switch_downlink) ^ Levels - 1)</li>
<li><strong>Spine Sets:</strong> Spine switches grouped to connect to tier_0 switches in pods.<br />
   = ((switch_downlink/2) * (tier_0 to tier_1 bandwidth)/(tier_1 to tier_2 bandwidth))</li>
</ol>
<p><strong>Example FT(32, 2):</strong><br />
- Switch Radix = 32
- Levels = 2
- Host per switch = 2
- Total Hosts = 64 
- tier_0 switches = 32
- tier_1 switches = 16
- Pods = 2
- Spine sets = 16</p>
<p><strong>Connections:</strong> Hosts → tier_0 → tier_1 (spine switches).</p>
<hr /></section><section class="print-page" id="annotate" heading-number="7"><h1 id="annotate-the-annotate_graph-api">The <code>annotate_graph</code> API</h1>
<h2 id="annotate-overview">Overview</h2>
<p>Once the infrastructure or system of systems has been defined by using the <code>set_graph</code> API the base graph can be extended by using the <code>annotate_graph</code> API to add additional data using nodes and edges as endpoints for the data.</p>
<p>The main objective of the <code>annotate_graph</code> API is to separate the infrastructure model from specific use-case models by allowing the graph to be extended with any type of data.  This ensures that <code>InfraGraph</code> does not morph into an attempt to define every nuance present in a system of systems.</p>
<p>Any annotation efforts can always be proposed as model or service enhancements by submitting <a href="https://github.com/Keysight/infragraph/issues">issues</a> or <a href="https://github.com/Keysight/infragraph/pulls">pull requests</a> to the <a href="https://github.com/Keysight/infragraph">InfraGraph repository</a>.</p>
<h3 id="annotate-additional-data">Additional Data</h3>
<p>Some examples of additional data are:
  - AI data such as:
    - ranks
    - communication groups
  - Configuration data such as:
    - network interface card settings
    - device addresses
    - device routing tables</p>
<p>The following code examples demonstrates how to use the <code>query_graph</code> API in conjunction with the <code>annotate_graph</code> API to extend the graph with additional user specific data.</p>
<h2 id="annotate-adding-rank-data">Adding <code>rank</code> data</h2>
<p>In the <a href="#create">Getting Started</a> example, the instances of the <code>Server</code> device were created with the name of <code>host</code> and each instance having a specific number of components with a name of <code>xpu</code>.</p>
<p>The following code demonstrates adding a <code>rank</code> attribute to every <code>host</code> instance that has a component with the name of <code>xpu</code>.</p>
<details open>
<summary><strong>Add a rank to each host xpu</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#annotate-__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#annotate-__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#annotate-__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.closfabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClosFabric</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#annotate-__codelineno-0-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#annotate-__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#annotate-__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#annotate-__codelineno-0-7"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#annotate-__codelineno-0-8"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_rank_annotations</span><span class="p">():</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#annotate-__codelineno-0-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Test adding a rank attribute to every xpu node&quot;&quot;&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#annotate-__codelineno-0-10"></a>    <span class="c1"># create the graph</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#annotate-__codelineno-0-11"></a>    <span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#annotate-__codelineno-0-12"></a>    <span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">ClosFabric</span><span class="p">())</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#annotate-__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#annotate-__codelineno-0-14"></a>    <span class="c1"># query the graph for host npus</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#annotate-__codelineno-0-15"></a>    <span class="n">npu_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#annotate-__codelineno-0-16"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">npu_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;xpu filter&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#annotate-__codelineno-0-17"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ID_FILTER</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#annotate-__codelineno-0-18"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">id_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#annotate-__codelineno-0-19"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">id_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;host\.\d+\.xpu\.\d+&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#annotate-__codelineno-0-20"></a>    <span class="n">npu_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">npu_request</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#annotate-__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#annotate-__codelineno-0-22"></a>    <span class="c1"># annotate the graph</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#annotate-__codelineno-0-23"></a>    <span class="n">annotate_request</span> <span class="o">=</span> <span class="n">AnnotateRequest</span><span class="p">()</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#annotate-__codelineno-0-24"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">match</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">):</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#annotate-__codelineno-0-25"></a>        <span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">match</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#annotate-__codelineno-0-26"></a>    <span class="n">service</span><span class="o">.</span><span class="n">annotate_graph</span><span class="p">(</span><span class="n">annotate_request</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#annotate-__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#annotate-__codelineno-0-28"></a>    <span class="c1"># query the graph for rank attributes</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#annotate-__codelineno-0-29"></a>    <span class="n">rank_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#annotate-__codelineno-0-30"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">rank_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;rank filter&quot;</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#annotate-__codelineno-0-31"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#annotate-__codelineno-0-32"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rank&quot;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#annotate-__codelineno-0-33"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#annotate-__codelineno-0-34"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\d+&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#annotate-__codelineno-0-35"></a>    <span class="n">rank_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">rank_request</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#annotate-__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#annotate-__codelineno-0-37"></a>    <span class="c1"># validation</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#annotate-__codelineno-0-38"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#annotate-__codelineno-0-39"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#annotate-__codelineno-0-40"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#annotate-__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#annotate-__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#annotate-__codelineno-0-43"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#annotate-__codelineno-0-44"></a>    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">])</span>
</code></pre></div>
</details>

<h2 id="annotate-adding-ipaddress-data">Adding <code>ipaddress</code> data</h2>
<p>In the <a href="#create">Getting Started</a> example, the instances of the <code>Server</code> device were created with the name of <code>host</code> and each instance having a <code>mgmt</code> nic component.</p>
<p>The following code demonstrates adding an <code>ipaddress</code> attribute to the <code>host</code> instance <code>mgmt</code> nic.</p>
<details open>
<summary><strong>Add an ipaddress to each host mgmt component</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#annotate-__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#annotate-__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ipaddress</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#annotate-__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#annotate-__codelineno-1-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.closfabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClosFabric</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#annotate-__codelineno-1-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#annotate-__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#annotate-__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#annotate-__codelineno-1-8"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#annotate-__codelineno-1-9"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_ipaddress_annotations</span><span class="p">():</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#annotate-__codelineno-1-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Test adding an ipaddress attribute to every server nic node&quot;&quot;&quot;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#annotate-__codelineno-1-11"></a>    <span class="c1"># create the graph</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#annotate-__codelineno-1-12"></a>    <span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#annotate-__codelineno-1-13"></a>    <span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">ClosFabric</span><span class="p">())</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#annotate-__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#annotate-__codelineno-1-15"></a>    <span class="c1"># query the graph for host nics</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#annotate-__codelineno-1-16"></a>    <span class="n">npu_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#annotate-__codelineno-1-17"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">npu_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mgmt nic filter&quot;</span><span class="p">)</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#annotate-__codelineno-1-18"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#annotate-__codelineno-1-19"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;type&quot;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#annotate-__codelineno-1-20"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">EQ</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#annotate-__codelineno-1-21"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;mgmt-nic&quot;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#annotate-__codelineno-1-22"></a>    <span class="n">nic_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">npu_request</span><span class="p">)</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#annotate-__codelineno-1-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#annotate-__codelineno-1-24"></a>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#annotate-__codelineno-1-25"></a>    <span class="c1"># annotate the graph</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#annotate-__codelineno-1-26"></a>    <span class="n">annotate_request</span> <span class="o">=</span> <span class="n">AnnotateRequest</span><span class="p">()</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#annotate-__codelineno-1-27"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">match</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">):</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#annotate-__codelineno-1-28"></a>        <span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#annotate-__codelineno-1-29"></a>            <span class="n">name</span><span class="o">=</span><span class="n">match</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#annotate-__codelineno-1-30"></a>            <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;ipaddress&quot;</span><span class="p">,</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#annotate-__codelineno-1-31"></a>            <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ipaddress</span><span class="o">.</span><span class="n">ip_address</span><span class="p">(</span><span class="n">idx</span><span class="p">)),</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#annotate-__codelineno-1-32"></a>        <span class="p">)</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#annotate-__codelineno-1-33"></a>    <span class="n">service</span><span class="o">.</span><span class="n">annotate_graph</span><span class="p">(</span><span class="n">annotate_request</span><span class="p">)</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#annotate-__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#annotate-__codelineno-1-35"></a>    <span class="c1"># query the graph for ipaddress attributes</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#annotate-__codelineno-1-36"></a>    <span class="n">ipaddress_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#annotate-__codelineno-1-37"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">ipaddress_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ipaddress filter&quot;</span><span class="p">)</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#annotate-__codelineno-1-38"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#annotate-__codelineno-1-39"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;ipaddress&quot;</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#annotate-__codelineno-1-40"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#annotate-__codelineno-1-41"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.*&quot;</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#annotate-__codelineno-1-42"></a>    <span class="n">ipaddress_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">ipaddress_request</span><span class="p">)</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#annotate-__codelineno-1-43"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">ipaddress_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#annotate-__codelineno-1-44"></a>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#annotate-__codelineno-1-45"></a>    <span class="c1"># validation</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#annotate-__codelineno-1-46"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#annotate-__codelineno-1-47"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#annotate-__codelineno-1-48"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ipaddress_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#annotate-__codelineno-1-49"></a>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#annotate-__codelineno-1-50"></a>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#annotate-__codelineno-1-51"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#annotate-__codelineno-1-52"></a>    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">])</span>
</code></pre></div>
</details></section><section class="print-page" id="examples" heading-number="8"><h1 id="examples-examples">Examples</h1><p>These examples demonstrate <code>describing</code> a variety of devices and infrastructures using text descriptions and diagrams to <code>defining</code> them using a <code>standardized schema</code>.</p>
<h2 id="examples-dgx-a100-server">DGX-A100 Server</h2>
<p>This server diagram acts as an example of how multiple components can be connected to a single component such as multiple gpu components are connected to a single pcie switch.</p>
<p>The graph model is able to capture the asymmetric layout of the device.</p>
<h3 id="examples-description">Description</h3>
<p><img alt="dgxa100" src="../images/dgxa100.png" /></p>
<h3 id="examples-standardized-definition">Standardized Definition</h3>
<details open>
<summary><strong>DGX device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#examples-__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Union</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#examples-__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#examples-__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#examples-__codelineno-0-4"></a><span class="n">DgxProfile</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#examples-__codelineno-0-5"></a>    <span class="s2">&quot;dgx1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#examples-__codelineno-0-6"></a>    <span class="s2">&quot;dgx2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#examples-__codelineno-0-7"></a>    <span class="s2">&quot;dgx_a100&quot;</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#examples-__codelineno-0-8"></a>    <span class="s2">&quot;dgx_h100&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#examples-__codelineno-0-9"></a>    <span class="c1"># &quot;dgx_gh200&quot;,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#examples-__codelineno-0-10"></a>    <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#examples-__codelineno-0-11"></a><span class="p">]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#examples-__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#examples-__codelineno-0-13"></a><span class="n">NicSpec</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Device</span><span class="p">]</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#examples-__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#examples-__codelineno-0-15"></a><span class="n">DGX_PROFILE_CATALOG</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">DgxProfile</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#examples-__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#examples-__codelineno-0-17"></a>    <span class="s2">&quot;dgx1&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#examples-__codelineno-0-18"></a>        <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#examples-__codelineno-0-19"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel Xeon E5-2698 v4 (Broadwell-EP)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#examples-__codelineno-0-20"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;qpi&quot;</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#examples-__codelineno-0-21"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#examples-__codelineno-0-22"></a>        <span class="p">},</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#examples-__codelineno-0-23"></a>        <span class="s2">&quot;xpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#examples-__codelineno-0-24"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA Tesla P100 SXM2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#examples-__codelineno-0-25"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#examples-__codelineno-0-26"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#examples-__codelineno-0-27"></a>            <span class="s2">&quot;nvswitch_count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#examples-__codelineno-0-28"></a>        <span class="p">},</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#examples-__codelineno-0-29"></a>        <span class="s2">&quot;pciesw&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#examples-__codelineno-0-30"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;PLX PEX8796 PCIe Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#examples-__codelineno-0-31"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen3&quot;</span><span class="p">,</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#examples-__codelineno-0-32"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>   <span class="c1"># one per GPU pair</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#examples-__codelineno-0-33"></a>        <span class="p">},</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#examples-__codelineno-0-34"></a>        <span class="s2">&quot;pciesl&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#examples-__codelineno-0-35"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Internal PCIe x16 endpoints (GPU-attached)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#examples-__codelineno-0-36"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen3&quot;</span><span class="p">,</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#examples-__codelineno-0-37"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#examples-__codelineno-0-38"></a>        <span class="p">}</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#examples-__codelineno-0-39"></a>    <span class="p">},</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#examples-__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#examples-__codelineno-0-41"></a>    <span class="s2">&quot;dgx2&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#examples-__codelineno-0-42"></a>        <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#examples-__codelineno-0-43"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel Xeon Platinum 8168 (Skylake-SP)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#examples-__codelineno-0-44"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;upi&quot;</span><span class="p">,</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#examples-__codelineno-0-45"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#examples-__codelineno-0-46"></a>        <span class="p">},</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#examples-__codelineno-0-47"></a>        <span class="s2">&quot;xpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#examples-__codelineno-0-48"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA Tesla V100 SXM2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#examples-__codelineno-0-49"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#examples-__codelineno-0-50"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#examples-__codelineno-0-51"></a>            <span class="s2">&quot;nvswitch_count&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#examples-__codelineno-0-52"></a>        <span class="p">},</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#examples-__codelineno-0-53"></a>        <span class="s2">&quot;pciesw&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#examples-__codelineno-0-54"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Broadcom / PLX PEX8796 PCIe Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#examples-__codelineno-0-55"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen3&quot;</span><span class="p">,</span>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#examples-__codelineno-0-56"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#examples-__codelineno-0-57"></a>        <span class="p">},</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#examples-__codelineno-0-58"></a>        <span class="s2">&quot;pciesl&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#examples-__codelineno-0-59"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Internal PCIe x16 endpoints (GPU + NVSwitch)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#examples-__codelineno-0-60"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen3&quot;</span><span class="p">,</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#examples-__codelineno-0-61"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#examples-__codelineno-0-62"></a>        <span class="p">}</span>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#examples-__codelineno-0-63"></a>    <span class="p">},</span>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#examples-__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#examples-__codelineno-0-65"></a>    <span class="s2">&quot;dgx_a100&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#examples-__codelineno-0-66"></a>        <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#examples-__codelineno-0-67"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;AMD EPYC 7742 (Rome)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#examples-__codelineno-0-68"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;infinity_fabric&quot;</span><span class="p">,</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#examples-__codelineno-0-69"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#examples-__codelineno-0-70"></a>        <span class="p">},</span>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#examples-__codelineno-0-71"></a>        <span class="s2">&quot;xpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#examples-__codelineno-0-72"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA A100 SXM4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#examples-__codelineno-0-73"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_3&quot;</span><span class="p">,</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#examples-__codelineno-0-74"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#examples-__codelineno-0-75"></a>            <span class="s2">&quot;nvswitch_count&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#examples-__codelineno-0-76"></a>        <span class="p">},</span>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#examples-__codelineno-0-77"></a>        <span class="s2">&quot;pciesw&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#examples-__codelineno-0-78"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Broadcom / PLX PCIe Gen4 Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#examples-__codelineno-0-79"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#examples-__codelineno-0-80"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#examples-__codelineno-0-81"></a>        <span class="p">},</span>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#examples-__codelineno-0-82"></a>        <span class="s2">&quot;pciesl&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#examples-__codelineno-0-83"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;PCIe Gen4 x16 slots (NIC / storage)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#examples-__codelineno-0-84"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#examples-__codelineno-0-85"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#examples-__codelineno-0-86"></a>        <span class="p">}</span>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#examples-__codelineno-0-87"></a>    <span class="p">},</span>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#examples-__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#examples-__codelineno-0-89"></a>    <span class="s2">&quot;dgx_h100&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#examples-__codelineno-0-90"></a>        <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#examples-__codelineno-0-91"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;AMD EPYC 9654 (Genoa)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#examples-__codelineno-0-92"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;infinity_fabric&quot;</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93" href="#examples-__codelineno-0-93"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-94" name="__codelineno-0-94" href="#examples-__codelineno-0-94"></a>        <span class="p">},</span>
<a id="__codelineno-0-95" name="__codelineno-0-95" href="#examples-__codelineno-0-95"></a>        <span class="s2">&quot;xpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-96" name="__codelineno-0-96" href="#examples-__codelineno-0-96"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA H100 / H200 SXM5&quot;</span><span class="p">,</span>
<a id="__codelineno-0-97" name="__codelineno-0-97" href="#examples-__codelineno-0-97"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-98" name="__codelineno-0-98" href="#examples-__codelineno-0-98"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-99" name="__codelineno-0-99" href="#examples-__codelineno-0-99"></a>            <span class="s2">&quot;nvswitch_count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-0-100" name="__codelineno-0-100" href="#examples-__codelineno-0-100"></a>        <span class="p">},</span>
<a id="__codelineno-0-101" name="__codelineno-0-101" href="#examples-__codelineno-0-101"></a>        <span class="s2">&quot;pciesw&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-102" name="__codelineno-0-102" href="#examples-__codelineno-0-102"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Broadcom PCIe Gen5 Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103" href="#examples-__codelineno-0-103"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen5&quot;</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104" href="#examples-__codelineno-0-104"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105" href="#examples-__codelineno-0-105"></a>        <span class="p">},</span>
<a id="__codelineno-0-106" name="__codelineno-0-106" href="#examples-__codelineno-0-106"></a>        <span class="s2">&quot;pciesl&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-107" name="__codelineno-0-107" href="#examples-__codelineno-0-107"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;PCIe Gen5 x16 slots (ConnectX / BlueField)&quot;</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108" href="#examples-__codelineno-0-108"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen5&quot;</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109" href="#examples-__codelineno-0-109"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110" href="#examples-__codelineno-0-110"></a>        <span class="p">}</span>
<a id="__codelineno-0-111" name="__codelineno-0-111" href="#examples-__codelineno-0-111"></a>    <span class="p">},</span>
<a id="__codelineno-0-112" name="__codelineno-0-112" href="#examples-__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113" href="#examples-__codelineno-0-113"></a>    <span class="c1"># &quot;dgx_gh200&quot;: {</span>
<a id="__codelineno-0-114" name="__codelineno-0-114" href="#examples-__codelineno-0-114"></a>    <span class="c1">#     &quot;cpu&quot;: {</span>
<a id="__codelineno-0-115" name="__codelineno-0-115" href="#examples-__codelineno-0-115"></a>    <span class="c1">#         &quot;description&quot;: &quot;NVIDIA Grace CPU&quot;,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116" href="#examples-__codelineno-0-116"></a>    <span class="c1">#         &quot;fabric&quot;: &quot;nvlink_c2c&quot;,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117" href="#examples-__codelineno-0-117"></a>    <span class="c1">#         &quot;count&quot;: 2,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118" href="#examples-__codelineno-0-118"></a>    <span class="c1">#     },</span>
<a id="__codelineno-0-119" name="__codelineno-0-119" href="#examples-__codelineno-0-119"></a>    <span class="c1">#     &quot;xpu&quot;: {</span>
<a id="__codelineno-0-120" name="__codelineno-0-120" href="#examples-__codelineno-0-120"></a>    <span class="c1">#         &quot;description&quot;: &quot;NVIDIA Grace Hopper Superchip&quot;,</span>
<a id="__codelineno-0-121" name="__codelineno-0-121" href="#examples-__codelineno-0-121"></a>    <span class="c1">#         &quot;fabric&quot;: &quot;nvlink_c2c&quot;,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122" href="#examples-__codelineno-0-122"></a>    <span class="c1">#         &quot;count&quot;: 4,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123" href="#examples-__codelineno-0-123"></a>    <span class="c1">#         &quot;nvswitch_count&quot;: 0,</span>
<a id="__codelineno-0-124" name="__codelineno-0-124" href="#examples-__codelineno-0-124"></a>    <span class="c1">#     },</span>
<a id="__codelineno-0-125" name="__codelineno-0-125" href="#examples-__codelineno-0-125"></a>    <span class="c1">#     &quot;pciesw&quot;: {</span>
<a id="__codelineno-0-126" name="__codelineno-0-126" href="#examples-__codelineno-0-126"></a>    <span class="c1">#         &quot;description&quot;: &quot;No discrete PCIe switches (NVLink-C2C system)&quot;,</span>
<a id="__codelineno-0-127" name="__codelineno-0-127" href="#examples-__codelineno-0-127"></a>    <span class="c1">#         &quot;fabric&quot;: None,</span>
<a id="__codelineno-0-128" name="__codelineno-0-128" href="#examples-__codelineno-0-128"></a>    <span class="c1">#         &quot;count&quot;: 0,</span>
<a id="__codelineno-0-129" name="__codelineno-0-129" href="#examples-__codelineno-0-129"></a>    <span class="c1">#     },</span>
<a id="__codelineno-0-130" name="__codelineno-0-130" href="#examples-__codelineno-0-130"></a>    <span class="c1">#     &quot;pciesl&quot;: {</span>
<a id="__codelineno-0-131" name="__codelineno-0-131" href="#examples-__codelineno-0-131"></a>    <span class="c1">#         &quot;description&quot;: &quot;External PCIe via Grace IO die&quot;,</span>
<a id="__codelineno-0-132" name="__codelineno-0-132" href="#examples-__codelineno-0-132"></a>    <span class="c1">#         &quot;fabric&quot;: &quot;pcie_gen5&quot;,</span>
<a id="__codelineno-0-133" name="__codelineno-0-133" href="#examples-__codelineno-0-133"></a>    <span class="c1">#         &quot;count&quot;: 4,</span>
<a id="__codelineno-0-134" name="__codelineno-0-134" href="#examples-__codelineno-0-134"></a>    <span class="c1">#     }</span>
<a id="__codelineno-0-135" name="__codelineno-0-135" href="#examples-__codelineno-0-135"></a>    <span class="c1"># },</span>
<a id="__codelineno-0-136" name="__codelineno-0-136" href="#examples-__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137" href="#examples-__codelineno-0-137"></a>    <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-138" name="__codelineno-0-138" href="#examples-__codelineno-0-138"></a>        <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-139" name="__codelineno-0-139" href="#examples-__codelineno-0-139"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA Grace CPU Superchip&quot;</span><span class="p">,</span>
<a id="__codelineno-0-140" name="__codelineno-0-140" href="#examples-__codelineno-0-140"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_c2c&quot;</span><span class="p">,</span>
<a id="__codelineno-0-141" name="__codelineno-0-141" href="#examples-__codelineno-0-141"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-142" name="__codelineno-0-142" href="#examples-__codelineno-0-142"></a>        <span class="p">},</span>
<a id="__codelineno-0-143" name="__codelineno-0-143" href="#examples-__codelineno-0-143"></a>        <span class="s2">&quot;xpu&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-144" name="__codelineno-0-144" href="#examples-__codelineno-0-144"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;NVIDIA Grace Blackwell Superchip&quot;</span><span class="p">,</span>
<a id="__codelineno-0-145" name="__codelineno-0-145" href="#examples-__codelineno-0-145"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;nvlink_c2c&quot;</span><span class="p">,</span>
<a id="__codelineno-0-146" name="__codelineno-0-146" href="#examples-__codelineno-0-146"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-0-147" name="__codelineno-0-147" href="#examples-__codelineno-0-147"></a>            <span class="s2">&quot;nvswitch_count&quot;</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
<a id="__codelineno-0-148" name="__codelineno-0-148" href="#examples-__codelineno-0-148"></a>        <span class="p">},</span>
<a id="__codelineno-0-149" name="__codelineno-0-149" href="#examples-__codelineno-0-149"></a>        <span class="s2">&quot;pciesw&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-150" name="__codelineno-0-150" href="#examples-__codelineno-0-150"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-151" name="__codelineno-0-151" href="#examples-__codelineno-0-151"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen5&quot;</span><span class="p">,</span>
<a id="__codelineno-0-152" name="__codelineno-0-152" href="#examples-__codelineno-0-152"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-153" name="__codelineno-0-153" href="#examples-__codelineno-0-153"></a>        <span class="p">},</span>
<a id="__codelineno-0-154" name="__codelineno-0-154" href="#examples-__codelineno-0-154"></a>        <span class="s2">&quot;pciesl&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-155" name="__codelineno-0-155" href="#examples-__codelineno-0-155"></a>            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;External PCIe Gen5 lanes from Grace&quot;</span><span class="p">,</span>
<a id="__codelineno-0-156" name="__codelineno-0-156" href="#examples-__codelineno-0-156"></a>            <span class="s2">&quot;fabric&quot;</span><span class="p">:</span> <span class="s2">&quot;pcie_gen5&quot;</span><span class="p">,</span>
<a id="__codelineno-0-157" name="__codelineno-0-157" href="#examples-__codelineno-0-157"></a>            <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-0-158" name="__codelineno-0-158" href="#examples-__codelineno-0-158"></a>        <span class="p">}</span>
<a id="__codelineno-0-159" name="__codelineno-0-159" href="#examples-__codelineno-0-159"></a>    <span class="p">},</span>
<a id="__codelineno-0-160" name="__codelineno-0-160" href="#examples-__codelineno-0-160"></a><span class="p">}</span>
<a id="__codelineno-0-161" name="__codelineno-0-161" href="#examples-__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162" href="#examples-__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163" href="#examples-__codelineno-0-163"></a><span class="k">class</span><span class="w"> </span><span class="nc">NvidiaDGX</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-164" name="__codelineno-0-164" href="#examples-__codelineno-0-164"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-165" name="__codelineno-0-165" href="#examples-__codelineno-0-165"></a><span class="sd">    InfraGraph model of an NVIDIA DGX system.</span>
<a id="__codelineno-0-166" name="__codelineno-0-166" href="#examples-__codelineno-0-166"></a>
<a id="__codelineno-0-167" name="__codelineno-0-167" href="#examples-__codelineno-0-167"></a><span class="sd">    This class represents a *profile-locked* DGX platform (DGX-1 through</span>
<a id="__codelineno-0-168" name="__codelineno-0-168" href="#examples-__codelineno-0-168"></a><span class="sd">    DGX GB200) using an authoritative hardware catalog. Each profile defines</span>
<a id="__codelineno-0-169" name="__codelineno-0-169" href="#examples-__codelineno-0-169"></a><span class="sd">    a fixed topology for CPUs, XPUs (GPUs or superchips), NVLink fabric,</span>
<a id="__codelineno-0-170" name="__codelineno-0-170" href="#examples-__codelineno-0-170"></a><span class="sd">    optional NVSwitches, PCIe switches, slots, and network interfacee.</span>
<a id="__codelineno-0-171" name="__codelineno-0-171" href="#examples-__codelineno-0-171"></a>
<a id="__codelineno-0-172" name="__codelineno-0-172" href="#examples-__codelineno-0-172"></a><span class="sd">    The model supports both x86-based DGX systems and Grace / Grace-Hopper /</span>
<a id="__codelineno-0-173" name="__codelineno-0-173" href="#examples-__codelineno-0-173"></a><span class="sd">    Grace-Blackwell architectures, automatically adapting the fabric and</span>
<a id="__codelineno-0-174" name="__codelineno-0-174" href="#examples-__codelineno-0-174"></a><span class="sd">    PCIe topology based on the selected profile.</span>
<a id="__codelineno-0-175" name="__codelineno-0-175" href="#examples-__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176" href="#examples-__codelineno-0-176"></a><span class="sd">    Key features:</span>
<a id="__codelineno-0-177" name="__codelineno-0-177" href="#examples-__codelineno-0-177"></a><span class="sd">    - Profile-locked CPU/XPU/NVSwitch combinations</span>
<a id="__codelineno-0-178" name="__codelineno-0-178" href="#examples-__codelineno-0-178"></a><span class="sd">    - Explicit modeling of NVLink, NVLink-C2C, and PCIe fabrics</span>
<a id="__codelineno-0-179" name="__codelineno-0-179" href="#examples-__codelineno-0-179"></a><span class="sd">    - Optional PCIe topology for x86 DGX systems only</span>
<a id="__codelineno-0-180" name="__codelineno-0-180" href="#examples-__codelineno-0-180"></a><span class="sd">    - Flexible NIC modeling via Union[str, Device]</span>
<a id="__codelineno-0-181" name="__codelineno-0-181" href="#examples-__codelineno-0-181"></a><span class="sd">    - Modular internal construction for easy extension and validation</span>
<a id="__codelineno-0-182" name="__codelineno-0-182" href="#examples-__codelineno-0-182"></a>
<a id="__codelineno-0-183" name="__codelineno-0-183" href="#examples-__codelineno-0-183"></a><span class="sd">    This class is intended for architectural modeling, topology validation,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184" href="#examples-__codelineno-0-184"></a><span class="sd">    and infrastructure visualization rather than runtime configuration.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185" href="#examples-__codelineno-0-185"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-186" name="__codelineno-0-186" href="#examples-__codelineno-0-186"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-187" name="__codelineno-0-187" href="#examples-__codelineno-0-187"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-188" name="__codelineno-0-188" href="#examples-__codelineno-0-188"></a>        <span class="n">profile</span><span class="p">:</span> <span class="n">DgxProfile</span> <span class="o">=</span> <span class="s2">&quot;dgx_h100&quot;</span><span class="p">,</span>
<a id="__codelineno-0-189" name="__codelineno-0-189" href="#examples-__codelineno-0-189"></a>        <span class="n">nic_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NicSpec</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-190" name="__codelineno-0-190" href="#examples-__codelineno-0-190"></a>    <span class="p">):</span>
<a id="__codelineno-0-191" name="__codelineno-0-191" href="#examples-__codelineno-0-191"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192" href="#examples-__codelineno-0-192"></a><span class="sd">        Initialize an NVIDIA DGX system model.</span>
<a id="__codelineno-0-193" name="__codelineno-0-193" href="#examples-__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194" href="#examples-__codelineno-0-194"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195" href="#examples-__codelineno-0-195"></a><span class="sd">            profile (DgxProfile, optional):</span>
<a id="__codelineno-0-196" name="__codelineno-0-196" href="#examples-__codelineno-0-196"></a><span class="sd">                DGX system profile to instantiate. The profile fully determines</span>
<a id="__codelineno-0-197" name="__codelineno-0-197" href="#examples-__codelineno-0-197"></a><span class="sd">                the CPU, XPU, NVLink generation, NVSwitch count, and PCIe</span>
<a id="__codelineno-0-198" name="__codelineno-0-198" href="#examples-__codelineno-0-198"></a><span class="sd">                topology. Defaults to &quot;dgx_h100&quot;.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199" href="#examples-__codelineno-0-199"></a>
<a id="__codelineno-0-200" name="__codelineno-0-200" href="#examples-__codelineno-0-200"></a><span class="sd">            nic_device (Optional[Union[str, Device]], optional):</span>
<a id="__codelineno-0-201" name="__codelineno-0-201" href="#examples-__codelineno-0-201"></a><span class="sd">                Network interface specification for PCIe-attached NICe.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202" href="#examples-__codelineno-0-202"></a>
<a id="__codelineno-0-203" name="__codelineno-0-203" href="#examples-__codelineno-0-203"></a><span class="sd">                Supported values:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204" href="#examples-__codelineno-0-204"></a><span class="sd">                - None:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205" href="#examples-__codelineno-0-205"></a><span class="sd">                    Adds generic NIC components, one per PCIe slot.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206" href="#examples-__codelineno-0-206"></a><span class="sd">                - str:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207" href="#examples-__codelineno-0-207"></a><span class="sd">                    Uses the provided string as a symbolic NIC description</span>
<a id="__codelineno-0-208" name="__codelineno-0-208" href="#examples-__codelineno-0-208"></a><span class="sd">                    (e.g. &quot;ConnectX-7 400Gb&quot;), applied to all NIC component.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209" href="#examples-__codelineno-0-209"></a><span class="sd">                - Device:</span>
<a id="__codelineno-0-210" name="__codelineno-0-210" href="#examples-__codelineno-0-210"></a><span class="sd">                    Attaches a fully composed InfraGraph Device representing</span>
<a id="__codelineno-0-211" name="__codelineno-0-211" href="#examples-__codelineno-0-211"></a><span class="sd">                    a NIC or DPU, connected via its PCIe endpoint.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212" href="#examples-__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213" href="#examples-__codelineno-0-213"></a><span class="sd">                Defaults to None.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214" href="#examples-__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215" href="#examples-__codelineno-0-215"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216" href="#examples-__codelineno-0-216"></a><span class="sd">            ValueError:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217" href="#examples-__codelineno-0-217"></a><span class="sd">                If an unsupported DGX profile is specified.</span>
<a id="__codelineno-0-218" name="__codelineno-0-218" href="#examples-__codelineno-0-218"></a>
<a id="__codelineno-0-219" name="__codelineno-0-219" href="#examples-__codelineno-0-219"></a><span class="sd">            TypeError:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220" href="#examples-__codelineno-0-220"></a><span class="sd">                If nic_device is not None, str, or Device.</span>
<a id="__codelineno-0-221" name="__codelineno-0-221" href="#examples-__codelineno-0-221"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-222" name="__codelineno-0-222" href="#examples-__codelineno-0-222"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-0-223" name="__codelineno-0-223" href="#examples-__codelineno-0-223"></a>
<a id="__codelineno-0-224" name="__codelineno-0-224" href="#examples-__codelineno-0-224"></a>        <span class="k">if</span> <span class="n">profile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DGX_PROFILE_CATALOG</span><span class="p">:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225" href="#examples-__codelineno-0-225"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported DGX profile: </span><span class="si">{</span><span class="n">profile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-226" name="__codelineno-0-226" href="#examples-__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227" href="#examples-__codelineno-0-227"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
<a id="__codelineno-0-228" name="__codelineno-0-228" href="#examples-__codelineno-0-228"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span> <span class="o">=</span> <span class="n">DGX_PROFILE_CATALOG</span><span class="p">[</span><span class="n">profile</span><span class="p">]</span>
<a id="__codelineno-0-229" name="__codelineno-0-229" href="#examples-__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230" href="#examples-__codelineno-0-230"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">profile</span>
<a id="__codelineno-0-231" name="__codelineno-0-231" href="#examples-__codelineno-0-231"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;NVIDIA DGX System&quot;</span>
<a id="__codelineno-0-232" name="__codelineno-0-232" href="#examples-__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233" href="#examples-__codelineno-0-233"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_cpu</span><span class="p">()</span>
<a id="__codelineno-0-234" name="__codelineno-0-234" href="#examples-__codelineno-0-234"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_xpu</span><span class="p">()</span>
<a id="__codelineno-0-235" name="__codelineno-0-235" href="#examples-__codelineno-0-235"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_nvswitch</span><span class="p">()</span>
<a id="__codelineno-0-236" name="__codelineno-0-236" href="#examples-__codelineno-0-236"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_pcie_components</span><span class="p">()</span>
<a id="__codelineno-0-237" name="__codelineno-0-237" href="#examples-__codelineno-0-237"></a>
<a id="__codelineno-0-238" name="__codelineno-0-238" href="#examples-__codelineno-0-238"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_links</span><span class="p">()</span>
<a id="__codelineno-0-239" name="__codelineno-0-239" href="#examples-__codelineno-0-239"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_cpu</span><span class="p">()</span>
<a id="__codelineno-0-240" name="__codelineno-0-240" href="#examples-__codelineno-0-240"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_pcie</span><span class="p">()</span>
<a id="__codelineno-0-241" name="__codelineno-0-241" href="#examples-__codelineno-0-241"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_xpu</span><span class="p">()</span>
<a id="__codelineno-0-242" name="__codelineno-0-242" href="#examples-__codelineno-0-242"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_nics</span><span class="p">(</span><span class="n">nic_device</span><span class="p">)</span>
<a id="__codelineno-0-243" name="__codelineno-0-243" href="#examples-__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244" href="#examples-__codelineno-0-244"></a>    <span class="c1"># Components</span>
<a id="__codelineno-0-245" name="__codelineno-0-245" href="#examples-__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246" href="#examples-__codelineno-0-246"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_cpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-247" name="__codelineno-0-247" href="#examples-__codelineno-0-247"></a>        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;cpu&quot;</span><span class="p">]</span>
<a id="__codelineno-0-248" name="__codelineno-0-248" href="#examples-__codelineno-0-248"></a>        <span class="n">cpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-249" name="__codelineno-0-249" href="#examples-__codelineno-0-249"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-250" name="__codelineno-0-250" href="#examples-__codelineno-0-250"></a>            <span class="n">description</span><span class="o">=</span><span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
<a id="__codelineno-0-251" name="__codelineno-0-251" href="#examples-__codelineno-0-251"></a>            <span class="n">count</span><span class="o">=</span><span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
<a id="__codelineno-0-252" name="__codelineno-0-252" href="#examples-__codelineno-0-252"></a>        <span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253" href="#examples-__codelineno-0-253"></a>        <span class="n">cpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-0-254" name="__codelineno-0-254" href="#examples-__codelineno-0-254"></a>        <span class="k">return</span> <span class="n">cpu</span>
<a id="__codelineno-0-255" name="__codelineno-0-255" href="#examples-__codelineno-0-255"></a>
<a id="__codelineno-0-256" name="__codelineno-0-256" href="#examples-__codelineno-0-256"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_xpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-257" name="__codelineno-0-257" href="#examples-__codelineno-0-257"></a>        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;xpu&quot;</span><span class="p">]</span>
<a id="__codelineno-0-258" name="__codelineno-0-258" href="#examples-__codelineno-0-258"></a>        <span class="n">xpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-259" name="__codelineno-0-259" href="#examples-__codelineno-0-259"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;xpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-260" name="__codelineno-0-260" href="#examples-__codelineno-0-260"></a>            <span class="n">description</span><span class="o">=</span><span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
<a id="__codelineno-0-261" name="__codelineno-0-261" href="#examples-__codelineno-0-261"></a>            <span class="n">count</span><span class="o">=</span><span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
<a id="__codelineno-0-262" name="__codelineno-0-262" href="#examples-__codelineno-0-262"></a>        <span class="p">)</span>
<a id="__codelineno-0-263" name="__codelineno-0-263" href="#examples-__codelineno-0-263"></a>        <span class="n">xpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">XPU</span>
<a id="__codelineno-0-264" name="__codelineno-0-264" href="#examples-__codelineno-0-264"></a>        <span class="k">return</span> <span class="n">xpu</span>
<a id="__codelineno-0-265" name="__codelineno-0-265" href="#examples-__codelineno-0-265"></a>
<a id="__codelineno-0-266" name="__codelineno-0-266" href="#examples-__codelineno-0-266"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_nvswitch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-267" name="__codelineno-0-267" href="#examples-__codelineno-0-267"></a>        <span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;xpu&quot;</span><span class="p">][</span><span class="s2">&quot;nvswitch_count&quot;</span><span class="p">]</span>
<a id="__codelineno-0-268" name="__codelineno-0-268" href="#examples-__codelineno-0-268"></a>        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-269" name="__codelineno-0-269" href="#examples-__codelineno-0-269"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-270" name="__codelineno-0-270" href="#examples-__codelineno-0-270"></a>        <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-271" name="__codelineno-0-271" href="#examples-__codelineno-0-271"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvsw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-272" name="__codelineno-0-272" href="#examples-__codelineno-0-272"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;NVIDIA NVSwitch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-273" name="__codelineno-0-273" href="#examples-__codelineno-0-273"></a>            <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-274" name="__codelineno-0-274" href="#examples-__codelineno-0-274"></a>        <span class="p">)</span>
<a id="__codelineno-0-275" name="__codelineno-0-275" href="#examples-__codelineno-0-275"></a>        <span class="n">sw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-276" name="__codelineno-0-276" href="#examples-__codelineno-0-276"></a>        <span class="k">return</span> <span class="n">sw</span>
<a id="__codelineno-0-277" name="__codelineno-0-277" href="#examples-__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278" href="#examples-__codelineno-0-278"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_pcie_components</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-279" name="__codelineno-0-279" href="#examples-__codelineno-0-279"></a>        <span class="n">pciesw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;pciesw&quot;</span><span class="p">]</span>
<a id="__codelineno-0-280" name="__codelineno-0-280" href="#examples-__codelineno-0-280"></a>        <span class="n">pciesl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;pciesl&quot;</span><span class="p">]</span>
<a id="__codelineno-0-281" name="__codelineno-0-281" href="#examples-__codelineno-0-281"></a>
<a id="__codelineno-0-282" name="__codelineno-0-282" href="#examples-__codelineno-0-282"></a>        <span class="k">if</span> <span class="n">pciesw</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-283" name="__codelineno-0-283" href="#examples-__codelineno-0-283"></a>            <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-284" name="__codelineno-0-284" href="#examples-__codelineno-0-284"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pciesw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-285" name="__codelineno-0-285" href="#examples-__codelineno-0-285"></a>                <span class="n">description</span><span class="o">=</span><span class="n">pciesw</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
<a id="__codelineno-0-286" name="__codelineno-0-286" href="#examples-__codelineno-0-286"></a>                <span class="n">count</span><span class="o">=</span><span class="n">pciesw</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
<a id="__codelineno-0-287" name="__codelineno-0-287" href="#examples-__codelineno-0-287"></a>            <span class="p">)</span>
<a id="__codelineno-0-288" name="__codelineno-0-288" href="#examples-__codelineno-0-288"></a>            <span class="n">sw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-289" name="__codelineno-0-289" href="#examples-__codelineno-0-289"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-290" name="__codelineno-0-290" href="#examples-__codelineno-0-290"></a>            <span class="n">sw</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-291" name="__codelineno-0-291" href="#examples-__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292" href="#examples-__codelineno-0-292"></a>        <span class="k">if</span> <span class="n">pciesl</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-293" name="__codelineno-0-293" href="#examples-__codelineno-0-293"></a>            <span class="n">sl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-294" name="__codelineno-0-294" href="#examples-__codelineno-0-294"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pciesl&quot;</span><span class="p">,</span>
<a id="__codelineno-0-295" name="__codelineno-0-295" href="#examples-__codelineno-0-295"></a>                <span class="n">description</span><span class="o">=</span><span class="n">pciesl</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
<a id="__codelineno-0-296" name="__codelineno-0-296" href="#examples-__codelineno-0-296"></a>                <span class="n">count</span><span class="o">=</span><span class="n">pciesl</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
<a id="__codelineno-0-297" name="__codelineno-0-297" href="#examples-__codelineno-0-297"></a>            <span class="p">)</span>
<a id="__codelineno-0-298" name="__codelineno-0-298" href="#examples-__codelineno-0-298"></a>            <span class="n">sl</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CUSTOM</span>
<a id="__codelineno-0-299" name="__codelineno-0-299" href="#examples-__codelineno-0-299"></a>            <span class="n">sl</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;pcie_slot&quot;</span>
<a id="__codelineno-0-300" name="__codelineno-0-300" href="#examples-__codelineno-0-300"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-301" name="__codelineno-0-301" href="#examples-__codelineno-0-301"></a>            <span class="n">sl</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-302" name="__codelineno-0-302" href="#examples-__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303" href="#examples-__codelineno-0-303"></a>        <span class="k">return</span> <span class="n">sw</span><span class="p">,</span> <span class="n">sl</span>
<a id="__codelineno-0-304" name="__codelineno-0-304" href="#examples-__codelineno-0-304"></a>
<a id="__codelineno-0-305" name="__codelineno-0-305" href="#examples-__codelineno-0-305"></a>    <span class="c1"># Links</span>
<a id="__codelineno-0-306" name="__codelineno-0-306" href="#examples-__codelineno-0-306"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_links</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-307" name="__codelineno-0-307" href="#examples-__codelineno-0-307"></a>        <span class="n">cpu_cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;cpu&quot;</span><span class="p">]</span>
<a id="__codelineno-0-308" name="__codelineno-0-308" href="#examples-__codelineno-0-308"></a>        <span class="n">xpu_cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;xpu&quot;</span><span class="p">]</span>
<a id="__codelineno-0-309" name="__codelineno-0-309" href="#examples-__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310" href="#examples-__codelineno-0-310"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cpu_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-311" name="__codelineno-0-311" href="#examples-__codelineno-0-311"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cpu_fabric&quot;</span><span class="p">,</span>
<a id="__codelineno-0-312" name="__codelineno-0-312" href="#examples-__codelineno-0-312"></a>            <span class="n">description</span><span class="o">=</span><span class="n">cpu_cfg</span><span class="p">[</span><span class="s2">&quot;fabric&quot;</span><span class="p">],</span>
<a id="__codelineno-0-313" name="__codelineno-0-313" href="#examples-__codelineno-0-313"></a>        <span class="p">)</span>
<a id="__codelineno-0-314" name="__codelineno-0-314" href="#examples-__codelineno-0-314"></a>
<a id="__codelineno-0-315" name="__codelineno-0-315" href="#examples-__codelineno-0-315"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-316" name="__codelineno-0-316" href="#examples-__codelineno-0-316"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;xpu_fabric&quot;</span><span class="p">,</span>
<a id="__codelineno-0-317" name="__codelineno-0-317" href="#examples-__codelineno-0-317"></a>            <span class="n">description</span><span class="o">=</span><span class="n">xpu_cfg</span><span class="p">[</span><span class="s2">&quot;fabric&quot;</span><span class="p">],</span>
<a id="__codelineno-0-318" name="__codelineno-0-318" href="#examples-__codelineno-0-318"></a>        <span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319" href="#examples-__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320" href="#examples-__codelineno-0-320"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;pciesw&#39;</span><span class="p">][</span><span class="s1">&#39;fabric&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321" href="#examples-__codelineno-0-321"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-322" name="__codelineno-0-322" href="#examples-__codelineno-0-322"></a>                <span class="s2">&quot;pcie&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;PCI Express </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;pciesw&#39;</span><span class="p">][</span><span class="s1">&#39;fabric&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> x16&quot;</span>
<a id="__codelineno-0-323" name="__codelineno-0-323" href="#examples-__codelineno-0-323"></a>            <span class="p">)</span>
<a id="__codelineno-0-324" name="__codelineno-0-324" href="#examples-__codelineno-0-324"></a>
<a id="__codelineno-0-325" name="__codelineno-0-325" href="#examples-__codelineno-0-325"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">:</span>
<a id="__codelineno-0-326" name="__codelineno-0-326" href="#examples-__codelineno-0-326"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">c2c_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-327" name="__codelineno-0-327" href="#examples-__codelineno-0-327"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;c2c_link&quot;</span><span class="p">,</span>
<a id="__codelineno-0-328" name="__codelineno-0-328" href="#examples-__codelineno-0-328"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-329" name="__codelineno-0-329" href="#examples-__codelineno-0-329"></a>            <span class="p">)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330" href="#examples-__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331" href="#examples-__codelineno-0-331"></a>
<a id="__codelineno-0-332" name="__codelineno-0-332" href="#examples-__codelineno-0-332"></a>    <span class="c1"># Wiring</span>
<a id="__codelineno-0-333" name="__codelineno-0-333" href="#examples-__codelineno-0-333"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wire_cpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-334" name="__codelineno-0-334" href="#examples-__codelineno-0-334"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-335" name="__codelineno-0-335" href="#examples-__codelineno-0-335"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span>
<a id="__codelineno-0-336" name="__codelineno-0-336" href="#examples-__codelineno-0-336"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span>
<a id="__codelineno-0-337" name="__codelineno-0-337" href="#examples-__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338" href="#examples-__codelineno-0-338"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wire_pcie</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-339" name="__codelineno-0-339" href="#examples-__codelineno-0-339"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx1&quot;</span><span class="p">:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340" href="#examples-__codelineno-0-340"></a>            <span class="n">pciesw_to_xpu_mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-341" name="__codelineno-0-341" href="#examples-__codelineno-0-341"></a>                <span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-342" name="__codelineno-0-342" href="#examples-__codelineno-0-342"></a>                <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-0-343" name="__codelineno-0-343" href="#examples-__codelineno-0-343"></a>                <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<a id="__codelineno-0-344" name="__codelineno-0-344" href="#examples-__codelineno-0-344"></a>                <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<a id="__codelineno-0-345" name="__codelineno-0-345" href="#examples-__codelineno-0-345"></a>            <span class="p">}</span>
<a id="__codelineno-0-346" name="__codelineno-0-346" href="#examples-__codelineno-0-346"></a>            <span class="k">for</span> <span class="n">sw</span><span class="p">,</span> <span class="n">gpus</span> <span class="ow">in</span> <span class="n">pciesw_to_xpu_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-347" name="__codelineno-0-347" href="#examples-__codelineno-0-347"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348" href="#examples-__codelineno-0-348"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">sw</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-349" name="__codelineno-0-349" href="#examples-__codelineno-0-349"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;xpu[</span><span class="si">{</span><span class="n">gpus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">gpus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">:2]&quot;</span>
<a id="__codelineno-0-350" name="__codelineno-0-350" href="#examples-__codelineno-0-350"></a>
<a id="__codelineno-0-351" name="__codelineno-0-351" href="#examples-__codelineno-0-351"></a>            <span class="k">for</span> <span class="n">sw</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-352" name="__codelineno-0-352" href="#examples-__codelineno-0-352"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-353" name="__codelineno-0-353" href="#examples-__codelineno-0-353"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">sw</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-354" name="__codelineno-0-354" href="#examples-__codelineno-0-354"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">sw</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355" href="#examples-__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356" href="#examples-__codelineno-0-356"></a>            <span class="k">for</span> <span class="n">cpu_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-357" name="__codelineno-0-357" href="#examples-__codelineno-0-357"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-358" name="__codelineno-0-358" href="#examples-__codelineno-0-358"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cpu_index</span><span class="w"> </span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-359" name="__codelineno-0-359" href="#examples-__codelineno-0-359"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-360" name="__codelineno-0-360" href="#examples-__codelineno-0-360"></a>
<a id="__codelineno-0-361" name="__codelineno-0-361" href="#examples-__codelineno-0-361"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-362" name="__codelineno-0-362" href="#examples-__codelineno-0-362"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="n">cpu_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-363" name="__codelineno-0-363" href="#examples-__codelineno-0-363"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-364" name="__codelineno-0-364" href="#examples-__codelineno-0-364"></a>            <span class="k">return</span>
<a id="__codelineno-0-365" name="__codelineno-0-365" href="#examples-__codelineno-0-365"></a>
<a id="__codelineno-0-366" name="__codelineno-0-366" href="#examples-__codelineno-0-366"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx2&quot;</span><span class="p">:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367" href="#examples-__codelineno-0-367"></a>            <span class="c1"># connect pciesw to v100s</span>
<a id="__codelineno-0-368" name="__codelineno-0-368" href="#examples-__codelineno-0-368"></a>            <span class="k">for</span> <span class="n">pciesw_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
<a id="__codelineno-0-369" name="__codelineno-0-369" href="#examples-__codelineno-0-369"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370" href="#examples-__codelineno-0-370"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-371" name="__codelineno-0-371" href="#examples-__codelineno-0-371"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">pciesw_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-372" name="__codelineno-0-372" href="#examples-__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373" href="#examples-__codelineno-0-373"></a>            <span class="c1"># connect slots to pciesw</span>
<a id="__codelineno-0-374" name="__codelineno-0-374" href="#examples-__codelineno-0-374"></a>            <span class="k">for</span> <span class="n">pciesw_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">):</span>
<a id="__codelineno-0-375" name="__codelineno-0-375" href="#examples-__codelineno-0-375"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-376" name="__codelineno-0-376" href="#examples-__codelineno-0-376"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-377" name="__codelineno-0-377" href="#examples-__codelineno-0-377"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">]&quot;</span>  
<a id="__codelineno-0-378" name="__codelineno-0-378" href="#examples-__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379" href="#examples-__codelineno-0-379"></a>            <span class="c1"># connect root pciesw to cpu</span>
<a id="__codelineno-0-380" name="__codelineno-0-380" href="#examples-__codelineno-0-380"></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-381" name="__codelineno-0-381" href="#examples-__codelineno-0-381"></a>                <span class="p">(</span><span class="s2">&quot;8:10&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-382" name="__codelineno-0-382" href="#examples-__codelineno-0-382"></a>                <span class="p">(</span><span class="s2">&quot;10:12&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<a id="__codelineno-0-383" name="__codelineno-0-383" href="#examples-__codelineno-0-383"></a>            <span class="p">]</span>
<a id="__codelineno-0-384" name="__codelineno-0-384" href="#examples-__codelineno-0-384"></a>
<a id="__codelineno-0-385" name="__codelineno-0-385" href="#examples-__codelineno-0-385"></a>            <span class="k">for</span> <span class="n">sw_range</span><span class="p">,</span> <span class="n">cpu_idx</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
<a id="__codelineno-0-386" name="__codelineno-0-386" href="#examples-__codelineno-0-386"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-387" name="__codelineno-0-387" href="#examples-__codelineno-0-387"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">sw_range</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-388" name="__codelineno-0-388" href="#examples-__codelineno-0-388"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-389" name="__codelineno-0-389" href="#examples-__codelineno-0-389"></a>
<a id="__codelineno-0-390" name="__codelineno-0-390" href="#examples-__codelineno-0-390"></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-391" name="__codelineno-0-391" href="#examples-__codelineno-0-391"></a>                <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;0:2&quot;</span><span class="p">),</span>
<a id="__codelineno-0-392" name="__codelineno-0-392" href="#examples-__codelineno-0-392"></a>                <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;2:4&quot;</span><span class="p">),</span>
<a id="__codelineno-0-393" name="__codelineno-0-393" href="#examples-__codelineno-0-393"></a>                <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;4:6&quot;</span><span class="p">),</span>
<a id="__codelineno-0-394" name="__codelineno-0-394" href="#examples-__codelineno-0-394"></a>                <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;6:8&quot;</span><span class="p">),</span>
<a id="__codelineno-0-395" name="__codelineno-0-395" href="#examples-__codelineno-0-395"></a>            <span class="p">]</span>
<a id="__codelineno-0-396" name="__codelineno-0-396" href="#examples-__codelineno-0-396"></a>
<a id="__codelineno-0-397" name="__codelineno-0-397" href="#examples-__codelineno-0-397"></a>            <span class="k">for</span> <span class="n">root_pcie_sw_idx</span><span class="p">,</span> <span class="n">pcie_idx</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
<a id="__codelineno-0-398" name="__codelineno-0-398" href="#examples-__codelineno-0-398"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-399" name="__codelineno-0-399" href="#examples-__codelineno-0-399"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">root_pcie_sw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-400" name="__codelineno-0-400" href="#examples-__codelineno-0-400"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pcie_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-401" name="__codelineno-0-401" href="#examples-__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402" href="#examples-__codelineno-0-402"></a>            <span class="k">return</span>
<a id="__codelineno-0-403" name="__codelineno-0-403" href="#examples-__codelineno-0-403"></a>
<a id="__codelineno-0-404" name="__codelineno-0-404" href="#examples-__codelineno-0-404"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_a100&quot;</span><span class="p">:</span>
<a id="__codelineno-0-405" name="__codelineno-0-405" href="#examples-__codelineno-0-405"></a>            <span class="c1"># cpu to pciesw</span>
<a id="__codelineno-0-406" name="__codelineno-0-406" href="#examples-__codelineno-0-406"></a>            <span class="k">for</span> <span class="n">cpu_idx</span><span class="p">,</span> <span class="n">sw_idxs</span> <span class="ow">in</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])]:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407" href="#examples-__codelineno-0-407"></a>                <span class="k">for</span> <span class="n">sw</span> <span class="ow">in</span> <span class="n">sw_idxs</span><span class="p">:</span>
<a id="__codelineno-0-408" name="__codelineno-0-408" href="#examples-__codelineno-0-408"></a>                    <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-409" name="__codelineno-0-409" href="#examples-__codelineno-0-409"></a>                    <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-410" name="__codelineno-0-410" href="#examples-__codelineno-0-410"></a>                    <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">sw</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-411" name="__codelineno-0-411" href="#examples-__codelineno-0-411"></a>
<a id="__codelineno-0-412" name="__codelineno-0-412" href="#examples-__codelineno-0-412"></a>            <span class="c1"># pciesw to pciesl and xpu</span>
<a id="__codelineno-0-413" name="__codelineno-0-413" href="#examples-__codelineno-0-413"></a>            <span class="k">for</span> <span class="n">pciesw_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
<a id="__codelineno-0-414" name="__codelineno-0-414" href="#examples-__codelineno-0-414"></a>                <span class="c1"># pciesw to pciesl</span>
<a id="__codelineno-0-415" name="__codelineno-0-415" href="#examples-__codelineno-0-415"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-416" name="__codelineno-0-416" href="#examples-__codelineno-0-416"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-417" name="__codelineno-0-417" href="#examples-__codelineno-0-417"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pciesw_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-418" name="__codelineno-0-418" href="#examples-__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419" href="#examples-__codelineno-0-419"></a>                <span class="c1"># pciesw to xpu</span>
<a id="__codelineno-0-420" name="__codelineno-0-420" href="#examples-__codelineno-0-420"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-421" name="__codelineno-0-421" href="#examples-__codelineno-0-421"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-422" name="__codelineno-0-422" href="#examples-__codelineno-0-422"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pciesw_index</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pciesw_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-423" name="__codelineno-0-423" href="#examples-__codelineno-0-423"></a>
<a id="__codelineno-0-424" name="__codelineno-0-424" href="#examples-__codelineno-0-424"></a>            <span class="c1"># nvsw to pciesw</span>
<a id="__codelineno-0-425" name="__codelineno-0-425" href="#examples-__codelineno-0-425"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-426" name="__codelineno-0-426" href="#examples-__codelineno-0-426"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[4]&quot;</span>
<a id="__codelineno-0-427" name="__codelineno-0-427" href="#examples-__codelineno-0-427"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:6]&quot;</span>   
<a id="__codelineno-0-428" name="__codelineno-0-428" href="#examples-__codelineno-0-428"></a>
<a id="__codelineno-0-429" name="__codelineno-0-429" href="#examples-__codelineno-0-429"></a>            <span class="c1"># pciesw  4 - 3</span>
<a id="__codelineno-0-430" name="__codelineno-0-430" href="#examples-__codelineno-0-430"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-431" name="__codelineno-0-431" href="#examples-__codelineno-0-431"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[4]&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432" href="#examples-__codelineno-0-432"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[3]&quot;</span>
<a id="__codelineno-0-433" name="__codelineno-0-433" href="#examples-__codelineno-0-433"></a>            <span class="k">return</span>
<a id="__codelineno-0-434" name="__codelineno-0-434" href="#examples-__codelineno-0-434"></a>
<a id="__codelineno-0-435" name="__codelineno-0-435" href="#examples-__codelineno-0-435"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_h100&quot;</span><span class="p">:</span>
<a id="__codelineno-0-436" name="__codelineno-0-436" href="#examples-__codelineno-0-436"></a>            <span class="k">for</span> <span class="n">cpu_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-437" name="__codelineno-0-437" href="#examples-__codelineno-0-437"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438" href="#examples-__codelineno-0-438"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-439" name="__codelineno-0-439" href="#examples-__codelineno-0-439"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="o">*</span><span class="mi">4</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">cpu_idx</span><span class="o">*</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-440" name="__codelineno-0-440" href="#examples-__codelineno-0-440"></a>
<a id="__codelineno-0-441" name="__codelineno-0-441" href="#examples-__codelineno-0-441"></a>            <span class="k">for</span> <span class="n">cpu_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-442" name="__codelineno-0-442" href="#examples-__codelineno-0-442"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-443" name="__codelineno-0-443" href="#examples-__codelineno-0-443"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-444" name="__codelineno-0-444" href="#examples-__codelineno-0-444"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445" href="#examples-__codelineno-0-445"></a>
<a id="__codelineno-0-446" name="__codelineno-0-446" href="#examples-__codelineno-0-446"></a>            <span class="k">for</span> <span class="n">pciesl_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-447" name="__codelineno-0-447" href="#examples-__codelineno-0-447"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-448" name="__codelineno-0-448" href="#examples-__codelineno-0-448"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesl_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-449" name="__codelineno-0-449" href="#examples-__codelineno-0-449"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesl_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450" href="#examples-__codelineno-0-450"></a>
<a id="__codelineno-0-451" name="__codelineno-0-451" href="#examples-__codelineno-0-451"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-452" name="__codelineno-0-452" href="#examples-__codelineno-0-452"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:4]&quot;</span>
<a id="__codelineno-0-453" name="__codelineno-0-453" href="#examples-__codelineno-0-453"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[2]&quot;</span>
<a id="__codelineno-0-454" name="__codelineno-0-454" href="#examples-__codelineno-0-454"></a>
<a id="__codelineno-0-455" name="__codelineno-0-455" href="#examples-__codelineno-0-455"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456" href="#examples-__codelineno-0-456"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0]&quot;</span>
<a id="__codelineno-0-457" name="__codelineno-0-457" href="#examples-__codelineno-0-457"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[2]&quot;</span>
<a id="__codelineno-0-458" name="__codelineno-0-458" href="#examples-__codelineno-0-458"></a>            <span class="k">return</span>
<a id="__codelineno-0-459" name="__codelineno-0-459" href="#examples-__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460" href="#examples-__codelineno-0-460"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461" href="#examples-__codelineno-0-461"></a>            <span class="c1"># connect pcie and c2c</span>
<a id="__codelineno-0-462" name="__codelineno-0-462" href="#examples-__codelineno-0-462"></a>            <span class="k">for</span> <span class="n">cpu_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-463" name="__codelineno-0-463" href="#examples-__codelineno-0-463"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-464" name="__codelineno-0-464" href="#examples-__codelineno-0-464"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-465" name="__codelineno-0-465" href="#examples-__codelineno-0-465"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">cpu_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-466" name="__codelineno-0-466" href="#examples-__codelineno-0-466"></a>
<a id="__codelineno-0-467" name="__codelineno-0-467" href="#examples-__codelineno-0-467"></a>            <span class="k">for</span> <span class="n">cpu_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-468" name="__codelineno-0-468" href="#examples-__codelineno-0-468"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c2c_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-469" name="__codelineno-0-469" href="#examples-__codelineno-0-469"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-470" name="__codelineno-0-470" href="#examples-__codelineno-0-470"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">cpu_idx</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="mi">2</span><span class="o">*</span><span class="n">cpu_idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-471" name="__codelineno-0-471" href="#examples-__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472" href="#examples-__codelineno-0-472"></a>            <span class="k">return</span>
<a id="__codelineno-0-473" name="__codelineno-0-473" href="#examples-__codelineno-0-473"></a>
<a id="__codelineno-0-474" name="__codelineno-0-474" href="#examples-__codelineno-0-474"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wire_xpu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-475" name="__codelineno-0-475" href="#examples-__codelineno-0-475"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx1&quot;</span><span class="p">:</span>
<a id="__codelineno-0-476" name="__codelineno-0-476" href="#examples-__codelineno-0-476"></a>            <span class="c1"># clique 0–3</span>
<a id="__codelineno-0-477" name="__codelineno-0-477" href="#examples-__codelineno-0-477"></a>            <span class="n">e1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-478" name="__codelineno-0-478" href="#examples-__codelineno-0-478"></a>            <span class="n">e1</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[0:4]&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479" href="#examples-__codelineno-0-479"></a>            <span class="n">e1</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[0:4]&quot;</span>
<a id="__codelineno-0-480" name="__codelineno-0-480" href="#examples-__codelineno-0-480"></a>
<a id="__codelineno-0-481" name="__codelineno-0-481" href="#examples-__codelineno-0-481"></a>            <span class="c1"># clique 4–7</span>
<a id="__codelineno-0-482" name="__codelineno-0-482" href="#examples-__codelineno-0-482"></a>            <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483" href="#examples-__codelineno-0-483"></a>            <span class="n">e2</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[4:8]&quot;</span>
<a id="__codelineno-0-484" name="__codelineno-0-484" href="#examples-__codelineno-0-484"></a>            <span class="n">e2</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[4:8]&quot;</span>
<a id="__codelineno-0-485" name="__codelineno-0-485" href="#examples-__codelineno-0-485"></a>
<a id="__codelineno-0-486" name="__codelineno-0-486" href="#examples-__codelineno-0-486"></a>            <span class="c1"># cross links</span>
<a id="__codelineno-0-487" name="__codelineno-0-487" href="#examples-__codelineno-0-487"></a>            <span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
<a id="__codelineno-0-488" name="__codelineno-0-488" href="#examples-__codelineno-0-488"></a>            <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">pairs</span><span class="p">:</span>
<a id="__codelineno-0-489" name="__codelineno-0-489" href="#examples-__codelineno-0-489"></a>                <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-490" name="__codelineno-0-490" href="#examples-__codelineno-0-490"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;xpu[</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-491" name="__codelineno-0-491" href="#examples-__codelineno-0-491"></a>                <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;xpu[</span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-492" name="__codelineno-0-492" href="#examples-__codelineno-0-492"></a>            <span class="k">return</span>
<a id="__codelineno-0-493" name="__codelineno-0-493" href="#examples-__codelineno-0-493"></a>
<a id="__codelineno-0-494" name="__codelineno-0-494" href="#examples-__codelineno-0-494"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx2&quot;</span><span class="p">:</span>
<a id="__codelineno-0-495" name="__codelineno-0-495" href="#examples-__codelineno-0-495"></a>            <span class="n">e1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-496" name="__codelineno-0-496" href="#examples-__codelineno-0-496"></a>            <span class="n">e1</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[0:8]&quot;</span>
<a id="__codelineno-0-497" name="__codelineno-0-497" href="#examples-__codelineno-0-497"></a>            <span class="n">e1</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;nvlsw[0:6]&quot;</span>
<a id="__codelineno-0-498" name="__codelineno-0-498" href="#examples-__codelineno-0-498"></a>
<a id="__codelineno-0-499" name="__codelineno-0-499" href="#examples-__codelineno-0-499"></a>            <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-500" name="__codelineno-0-500" href="#examples-__codelineno-0-500"></a>            <span class="n">e2</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;xpu[8:16]&quot;</span>
<a id="__codelineno-0-501" name="__codelineno-0-501" href="#examples-__codelineno-0-501"></a>            <span class="n">e2</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;nvlsw[6:12]&quot;</span>
<a id="__codelineno-0-502" name="__codelineno-0-502" href="#examples-__codelineno-0-502"></a>
<a id="__codelineno-0-503" name="__codelineno-0-503" href="#examples-__codelineno-0-503"></a>            <span class="n">e3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-504" name="__codelineno-0-504" href="#examples-__codelineno-0-504"></a>            <span class="n">e3</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;nvlsw[0:6]&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505" href="#examples-__codelineno-0-505"></a>            <span class="n">e3</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;nvlsw[6:12]&quot;</span>
<a id="__codelineno-0-506" name="__codelineno-0-506" href="#examples-__codelineno-0-506"></a>            <span class="k">return</span>
<a id="__codelineno-0-507" name="__codelineno-0-507" href="#examples-__codelineno-0-507"></a>
<a id="__codelineno-0-508" name="__codelineno-0-508" href="#examples-__codelineno-0-508"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_h100&quot;</span><span class="p">:</span>
<a id="__codelineno-0-509" name="__codelineno-0-509" href="#examples-__codelineno-0-509"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-510" name="__codelineno-0-510" href="#examples-__codelineno-0-510"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:4]&quot;</span>
<a id="__codelineno-0-511" name="__codelineno-0-511" href="#examples-__codelineno-0-511"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:8]&quot;</span>
<a id="__codelineno-0-512" name="__codelineno-0-512" href="#examples-__codelineno-0-512"></a>
<a id="__codelineno-0-513" name="__codelineno-0-513" href="#examples-__codelineno-0-513"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_a100&quot;</span><span class="p">:</span>
<a id="__codelineno-0-514" name="__codelineno-0-514" href="#examples-__codelineno-0-514"></a>            <span class="c1"># xpu to nvlink switch</span>
<a id="__codelineno-0-515" name="__codelineno-0-515" href="#examples-__codelineno-0-515"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-516" name="__codelineno-0-516" href="#examples-__codelineno-0-516"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:8]&quot;</span>
<a id="__codelineno-0-517" name="__codelineno-0-517" href="#examples-__codelineno-0-517"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:6]&quot;</span>
<a id="__codelineno-0-518" name="__codelineno-0-518" href="#examples-__codelineno-0-518"></a>            <span class="k">return</span>
<a id="__codelineno-0-519" name="__codelineno-0-519" href="#examples-__codelineno-0-519"></a>
<a id="__codelineno-0-520" name="__codelineno-0-520" href="#examples-__codelineno-0-520"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">:</span>
<a id="__codelineno-0-521" name="__codelineno-0-521" href="#examples-__codelineno-0-521"></a>            <span class="c1"># xpu to nvlink switch</span>
<a id="__codelineno-0-522" name="__codelineno-0-522" href="#examples-__codelineno-0-522"></a>            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-523" name="__codelineno-0-523" href="#examples-__codelineno-0-523"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">xpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:4]&quot;</span>
<a id="__codelineno-0-524" name="__codelineno-0-524" href="#examples-__codelineno-0-524"></a>            <span class="n">e</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nvsw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:18]&quot;</span>
<a id="__codelineno-0-525" name="__codelineno-0-525" href="#examples-__codelineno-0-525"></a>            <span class="k">return</span>
<a id="__codelineno-0-526" name="__codelineno-0-526" href="#examples-__codelineno-0-526"></a>
<a id="__codelineno-0-527" name="__codelineno-0-527" href="#examples-__codelineno-0-527"></a>    <span class="c1"># NIC handling</span>
<a id="__codelineno-0-528" name="__codelineno-0-528" href="#examples-__codelineno-0-528"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_nics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nic_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NicSpec</span><span class="p">]):</span>
<a id="__codelineno-0-529" name="__codelineno-0-529" href="#examples-__codelineno-0-529"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="p">:</span>
<a id="__codelineno-0-530" name="__codelineno-0-530" href="#examples-__codelineno-0-530"></a>            <span class="k">return</span>
<a id="__codelineno-0-531" name="__codelineno-0-531" href="#examples-__codelineno-0-531"></a>
<a id="__codelineno-0-532" name="__codelineno-0-532" href="#examples-__codelineno-0-532"></a>        <span class="k">if</span> <span class="n">nic_device</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-533" name="__codelineno-0-533" href="#examples-__codelineno-0-533"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_generic_nics</span><span class="p">()</span>
<a id="__codelineno-0-534" name="__codelineno-0-534" href="#examples-__codelineno-0-534"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nic_device</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-535" name="__codelineno-0-535" href="#examples-__codelineno-0-535"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_symbolic_nics</span><span class="p">(</span><span class="n">nic_device</span><span class="p">)</span>
<a id="__codelineno-0-536" name="__codelineno-0-536" href="#examples-__codelineno-0-536"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nic_device</span><span class="p">,</span> <span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-537" name="__codelineno-0-537" href="#examples-__codelineno-0-537"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_add_device_nics</span><span class="p">(</span><span class="n">nic_device</span><span class="p">)</span>
<a id="__codelineno-0-538" name="__codelineno-0-538" href="#examples-__codelineno-0-538"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-539" name="__codelineno-0-539" href="#examples-__codelineno-0-539"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;nic_device must be None, str, or Device&quot;</span><span class="p">)</span>
<a id="__codelineno-0-540" name="__codelineno-0-540" href="#examples-__codelineno-0-540"></a>
<a id="__codelineno-0-541" name="__codelineno-0-541" href="#examples-__codelineno-0-541"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_generic_nics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-542" name="__codelineno-0-542" href="#examples-__codelineno-0-542"></a>        <span class="n">nic_name</span> <span class="o">=</span> <span class="s2">&quot;nic&quot;</span>
<a id="__codelineno-0-543" name="__codelineno-0-543" href="#examples-__codelineno-0-543"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx1&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx2&quot;</span><span class="p">:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544" href="#examples-__codelineno-0-544"></a>            <span class="n">nic_name</span> <span class="o">=</span> <span class="s2">&quot;cx5&quot;</span>
<a id="__codelineno-0-545" name="__codelineno-0-545" href="#examples-__codelineno-0-545"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_a100&quot;</span><span class="p">:</span>
<a id="__codelineno-0-546" name="__codelineno-0-546" href="#examples-__codelineno-0-546"></a>            <span class="n">nic_name</span> <span class="o">=</span> <span class="s2">&quot;cx6&quot;</span>    
<a id="__codelineno-0-547" name="__codelineno-0-547" href="#examples-__codelineno-0-547"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_h100&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">==</span> <span class="s2">&quot;dgx_gb200&quot;</span><span class="p">:</span>
<a id="__codelineno-0-548" name="__codelineno-0-548" href="#examples-__codelineno-0-548"></a>            <span class="n">nic_name</span> <span class="o">=</span> <span class="s2">&quot;cx7&quot;</span>
<a id="__codelineno-0-549" name="__codelineno-0-549" href="#examples-__codelineno-0-549"></a>
<a id="__codelineno-0-550" name="__codelineno-0-550" href="#examples-__codelineno-0-550"></a>        <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-551" name="__codelineno-0-551" href="#examples-__codelineno-0-551"></a>            <span class="n">name</span><span class="o">=</span><span class="n">nic_name</span><span class="p">,</span>
<a id="__codelineno-0-552" name="__codelineno-0-552" href="#examples-__codelineno-0-552"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;NVIDIA ConnectX / BlueField&quot;</span><span class="p">,</span>
<a id="__codelineno-0-553" name="__codelineno-0-553" href="#examples-__codelineno-0-553"></a>            <span class="n">count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-554" name="__codelineno-0-554" href="#examples-__codelineno-0-554"></a>        <span class="p">)</span>
<a id="__codelineno-0-555" name="__codelineno-0-555" href="#examples-__codelineno-0-555"></a>        <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span>
<a id="__codelineno-0-556" name="__codelineno-0-556" href="#examples-__codelineno-0-556"></a>
<a id="__codelineno-0-557" name="__codelineno-0-557" href="#examples-__codelineno-0-557"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_slots_to_nics</span><span class="p">(</span><span class="n">nic_name</span><span class="p">)</span>
<a id="__codelineno-0-558" name="__codelineno-0-558" href="#examples-__codelineno-0-558"></a>
<a id="__codelineno-0-559" name="__codelineno-0-559" href="#examples-__codelineno-0-559"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_symbolic_nics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desc</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-560" name="__codelineno-0-560" href="#examples-__codelineno-0-560"></a>        <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-561" name="__codelineno-0-561" href="#examples-__codelineno-0-561"></a>            <span class="n">name</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
<a id="__codelineno-0-562" name="__codelineno-0-562" href="#examples-__codelineno-0-562"></a>            <span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span>
<a id="__codelineno-0-563" name="__codelineno-0-563" href="#examples-__codelineno-0-563"></a>            <span class="n">count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-564" name="__codelineno-0-564" href="#examples-__codelineno-0-564"></a>        <span class="p">)</span>
<a id="__codelineno-0-565" name="__codelineno-0-565" href="#examples-__codelineno-0-565"></a>        <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span>
<a id="__codelineno-0-566" name="__codelineno-0-566" href="#examples-__codelineno-0-566"></a>
<a id="__codelineno-0-567" name="__codelineno-0-567" href="#examples-__codelineno-0-567"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wire_slots_to_nics</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>
<a id="__codelineno-0-568" name="__codelineno-0-568" href="#examples-__codelineno-0-568"></a>
<a id="__codelineno-0-569" name="__codelineno-0-569" href="#examples-__codelineno-0-569"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_add_device_nics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dev</span><span class="p">:</span> <span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-570" name="__codelineno-0-570" href="#examples-__codelineno-0-570"></a>        <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-571" name="__codelineno-0-571" href="#examples-__codelineno-0-571"></a>            <span class="n">name</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-572" name="__codelineno-0-572" href="#examples-__codelineno-0-572"></a>            <span class="n">description</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
<a id="__codelineno-0-573" name="__codelineno-0-573" href="#examples-__codelineno-0-573"></a>            <span class="n">count</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574" href="#examples-__codelineno-0-574"></a>        <span class="p">)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575" href="#examples-__codelineno-0-575"></a>        <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">DEVICE</span>
<a id="__codelineno-0-576" name="__codelineno-0-576" href="#examples-__codelineno-0-576"></a>
<a id="__codelineno-0-577" name="__codelineno-0-577" href="#examples-__codelineno-0-577"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-578" name="__codelineno-0-578" href="#examples-__codelineno-0-578"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nic</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-579" name="__codelineno-0-579" href="#examples-__codelineno-0-579"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="s2">&quot;pcie_endpoint[0]&quot;</span>
<a id="__codelineno-0-580" name="__codelineno-0-580" href="#examples-__codelineno-0-580"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-581" name="__codelineno-0-581" href="#examples-__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582" href="#examples-__codelineno-0-582"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_wire_slots_to_nics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nic_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-583" name="__codelineno-0-583" href="#examples-__codelineno-0-583"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-584" name="__codelineno-0-584" href="#examples-__codelineno-0-584"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585" href="#examples-__codelineno-0-585"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pciesl</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-586" name="__codelineno-0-586" href="#examples-__codelineno-0-586"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nic_name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-587" name="__codelineno-0-587" href="#examples-__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588" href="#examples-__codelineno-0-588"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-589" name="__codelineno-0-589" href="#examples-__codelineno-0-589"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">NvidiaDGX</span><span class="p">(</span><span class="s2">&quot;dgx1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>DGX device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#examples-__codelineno-1-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#examples-__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#examples-__codelineno-1-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#examples-__codelineno-1-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AMD EPYC 9654 (Genoa)</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#examples-__codelineno-1-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#examples-__codelineno-1-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#examples-__codelineno-1-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#examples-__codelineno-1-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA H100 / H200 SXM5</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#examples-__codelineno-1-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#examples-__codelineno-1-10"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#examples-__codelineno-1-11"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#examples-__codelineno-1-12"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA NVSwitch</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#examples-__codelineno-1-13"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#examples-__codelineno-1-14"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#examples-__codelineno-1-15"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#examples-__codelineno-1-16"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Broadcom PCIe Gen5 Switch</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#examples-__codelineno-1-17"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#examples-__codelineno-1-18"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#examples-__codelineno-1-19"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#examples-__codelineno-1-20"></a><span class="w">  </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#examples-__codelineno-1-21"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie_slot</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#examples-__codelineno-1-22"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCIe Gen5 x16 slots (ConnectX / BlueField)</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#examples-__codelineno-1-23"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#examples-__codelineno-1-24"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#examples-__codelineno-1-25"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#examples-__codelineno-1-26"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA ConnectX / BlueField</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#examples-__codelineno-1-27"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#examples-__codelineno-1-28"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVIDIA DGX System</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#examples-__codelineno-1-29"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#examples-__codelineno-1-30"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#examples-__codelineno-1-31"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#examples-__codelineno-1-32"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#examples-__codelineno-1-33"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#examples-__codelineno-1-34"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#examples-__codelineno-1-35"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#examples-__codelineno-1-36"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#examples-__codelineno-1-37"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#examples-__codelineno-1-38"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#examples-__codelineno-1-39"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0:3]</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#examples-__codelineno-1-40"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#examples-__codelineno-1-41"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#examples-__codelineno-1-42"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#examples-__codelineno-1-43"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#examples-__codelineno-1-44"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#examples-__codelineno-1-45"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4:7]</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#examples-__codelineno-1-46"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#examples-__codelineno-1-47"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#examples-__codelineno-1-48"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#examples-__codelineno-1-49"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#examples-__codelineno-1-50"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#examples-__codelineno-1-51"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#examples-__codelineno-1-52"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#examples-__codelineno-1-53"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#examples-__codelineno-1-54"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#examples-__codelineno-1-55"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[1]</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#examples-__codelineno-1-56"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#examples-__codelineno-1-57"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[1]</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#examples-__codelineno-1-58"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#examples-__codelineno-1-59"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#examples-__codelineno-1-60"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#examples-__codelineno-1-61"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0]</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#examples-__codelineno-1-62"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#examples-__codelineno-1-63"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0]</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#examples-__codelineno-1-64"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#examples-__codelineno-1-65"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#examples-__codelineno-1-66"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#examples-__codelineno-1-67"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[1]</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#examples-__codelineno-1-68"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#examples-__codelineno-1-69"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[1]</span>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#examples-__codelineno-1-70"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#examples-__codelineno-1-71"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-72" name="__codelineno-1-72" href="#examples-__codelineno-1-72"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-73" name="__codelineno-1-73" href="#examples-__codelineno-1-73"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[2]</span>
<a id="__codelineno-1-74" name="__codelineno-1-74" href="#examples-__codelineno-1-74"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-75" name="__codelineno-1-75" href="#examples-__codelineno-1-75"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[2]</span>
<a id="__codelineno-1-76" name="__codelineno-1-76" href="#examples-__codelineno-1-76"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-77" name="__codelineno-1-77" href="#examples-__codelineno-1-77"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-78" name="__codelineno-1-78" href="#examples-__codelineno-1-78"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-79" name="__codelineno-1-79" href="#examples-__codelineno-1-79"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[3]</span>
<a id="__codelineno-1-80" name="__codelineno-1-80" href="#examples-__codelineno-1-80"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-81" name="__codelineno-1-81" href="#examples-__codelineno-1-81"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[3]</span>
<a id="__codelineno-1-82" name="__codelineno-1-82" href="#examples-__codelineno-1-82"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-83" name="__codelineno-1-83" href="#examples-__codelineno-1-83"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-84" name="__codelineno-1-84" href="#examples-__codelineno-1-84"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-85" name="__codelineno-1-85" href="#examples-__codelineno-1-85"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4]</span>
<a id="__codelineno-1-86" name="__codelineno-1-86" href="#examples-__codelineno-1-86"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-87" name="__codelineno-1-87" href="#examples-__codelineno-1-87"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[4]</span>
<a id="__codelineno-1-88" name="__codelineno-1-88" href="#examples-__codelineno-1-88"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-89" name="__codelineno-1-89" href="#examples-__codelineno-1-89"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-90" name="__codelineno-1-90" href="#examples-__codelineno-1-90"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-91" name="__codelineno-1-91" href="#examples-__codelineno-1-91"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[5]</span>
<a id="__codelineno-1-92" name="__codelineno-1-92" href="#examples-__codelineno-1-92"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-93" name="__codelineno-1-93" href="#examples-__codelineno-1-93"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[5]</span>
<a id="__codelineno-1-94" name="__codelineno-1-94" href="#examples-__codelineno-1-94"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-95" name="__codelineno-1-95" href="#examples-__codelineno-1-95"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-96" name="__codelineno-1-96" href="#examples-__codelineno-1-96"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-97" name="__codelineno-1-97" href="#examples-__codelineno-1-97"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[6]</span>
<a id="__codelineno-1-98" name="__codelineno-1-98" href="#examples-__codelineno-1-98"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-99" name="__codelineno-1-99" href="#examples-__codelineno-1-99"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[6]</span>
<a id="__codelineno-1-100" name="__codelineno-1-100" href="#examples-__codelineno-1-100"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-101" name="__codelineno-1-101" href="#examples-__codelineno-1-101"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-102" name="__codelineno-1-102" href="#examples-__codelineno-1-102"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-103" name="__codelineno-1-103" href="#examples-__codelineno-1-103"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[7]</span>
<a id="__codelineno-1-104" name="__codelineno-1-104" href="#examples-__codelineno-1-104"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-105" name="__codelineno-1-105" href="#examples-__codelineno-1-105"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[7]</span>
<a id="__codelineno-1-106" name="__codelineno-1-106" href="#examples-__codelineno-1-106"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-107" name="__codelineno-1-107" href="#examples-__codelineno-1-107"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-108" name="__codelineno-1-108" href="#examples-__codelineno-1-108"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-109" name="__codelineno-1-109" href="#examples-__codelineno-1-109"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-1-110" name="__codelineno-1-110" href="#examples-__codelineno-1-110"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-111" name="__codelineno-1-111" href="#examples-__codelineno-1-111"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-1-112" name="__codelineno-1-112" href="#examples-__codelineno-1-112"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-113" name="__codelineno-1-113" href="#examples-__codelineno-1-113"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-114" name="__codelineno-1-114" href="#examples-__codelineno-1-114"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-115" name="__codelineno-1-115" href="#examples-__codelineno-1-115"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-116" name="__codelineno-1-116" href="#examples-__codelineno-1-116"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-117" name="__codelineno-1-117" href="#examples-__codelineno-1-117"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-1-118" name="__codelineno-1-118" href="#examples-__codelineno-1-118"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-119" name="__codelineno-1-119" href="#examples-__codelineno-1-119"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-120" name="__codelineno-1-120" href="#examples-__codelineno-1-120"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-121" name="__codelineno-1-121" href="#examples-__codelineno-1-121"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvsw[0:4]</span>
<a id="__codelineno-1-122" name="__codelineno-1-122" href="#examples-__codelineno-1-122"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-123" name="__codelineno-1-123" href="#examples-__codelineno-1-123"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu[0:8]</span>
<a id="__codelineno-1-124" name="__codelineno-1-124" href="#examples-__codelineno-1-124"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-125" name="__codelineno-1-125" href="#examples-__codelineno-1-125"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-126" name="__codelineno-1-126" href="#examples-__codelineno-1-126"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-127" name="__codelineno-1-127" href="#examples-__codelineno-1-127"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[0]</span>
<a id="__codelineno-1-128" name="__codelineno-1-128" href="#examples-__codelineno-1-128"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-129" name="__codelineno-1-129" href="#examples-__codelineno-1-129"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[0]</span>
<a id="__codelineno-1-130" name="__codelineno-1-130" href="#examples-__codelineno-1-130"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-131" name="__codelineno-1-131" href="#examples-__codelineno-1-131"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-132" name="__codelineno-1-132" href="#examples-__codelineno-1-132"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-133" name="__codelineno-1-133" href="#examples-__codelineno-1-133"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[1]</span>
<a id="__codelineno-1-134" name="__codelineno-1-134" href="#examples-__codelineno-1-134"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-135" name="__codelineno-1-135" href="#examples-__codelineno-1-135"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[1]</span>
<a id="__codelineno-1-136" name="__codelineno-1-136" href="#examples-__codelineno-1-136"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-137" name="__codelineno-1-137" href="#examples-__codelineno-1-137"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-138" name="__codelineno-1-138" href="#examples-__codelineno-1-138"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-139" name="__codelineno-1-139" href="#examples-__codelineno-1-139"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[2]</span>
<a id="__codelineno-1-140" name="__codelineno-1-140" href="#examples-__codelineno-1-140"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-141" name="__codelineno-1-141" href="#examples-__codelineno-1-141"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[2]</span>
<a id="__codelineno-1-142" name="__codelineno-1-142" href="#examples-__codelineno-1-142"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-143" name="__codelineno-1-143" href="#examples-__codelineno-1-143"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-144" name="__codelineno-1-144" href="#examples-__codelineno-1-144"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-145" name="__codelineno-1-145" href="#examples-__codelineno-1-145"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[3]</span>
<a id="__codelineno-1-146" name="__codelineno-1-146" href="#examples-__codelineno-1-146"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-147" name="__codelineno-1-147" href="#examples-__codelineno-1-147"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[3]</span>
<a id="__codelineno-1-148" name="__codelineno-1-148" href="#examples-__codelineno-1-148"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-149" name="__codelineno-1-149" href="#examples-__codelineno-1-149"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-150" name="__codelineno-1-150" href="#examples-__codelineno-1-150"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-151" name="__codelineno-1-151" href="#examples-__codelineno-1-151"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[4]</span>
<a id="__codelineno-1-152" name="__codelineno-1-152" href="#examples-__codelineno-1-152"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-153" name="__codelineno-1-153" href="#examples-__codelineno-1-153"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[4]</span>
<a id="__codelineno-1-154" name="__codelineno-1-154" href="#examples-__codelineno-1-154"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-155" name="__codelineno-1-155" href="#examples-__codelineno-1-155"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-156" name="__codelineno-1-156" href="#examples-__codelineno-1-156"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-157" name="__codelineno-1-157" href="#examples-__codelineno-1-157"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[5]</span>
<a id="__codelineno-1-158" name="__codelineno-1-158" href="#examples-__codelineno-1-158"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-159" name="__codelineno-1-159" href="#examples-__codelineno-1-159"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[5]</span>
<a id="__codelineno-1-160" name="__codelineno-1-160" href="#examples-__codelineno-1-160"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-161" name="__codelineno-1-161" href="#examples-__codelineno-1-161"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-162" name="__codelineno-1-162" href="#examples-__codelineno-1-162"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-163" name="__codelineno-1-163" href="#examples-__codelineno-1-163"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[6]</span>
<a id="__codelineno-1-164" name="__codelineno-1-164" href="#examples-__codelineno-1-164"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-165" name="__codelineno-1-165" href="#examples-__codelineno-1-165"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[6]</span>
<a id="__codelineno-1-166" name="__codelineno-1-166" href="#examples-__codelineno-1-166"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-167" name="__codelineno-1-167" href="#examples-__codelineno-1-167"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-168" name="__codelineno-1-168" href="#examples-__codelineno-1-168"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-169" name="__codelineno-1-169" href="#examples-__codelineno-1-169"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesl[7]</span>
<a id="__codelineno-1-170" name="__codelineno-1-170" href="#examples-__codelineno-1-170"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-171" name="__codelineno-1-171" href="#examples-__codelineno-1-171"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cx7[7]</span>
<a id="__codelineno-1-172" name="__codelineno-1-172" href="#examples-__codelineno-1-172"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-173" name="__codelineno-1-173" href="#examples-__codelineno-1-173"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-174" name="__codelineno-1-174" href="#examples-__codelineno-1-174"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-1-175" name="__codelineno-1-175" href="#examples-__codelineno-1-175"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infinity_fabric</span>
<a id="__codelineno-1-176" name="__codelineno-1-176" href="#examples-__codelineno-1-176"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu_fabric</span>
<a id="__codelineno-1-177" name="__codelineno-1-177" href="#examples-__codelineno-1-177"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink_4</span>
<a id="__codelineno-1-178" name="__codelineno-1-178" href="#examples-__codelineno-1-178"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xpu_fabric</span>
<a id="__codelineno-1-179" name="__codelineno-1-179" href="#examples-__codelineno-1-179"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express PCIE_GEN5 x16</span>
<a id="__codelineno-1-180" name="__codelineno-1-180" href="#examples-__codelineno-1-180"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-181" name="__codelineno-1-181" href="#examples-__codelineno-1-181"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx_h100</span>
</code></pre></div>
</details>

<h2 id="examples-gh200-mgx">GH200-MGX</h2>
<h3 id="examples-description_1">Description</h3>
<h4 id="examples-xpu-component">XPU Component</h4>
<p><img alt="spine and leaf" src="../images/gh200.png" /></p>
<h4 id="examples-device">Device</h4>
<p><img alt="spine and leaf" src="../images/gh200-mgx.png" /></p>
<h3 id="examples-standardized-definition_1">Standardized Definition</h3>
<details open>
<summary><strong>GH200-MGX device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#examples-__codelineno-2-1"></a><span class="n">TBD</span><span class="o">...</span>
</code></pre></div>
</details>

<h2 id="examples-scaleupscaleout-infrastructure">ScaleUp/ScaleOut Infrastructure</h2>
<h3 id="examples-description_2">Description</h3>
<p><img alt="ai-ml-hpc-datacenter-networks" src="../images/ai-ml-hpc-datacenter-networks.png" />
https://mips.com/blog/reimagining-ai-infrastructure-the-power-of-converged-back-end-networks/</p>
<ul>
<li>1024 hosts<ul>
<li>1 xpu/host</li>
<li>10 nics/host</li>
</ul>
</li>
<li>512 scaleup switches<ul>
<li>16 ports/switch</li>
</ul>
</li>
<li>2 scaleout switches<ul>
<li>1024 ports/switch</li>
</ul>
</li>
<li>64 Racks<ul>
<li>16 hosts/rack</li>
<li>8 scale up switches/rack</li>
</ul>
</li>
</ul>
<p><img alt="ai-ml-hpc-datacenter-networks" src="../images/scaleup-scaleout.png" /></p>
<h3 id="examples-standardized-definition_2">Standardized Definition</h3>
<details open>
<summary><strong>ScaleUp/ScaleOut infrastructure definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#examples-__codelineno-3-1"></a><span class="n">TBD</span><span class="o">...</span>
</code></pre></div>
</details></section></div><style>.print-site-enumerate-headings #index > h1:before { content: '1 ' }

                .print-site-enumerate-headings #index h2:before { content: '1.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-reset: counter-index-3 ;  counter-increment: counter-index-2 }
            
                .print-site-enumerate-headings #index h3:before { content: '1.' counter(counter-index-2) '.' counter(counter-index-3) ' ' }
                .print-site-enumerate-headings #index h3 {  counter-increment: counter-index-3 }
            
.print-site-enumerate-headings #background > h1:before { content: '2 ' }

                .print-site-enumerate-headings #background h2:before { content: '2.' counter(counter-background-2) ' ' }
                .print-site-enumerate-headings #background h2 {  counter-reset: counter-background-3 ;  counter-increment: counter-background-2 }
            
                .print-site-enumerate-headings #background h3:before { content: '2.' counter(counter-background-2) '.' counter(counter-background-3) ' ' }
                .print-site-enumerate-headings #background h3 {  counter-increment: counter-background-3 }
            
.print-site-enumerate-headings #ecosystem > h1:before { content: '3 ' }

                .print-site-enumerate-headings #ecosystem h2:before { content: '3.' counter(counter-ecosystem-2) ' ' }
                .print-site-enumerate-headings #ecosystem h2 {  counter-reset: counter-ecosystem-3 ;  counter-increment: counter-ecosystem-2 }
            
                .print-site-enumerate-headings #ecosystem h3:before { content: '3.' counter(counter-ecosystem-2) '.' counter(counter-ecosystem-3) ' ' }
                .print-site-enumerate-headings #ecosystem h3 {  counter-increment: counter-ecosystem-3 }
            
.print-site-enumerate-headings #schema > h1:before { content: '4 ' }

                .print-site-enumerate-headings #schema h2:before { content: '4.' counter(counter-schema-2) ' ' }
                .print-site-enumerate-headings #schema h2 {  counter-reset: counter-schema-3 ;  counter-increment: counter-schema-2 }
            
                .print-site-enumerate-headings #schema h3:before { content: '4.' counter(counter-schema-2) '.' counter(counter-schema-3) ' ' }
                .print-site-enumerate-headings #schema h3 {  counter-increment: counter-schema-3 }
            
.print-site-enumerate-headings #create > h1:before { content: '5 ' }

                .print-site-enumerate-headings #create h2:before { content: '5.' counter(counter-create-2) ' ' }
                .print-site-enumerate-headings #create h2 {  counter-reset: counter-create-3 ;  counter-increment: counter-create-2 }
            
                .print-site-enumerate-headings #create h3:before { content: '5.' counter(counter-create-2) '.' counter(counter-create-3) ' ' }
                .print-site-enumerate-headings #create h3 {  counter-increment: counter-create-3 }
            
.print-site-enumerate-headings #blueprints > h1:before { content: '6 ' }

                .print-site-enumerate-headings #blueprints h2:before { content: '6.' counter(counter-blueprints-2) ' ' }
                .print-site-enumerate-headings #blueprints h2 {  counter-reset: counter-blueprints-3 ;  counter-increment: counter-blueprints-2 }
            
                .print-site-enumerate-headings #blueprints h3:before { content: '6.' counter(counter-blueprints-2) '.' counter(counter-blueprints-3) ' ' }
                .print-site-enumerate-headings #blueprints h3 {  counter-increment: counter-blueprints-3 }
            
.print-site-enumerate-headings #annotate > h1:before { content: '7 ' }

                .print-site-enumerate-headings #annotate h2:before { content: '7.' counter(counter-annotate-2) ' ' }
                .print-site-enumerate-headings #annotate h2 {  counter-reset: counter-annotate-3 ;  counter-increment: counter-annotate-2 }
            
                .print-site-enumerate-headings #annotate h3:before { content: '7.' counter(counter-annotate-2) '.' counter(counter-annotate-3) ' ' }
                .print-site-enumerate-headings #annotate h3 {  counter-increment: counter-annotate-3 }
            
.print-site-enumerate-headings #examples > h1:before { content: '8 ' }

                .print-site-enumerate-headings #examples h2:before { content: '8.' counter(counter-examples-2) ' ' }
                .print-site-enumerate-headings #examples h2 {  counter-reset: counter-examples-3 ;  counter-increment: counter-examples-2 }
            
                .print-site-enumerate-headings #examples h3:before { content: '8.' counter(counter-examples-2) '.' counter(counter-examples-3) ' ' }
                .print-site-enumerate-headings #examples h3 {  counter-increment: counter-examples-3 }
            
.print-site-enumerate-headings #openapi > h1:before { content: '9 ' }</style>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Keysight/infragraph" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "/", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.tracking", "navigation.top"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>