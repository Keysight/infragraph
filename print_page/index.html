
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../images/infra_logo_favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Print Site - InfraGraph (Infrastructure Graph)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-N6X4KDVDJF"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-N6X4KDVDJF",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-N6X4KDVDJF",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="InfraGraph (Infrastructure Graph)" class="md-header__button md-logo" aria-label="InfraGraph (Infrastructure Graph)" data-md-component="logo">
      
  <img src="../images/infra_logo_favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            InfraGraph (Infrastructure Graph)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Keysight/infragraph" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infragraph
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../background/" class="md-tabs__link">
        
  
  
    
  
  Background

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../schema/" class="md-tabs__link">
        
  
  
    
  
  Schema

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../create/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../annotate/" class="md-tabs__link">
        
  
  
    
  
  Extending The Graph

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../examples/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../openapi.html" class="md-tabs__link">
        
  
  
    
  
  Browse API Spec

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="InfraGraph (Infrastructure Graph)" class="md-nav__button md-logo" aria-label="InfraGraph (Infrastructure Graph)" data-md-component="logo">
      
  <img src="../images/infra_logo_favicon.png" alt="logo">

    </a>
    InfraGraph (Infrastructure Graph)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Keysight/infragraph" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infragraph
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Background
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schema
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending The Graph
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Browse API Spec
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      1 Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      2 Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema" class="md-nav__link">
    <span class="md-ellipsis">
      3 Schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      4 Getting Started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotate" class="md-nav__link">
    <span class="md-ellipsis">
      5 Extending The Graph
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      6 Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openapi" class="md-nav__link">
    <span class="md-ellipsis">
      7 Browse API Spec
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index" heading-number="1"><h1 id="index-index">Overview</h1><p>Modern AI systems, comprising diverse scale-up and scale-out interconnect topologies that integrate complex heterogeneous components, connected together via diverse means, face a lack of standardized overall infrastructure description, all which hinders benchmarking, simulation, and emulation.</p>
<p>This documentation covers the following:</p>
<h3 id="index-background">Background</h3>
<p>The <a href="#background">background</a> details and justification behind the schema.</p>
<h3 id="index-schema">Schema</h3>
<p>An overview of the <a href="#schema">schema</a> and it's repository.</p>
<h3 id="index-getting-started">Getting Started</h3>
<p>A simple generic case study demonstrating how to <a href="#create">get started</a>.</p>
<h3 id="index-extending-the-case-study-with-additional-data">Extending the case study with additional data</h3>
<p>This section provides a comprehensive guide on how a user can annotate various parts of infrastructre and add more details like DeviceType, Rank Identifier and so on.</p>
<p>It covers the model description with examples for binding physical attributes with the logical infrastructure definition.</p>
<h3 id="index-services">Services</h3>
<p>The site provides services for <code>validating</code> concrete instances of schemas.</p>
<h3 id="index-advanced-examples">Advanced Examples</h3>
<p>Advanced <a href="#examples">examples</a> include such things as:</p>
<ul>
<li>complex servers</li>
<li>composable devices</li>
<li>scaleup/scaleout infrastructure.</li>
</ul>
<h3 id="index-specification-browser">Specification Browser</h3>
<p>The API and Models can easily be reviewed using the auto-generated OpenAPI model and redocly html documentation.</p>
<h3 id="index-community">Community</h3>
<p>Use our community resources to get help with <a href="https://github.com/Keysight/infragraph">InfraGraph</a> on Github</p></section><section class="print-page" id="background" heading-number="2"><h1 id="background-background">Background</h1><h2 id="the-challenge-in-system-description">The Challenge in System Description</h2>
<p>Building and managing AI/HPC systems today feels a bit like untangling a giant ball of yarn.</p>
<p>Modern AI systems integrate <code>complex, heterogeneous components like compute, memory, and storage</code>, all connected by diverse scale-up and scale-out interconnect topologies. Think of the <code>intricate networks</code> in a large AI factory – it's a mix of different technologies and topologies."</p>
<p>But, a clear, <code>standardized</code> way to describe this overall infrastructure is missing. This isn't just a technical challenge; it creates real problems for everyone involved. It makes it incredibly difficult to benchmark, to simulate 'what-if' scenarios, or even to manage these systems efficiently. The result? <code>Significant operational overhead</code>, often <code>low hardware utilization</code>, and a <code>lot of frustration</code> for those trying to get these powerful systems to perform."</p>
<p>We believe <code>capturing this diversity, this inherent complexity, in a structured way</code> is the first step to reasoning with it."</p>
<h2 id="background-why-standardize">Why Standardize?</h2>
<p>Why go through all this effort? Because we want to move beyond just 'making it work' to truly 'optimizing it.' Our goal is to transform massive AI clusters from monolithic problems into structured, analyzable systems. When you have a <code>standardized description</code>, you can feed that information directly into your tools – your simulators, your emulators, even your deployment systems.</p>
<p>This means better predictions about how your AI workloads will perform before you even run them. And it opens the door for something really powerful when doing <code>vertical co-design.</code> It's about making sure your hardware and software are talking to each other, working together seamlessly, from the lowest-level chip to the highest-level application. This ensures accurate performance prediction and validates AI workloads pre-deployment.</p>
<p>This isn't just about efficiency; it's about building performant, reliable, and cost-effective AI infrastructure that can keep up with the demands of tomorrow and experimenting with what-if scenarios.  Let's look at a concrete example.</p>
<h2 id="background-from-schema-to-simulationemulation">From Schema to Simulation/Emulation</h2>
<p><img alt="schema" src="../images/schema-to-emulation.png" /></p>
<p>So, here's how we put it all together. The challenge is that these complex AI systems are incredibly difficult to model accurately. Say you have a particular infrastructure benchmark like looking at how collective libraries will perform given different design choices, A vs. B.</p>
<p>Our solution involves combining two key pieces: our <code>InfraGraph schema</code>, which precisely defines the cluster's topology, and the MLCommons Chakra workload traces, which capture the actual behavior of AI applications.</p>
<p>Together, these standardized inputs feed directly into powerful simulators like AstraSim. This isn't just theoretical; it's a working proof point. It allows us to run detailed 'what-if' analyses, explore different design choices of how a cluster is composed together, and truly understand performance trade-offs.</p>
<p>This capability effectively <code>democratizes</code> the evaluation of complex AI systems, putting powerful analysis tools into more hands.</p>
<ul>
<li>infrastructure schema + MLCommons Chakra<ul>
<li>standardized <code>infrastructure schema</code> defines system of systems</li>
<li><code>chakra</code> provides workload traces</li>
</ul>
</li>
<li>topology input for various tools (ASTRA-Sim)</li>
<li>enabled <code>what-if</code> analysis, design choices</li>
<li>democratizes complex system evaluation</li>
<li>an <code>infrastructure schema</code> is a flexible starting point today</li>
</ul></section><section class="print-page" id="schema" heading-number="3"><h1 id="schema-schema">Schema</h1><h2 id="introducing-the-infragraph-infrastructure-graph-schema">Introducing the InfraGraph (INFRAstructure GRAPH) schema</h2>
<p>A graph is a natural fit to describe a system of systems in a clear, intuitive, and mathematically precise manner.</p>
<p><img alt="graph" src="../images/graph.png" /></p>
<ul>
<li>Node or vertex represents an entity like a component, device, user, router, etc</li>
<li>Edge represents a relationship between nodes</li>
<li>Properties store additional information about nodes or edges</li>
</ul>
<h3 id="schema-principles">Principles</h3>
<p><a href="https://github.com/Keysight/infragraph">InfraGraph</a> is a <code>collection of APIs and Models</code> used to describe AI/HPC infrastructure based on the following core principles:</p>
<ul>
<li>infrastructure can be described using graph concepts such as vertexes, edges and properties<ul>
<li>vertexes can be <code>component</code> or device <code>instances</code></li>
<li>an edge contained by a device subgraph is 2 component instances separated by a link<ul>
<li>e.g., <code>npu.0</code>.<code>pcie</code>.<code>nic.0</code></li>
</ul>
</li>
<li>an edge contained by the infrastructure is 2 device connections separated by a link where a device connection is the device <code>instance</code> name and <code>index</code> and external <code>component</code> name and <code>index</code><ul>
<li>e.g., <code>server.0</code>.<code>nic.0</code>.<code>eth</code>.<code>leafsw.0</code>.<code>port.0</code></li>
</ul>
</li>
<li>a path is a collection of infrastructure and device connections between a single source and destination</li>
<li>properties are fields with in the device and component objects</li>
</ul>
</li>
<li>devices are composable using connections</li>
<li>connections dictate the depth of the graph</li>
<li>infrastructure and device connections dictate the shape of the graph</li>
<li>infrastructure needs to be scalable without duplicating content</li>
</ul>
<h2 id="schema-openapiart">OpenapiArt</h2>
<p>This repository makes use of <a href="https://github.com/open-traffic-generator/openapiart">OpenAPIArt</a> to do the following:</p>
<ul>
<li>create declarative intent based Models and APIs</li>
<li>auto-generate the following artifacts:<ul>
<li>openapi schema</li>
<li>protobuf schema</li>
<li><a href="https://">Redocly documentation</a> of APIs and Models</li>
<li><code>Python/Go SDKs</code> that allow for creating <code>fluent</code> client/server code over <code>REST/Protobuf</code> transports</li>
</ul>
</li>
</ul></section><section class="print-page" id="create" heading-number="4"><h1 id="create-case-study-two-tier-clos-fabric">Case Study: Two Tier Clos Fabric</h1>
<p>The main steps in designing a network infrastructure are as follows:</p>
<ul>
<li>Use text and/or diagrams to create an <code>infrastructure description</code></li>
<li>Then <code>use the standardized schema to capture the infrastructure description</code> in a machine readable format by doing the following:<ul>
<li>Add infrastructure <code>device</code> subgraphs using <code>components</code> and <code>links</code> to create <code>edges</code> between components</li>
<li>Add infrastructure <code>instances</code> to define the number of devices in a reusable manner</li>
<li>Add infrastructure <code>links</code> to define additional information that exists between device <code>instances</code> in the infrastructure</li>
<li>Add infrastructure <code>edges</code> between device <code>instances</code></li>
</ul>
</li>
</ul>
<h2 id="create-infrastructure-description">Infrastructure Description</h2>
<p>The following is a diagrammatic and textual description of a <code>generic two tier clos fabric</code> that will be modeled using the standardized schema.</p>
<p><img alt="spine and leaf" src="../images/spine-and-leaf.jpg" /></p>
<p>It consists of the following devices:</p>
<ul>
<li>4 generic <code>servers</code> with each server composed of 4 npus and 4 nics with each nic directly connected to one npu via a pcie link.  Also every npu in a server is connected to every other npu by an nvlink switch. In addition the server includes a management nic that is separate from test nics.</li>
<li>4 <code>leaf switches</code> composed of one asic and 16 ethernet ports</li>
<li>3 <code>spine switches</code> composed of one asic and 16 ethernet ports</li>
</ul>
<p>The above devices will be interconnected in the following manner:</p>
<ul>
<li>each <code>leaf</code> switch is connected directly to 1 <code>server</code> and to all <code>spine</code> switches</li>
<li>every <code>server</code> is connected to a <code>leaf</code> switch at 100 gpbs</li>
<li>every <code>leaf</code> switch is connected to every <code>spine</code> switch at 400 gpbs</li>
</ul>
<h2 id="create-standardized-definitions">Standardized Definitions</h2>
<p>A standardized definition of the preceding two tier clos fabric can be created by following these steps:</p>
<ul>
<li>The device is a subgraph which is composed of two components connected to each other using a link.</li>
<li>It acts as a blueprint allowing for a single definition to be reused multiple times for optimal space complexity.</li>
</ul>
<h4 id="create-create-a-server-device">Create a Server Device</h4>
<p>Define a server device based on the infrastructure description.</p>
<details open>
<summary><strong>Server device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#create-__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#create-__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#create-__codelineno-0-3"></a><span class="c1"># pyright: reportArgumentType=false</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#create-__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#create-__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#create-__codelineno-0-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Server</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#create-__codelineno-0-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">npu_factor</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#create-__codelineno-0-8"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an InfraGraph device to infrastructure based on the following components:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#create-__codelineno-0-9"></a><span class="sd">        - 1 cpu for every 2 npus</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#create-__codelineno-0-10"></a><span class="sd">        - 1 pcie switch for every 1 cpu</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#create-__codelineno-0-11"></a><span class="sd">        - X npus = npu_factor * 2</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#create-__codelineno-0-12"></a><span class="sd">        - 1 nic for every npu with 2 nics connected to a pcie switch</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#create-__codelineno-0-13"></a><span class="sd">        - 1 nvswitch connected to all npus</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#create-__codelineno-0-14"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#create-__codelineno-0-15"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#create-__codelineno-0-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;server&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#create-__codelineno-0-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A generic server with npu_factor * 4 npu(s)&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#create-__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#create-__codelineno-0-19"></a>        <span class="n">cpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#create-__codelineno-0-20"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#create-__codelineno-0-21"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic CPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#create-__codelineno-0-22"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#create-__codelineno-0-23"></a>        <span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#create-__codelineno-0-24"></a>        <span class="n">cpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#create-__codelineno-0-25"></a>        <span class="n">npu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#create-__codelineno-0-26"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;npu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#create-__codelineno-0-27"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic GPU/NPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#create-__codelineno-0-28"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#create-__codelineno-0-29"></a>        <span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#create-__codelineno-0-30"></a>        <span class="n">npu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NPU</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#create-__codelineno-0-31"></a>        <span class="n">nvlsw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#create-__codelineno-0-32"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlsw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#create-__codelineno-0-33"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;NVLink Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#create-__codelineno-0-34"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#create-__codelineno-0-35"></a>        <span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#create-__codelineno-0-36"></a>        <span class="n">nvlsw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#create-__codelineno-0-37"></a>        <span class="n">pciesw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#create-__codelineno-0-38"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pciesw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#create-__codelineno-0-39"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;PCI Express Switch Gen 4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#create-__codelineno-0-40"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span><span class="p">,</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#create-__codelineno-0-41"></a>        <span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#create-__codelineno-0-42"></a>        <span class="n">pciesw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">SWITCH</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#create-__codelineno-0-43"></a>        <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#create-__codelineno-0-44"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#create-__codelineno-0-45"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic Nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#create-__codelineno-0-46"></a>            <span class="n">count</span><span class="o">=</span><span class="n">npu_factor</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#create-__codelineno-0-47"></a>        <span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#create-__codelineno-0-48"></a>        <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#create-__codelineno-0-49"></a>        <span class="n">mgmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#create-__codelineno-0-50"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mgmt&quot;</span><span class="p">,</span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#create-__codelineno-0-51"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Mgmt Nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#create-__codelineno-0-52"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#create-__codelineno-0-53"></a>        <span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#create-__codelineno-0-54"></a>        <span class="n">mgmt</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mgmt-nic&quot;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#create-__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#create-__codelineno-0-56"></a>        <span class="n">cpu_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fabric&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;CPU Fabric&quot;</span><span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#create-__codelineno-0-57"></a>        <span class="n">nvlink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlink&quot;</span><span class="p">)</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#create-__codelineno-0-58"></a>        <span class="n">pcie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;pcie&quot;</span><span class="p">)</span>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#create-__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#create-__codelineno-0-60"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#create-__codelineno-0-61"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">mgmt</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#create-__codelineno-0-62"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[0]&quot;</span>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#create-__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#create-__codelineno-0-64"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">cpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#create-__codelineno-0-65"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#create-__codelineno-0-66"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#create-__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#create-__codelineno-0-68"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">nvlink</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#create-__codelineno-0-69"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">npu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#create-__codelineno-0-70"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">nvlsw</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#create-__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#create-__codelineno-0-72"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#create-__codelineno-0-73"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#create-__codelineno-0-74"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cpu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#create-__codelineno-0-75"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#create-__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#create-__codelineno-0-77"></a>        <span class="n">npu_slices</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">idx</span><span class="o">+</span><span class="mi">2</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">npu</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#create-__codelineno-0-78"></a>        <span class="k">for</span> <span class="n">npu_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npu_slices</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#create-__codelineno-0-79"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#create-__codelineno-0-80"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">npu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">npu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#create-__codelineno-0-81"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#create-__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#create-__codelineno-0-83"></a>        <span class="k">for</span> <span class="n">nic_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npu_slices</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#create-__codelineno-0-84"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#create-__codelineno-0-85"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nic</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">nic_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#create-__codelineno-0-86"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#create-__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#create-__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#create-__codelineno-0-89"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#create-__codelineno-0-90"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="n">npu_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#create-__codelineno-0-91"></a>    <span class="n">device</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#create-__codelineno-0-92"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>Server device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#create-__codelineno-1-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#create-__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#create-__codelineno-1-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#create-__codelineno-1-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic CPU</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#create-__codelineno-1-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#create-__codelineno-1-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#create-__codelineno-1-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#create-__codelineno-1-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic GPU/NPU</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#create-__codelineno-1-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#create-__codelineno-1-10"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#create-__codelineno-1-11"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#create-__codelineno-1-12"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVLink Switch</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#create-__codelineno-1-13"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#create-__codelineno-1-14"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#create-__codelineno-1-15"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#create-__codelineno-1-16"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express Switch Gen 4</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#create-__codelineno-1-17"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#create-__codelineno-1-18"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#create-__codelineno-1-19"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#create-__codelineno-1-20"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic Nic</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#create-__codelineno-1-21"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#create-__codelineno-1-22"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#create-__codelineno-1-23"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#create-__codelineno-1-24"></a><span class="w">  </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#create-__codelineno-1-25"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt-nic</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#create-__codelineno-1-26"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mgmt Nic</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#create-__codelineno-1-27"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#create-__codelineno-1-28"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic server with npu_factor * 4 npu(s)</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#create-__codelineno-1-29"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#create-__codelineno-1-30"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#create-__codelineno-1-31"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#create-__codelineno-1-32"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#create-__codelineno-1-33"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#create-__codelineno-1-34"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#create-__codelineno-1-35"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#create-__codelineno-1-36"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#create-__codelineno-1-37"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#create-__codelineno-1-38"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#create-__codelineno-1-39"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#create-__codelineno-1-40"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#create-__codelineno-1-41"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#create-__codelineno-1-42"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#create-__codelineno-1-43"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#create-__codelineno-1-44"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#create-__codelineno-1-45"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#create-__codelineno-1-46"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#create-__codelineno-1-47"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#create-__codelineno-1-48"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#create-__codelineno-1-49"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#create-__codelineno-1-50"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#create-__codelineno-1-51"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#create-__codelineno-1-52"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#create-__codelineno-1-53"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#create-__codelineno-1-54"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#create-__codelineno-1-55"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[0:2]</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#create-__codelineno-1-56"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#create-__codelineno-1-57"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#create-__codelineno-1-58"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#create-__codelineno-1-59"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#create-__codelineno-1-60"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#create-__codelineno-1-61"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[0:2]</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#create-__codelineno-1-62"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#create-__codelineno-1-63"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#create-__codelineno-1-64"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#create-__codelineno-1-65"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#create-__codelineno-1-66"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#create-__codelineno-1-67"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CPU Fabric</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#create-__codelineno-1-68"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#create-__codelineno-1-69"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#create-__codelineno-1-70"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#create-__codelineno-1-71"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
</code></pre></div>
</details>

<h4 id="create-create-a-switch-device">Create a Switch Device</h4>
<p>Define a switch device based on the infrastructure description.</p>
<details open>
<summary><strong>Switch device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#create-__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#create-__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#create-__codelineno-2-3"></a><span class="c1"># pyright: reportArgumentType=false</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#create-__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#create-__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#create-__codelineno-2-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Switch</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#create-__codelineno-2-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">):</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#create-__codelineno-2-8"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an InfraGraph device to infrastructure based on the following components:</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#create-__codelineno-2-9"></a><span class="sd">        - 1 generic asic</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#create-__codelineno-2-10"></a><span class="sd">        - nic_count number of ports</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#create-__codelineno-2-11"></a><span class="sd">        - integrated circuitry connecting ports to asic</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#create-__codelineno-2-12"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#create-__codelineno-2-13"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#create-__codelineno-2-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;switch&quot;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#create-__codelineno-2-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A generic switch&quot;</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#create-__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#create-__codelineno-2-17"></a>        <span class="n">asic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#create-__codelineno-2-18"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;asic&quot;</span><span class="p">,</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#create-__codelineno-2-19"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic ASIC&quot;</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#create-__codelineno-2-20"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#create-__codelineno-2-21"></a>        <span class="p">)</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#create-__codelineno-2-22"></a>        <span class="n">asic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#create-__codelineno-2-23"></a>        <span class="n">port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#create-__codelineno-2-24"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#create-__codelineno-2-25"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic port&quot;</span><span class="p">,</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#create-__codelineno-2-26"></a>            <span class="n">count</span><span class="o">=</span><span class="n">port_count</span><span class="p">,</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#create-__codelineno-2-27"></a>        <span class="p">)</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#create-__codelineno-2-28"></a>        <span class="n">port</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#create-__codelineno-2-29"></a>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#create-__codelineno-2-30"></a>        <span class="n">ic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic integrated circuitry&quot;</span><span class="p">)</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#create-__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#create-__codelineno-2-32"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">ic</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#create-__codelineno-2-33"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">asic</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#create-__codelineno-2-34"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#create-__codelineno-2-35"></a>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#create-__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#create-__codelineno-2-37"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#create-__codelineno-2-38"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">Switch</span><span class="p">()</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#create-__codelineno-2-39"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>Switch device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#create-__codelineno-3-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#create-__codelineno-3-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#create-__codelineno-3-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#create-__codelineno-3-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic ASIC</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#create-__codelineno-3-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#create-__codelineno-3-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#create-__codelineno-3-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#create-__codelineno-3-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic port</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#create-__codelineno-3-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#create-__codelineno-3-10"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic switch</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#create-__codelineno-3-11"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#create-__codelineno-3-12"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#create-__codelineno-3-13"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#create-__codelineno-3-14"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#create-__codelineno-3-15"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#create-__codelineno-3-16"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#create-__codelineno-3-17"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#create-__codelineno-3-18"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#create-__codelineno-3-19"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic integrated circuitry</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#create-__codelineno-3-20"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#create-__codelineno-3-21"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
</code></pre></div>
</details>

<h4 id="create-create-an-infrastructure-of-instances-of-devices-links-and-edges">Create an Infrastructure of Instances of devices, Links and Edges</h4>
<p>Define an infrastructure based on the infrastructure description.</p>
<details open>
<summary><strong>Two Tier Clos Fabric Infrastructure using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#create-__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#create-__codelineno-4-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.server</span><span class="w"> </span><span class="kn">import</span> <span class="n">Server</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#create-__codelineno-4-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.devices.generic_switch</span><span class="w"> </span><span class="kn">import</span> <span class="n">Switch</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#create-__codelineno-4-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#create-__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#create-__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#create-__codelineno-4-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">ClosFabric</span><span class="p">(</span><span class="n">Infrastructure</span><span class="p">):</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#create-__codelineno-4-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a 2 tier clos fabric with the following characteristics:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#create-__codelineno-4-9"></a><span class="sd">    - 4 generic servers</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#create-__codelineno-4-10"></a><span class="sd">    - each generic server with 2 npus and 2 nics</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#create-__codelineno-4-11"></a><span class="sd">    - 4 leaf switches each with 16 ports</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#create-__codelineno-4-12"></a><span class="sd">    - 3 spine switch each with 16 ports</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#create-__codelineno-4-13"></a><span class="sd">    - connectivity between servers and leaf switches is 100G</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#create-__codelineno-4-14"></a><span class="sd">    - connectivity between servers and spine switch is 400G</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#create-__codelineno-4-15"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#create-__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#create-__codelineno-4-17"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#create-__codelineno-4-18"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;closfabric&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;2 Tier Clos Fabric&quot;</span><span class="p">)</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#create-__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#create-__codelineno-4-20"></a>        <span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">()</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#create-__codelineno-4-21"></a>        <span class="n">switch</span> <span class="o">=</span> <span class="n">Switch</span><span class="p">()</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#create-__codelineno-4-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">server</span><span class="p">)</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">switch</span><span class="p">)</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#create-__codelineno-4-23"></a>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#create-__codelineno-4-24"></a>        <span class="n">hosts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;host&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">server</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#create-__codelineno-4-25"></a>        <span class="n">leaf_switches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;leafsw&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">switch</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#create-__codelineno-4-26"></a>        <span class="n">spine_switches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;spinesw&quot;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">switch</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#create-__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#create-__codelineno-4-28"></a>        <span class="n">leaf_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#create-__codelineno-4-29"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;leaf-link&quot;</span><span class="p">,</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#create-__codelineno-4-30"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Link characteristics for connectivity between servers and leaf switches&quot;</span><span class="p">,</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#create-__codelineno-4-31"></a>        <span class="p">)</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#create-__codelineno-4-32"></a>        <span class="n">leaf_link</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">bandwidth</span><span class="o">.</span><span class="n">gigabits_per_second</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#create-__codelineno-4-33"></a>        <span class="n">spine_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#create-__codelineno-4-34"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spine-link&quot;</span><span class="p">,</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#create-__codelineno-4-35"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Link characteristics for connectivity between leaf switches and spine switches&quot;</span><span class="p">,</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#create-__codelineno-4-36"></a>        <span class="p">)</span>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#create-__codelineno-4-37"></a>        <span class="n">spine_link</span><span class="o">.</span><span class="n">physical</span><span class="o">.</span><span class="n">bandwidth</span><span class="o">.</span><span class="n">gigabits_per_second</span> <span class="o">=</span> <span class="mi">400</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#create-__codelineno-4-38"></a>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#create-__codelineno-4-39"></a>        <span class="n">host_component</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span><span class="p">)</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#create-__codelineno-4-40"></a>        <span class="n">switch_component</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">switch</span><span class="p">,</span> <span class="n">Component</span><span class="o">.</span><span class="n">PORT</span><span class="p">)</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#create-__codelineno-4-41"></a>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#create-__codelineno-4-42"></a>        <span class="c1"># link each host to one leaf switch</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#create-__codelineno-4-43"></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">hosts</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#create-__codelineno-4-44"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">InfrastructureEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">leaf_link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#create-__codelineno-4-45"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hosts</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#create-__codelineno-4-46"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">host_component</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#create-__codelineno-4-47"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#create-__codelineno-4-48"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">switch_component</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#create-__codelineno-4-49"></a>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#create-__codelineno-4-50"></a>        <span class="c1"># link every leaf switch to every spine switch</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#create-__codelineno-4-51"></a>        <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#create-__codelineno-4-52"></a>        <span class="k">for</span> <span class="n">leaf_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#create-__codelineno-4-53"></a>            <span class="k">for</span> <span class="n">spine_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">spine_switches</span><span class="o">.</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#create-__codelineno-4-54"></a>                <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">InfrastructureEdge</span><span class="o">.</span><span class="n">ONE2ONE</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">spine_link</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#create-__codelineno-4-55"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">leaf_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">leaf_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#create-__codelineno-4-56"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">switch_component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">host_component</span><span class="o">.</span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">spine_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#create-__codelineno-4-57"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">spine_switches</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">spine_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#create-__codelineno-4-58"></a>                <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">switch_component</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">leaf_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
</code></pre></div>
</details>

<details closed>
<summary><strong>ClosFabric infrastructure definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#create-__codelineno-5-1"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2 Tier Clos Fabric</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#create-__codelineno-5-2"></a><span class="nt">devices</span><span class="p">:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#create-__codelineno-5-3"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#create-__codelineno-5-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#create-__codelineno-5-5"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#create-__codelineno-5-6"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic CPU</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#create-__codelineno-5-7"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#create-__codelineno-5-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#create-__codelineno-5-9"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#create-__codelineno-5-10"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic GPU/NPU</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#create-__codelineno-5-11"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#create-__codelineno-5-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#create-__codelineno-5-13"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#create-__codelineno-5-14"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVLink Switch</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#create-__codelineno-5-15"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#create-__codelineno-5-16"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#create-__codelineno-5-17"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#create-__codelineno-5-18"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express Switch Gen 4</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#create-__codelineno-5-19"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#create-__codelineno-5-20"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#create-__codelineno-5-21"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#create-__codelineno-5-22"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic Nic</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#create-__codelineno-5-23"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#create-__codelineno-5-24"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#create-__codelineno-5-25"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#create-__codelineno-5-26"></a><span class="w">    </span><span class="nt">custom</span><span class="p">:</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#create-__codelineno-5-27"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt-nic</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#create-__codelineno-5-28"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mgmt Nic</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#create-__codelineno-5-29"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#create-__codelineno-5-30"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic server with npu_factor * 4 npu(s)</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#create-__codelineno-5-31"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#create-__codelineno-5-32"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#create-__codelineno-5-33"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mgmt</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#create-__codelineno-5-34"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#create-__codelineno-5-35"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#create-__codelineno-5-36"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#create-__codelineno-5-37"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#create-__codelineno-5-38"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#create-__codelineno-5-39"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#create-__codelineno-5-40"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#create-__codelineno-5-41"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#create-__codelineno-5-42"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#create-__codelineno-5-43"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#create-__codelineno-5-44"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#create-__codelineno-5-45"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#create-__codelineno-5-46"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#create-__codelineno-5-47"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#create-__codelineno-5-48"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#create-__codelineno-5-49"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#create-__codelineno-5-50"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#create-__codelineno-5-51"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu[0]</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#create-__codelineno-5-52"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#create-__codelineno-5-53"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#create-__codelineno-5-54"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#create-__codelineno-5-55"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#create-__codelineno-5-56"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#create-__codelineno-5-57"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[0:2]</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#create-__codelineno-5-58"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#create-__codelineno-5-59"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#create-__codelineno-5-60"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#create-__codelineno-5-61"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#create-__codelineno-5-62"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#create-__codelineno-5-63"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[0:2]</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#create-__codelineno-5-64"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#create-__codelineno-5-65"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#create-__codelineno-5-66"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#create-__codelineno-5-67"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#create-__codelineno-5-68"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#create-__codelineno-5-69"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CPU Fabric</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#create-__codelineno-5-70"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#create-__codelineno-5-71"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#create-__codelineno-5-72"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#create-__codelineno-5-73"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#create-__codelineno-5-74"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#create-__codelineno-5-75"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#create-__codelineno-5-76"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#create-__codelineno-5-77"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic ASIC</span>
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#create-__codelineno-5-78"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#create-__codelineno-5-79"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#create-__codelineno-5-80"></a><span class="w">    </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#create-__codelineno-5-81"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic port</span>
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#create-__codelineno-5-82"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#create-__codelineno-5-83"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A generic switch</span>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#create-__codelineno-5-84"></a><span class="w">  </span><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#create-__codelineno-5-85"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#create-__codelineno-5-86"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asic</span>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#create-__codelineno-5-87"></a><span class="w">    </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#create-__codelineno-5-88"></a><span class="w">      </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#create-__codelineno-5-89"></a><span class="w">    </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#create-__codelineno-5-90"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#create-__codelineno-5-91"></a><span class="w">  </span><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#create-__codelineno-5-92"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic integrated circuitry</span>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#create-__codelineno-5-93"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ic</span>
<a id="__codelineno-5-94" name="__codelineno-5-94" href="#create-__codelineno-5-94"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-95" name="__codelineno-5-95" href="#create-__codelineno-5-95"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-5-96" name="__codelineno-5-96" href="#create-__codelineno-5-96"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-97" name="__codelineno-5-97" href="#create-__codelineno-5-97"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-98" name="__codelineno-5-98" href="#create-__codelineno-5-98"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[0]</span>
<a id="__codelineno-5-99" name="__codelineno-5-99" href="#create-__codelineno-5-99"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-100" name="__codelineno-5-100" href="#create-__codelineno-5-100"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-101" name="__codelineno-5-101" href="#create-__codelineno-5-101"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-102" name="__codelineno-5-102" href="#create-__codelineno-5-102"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-103" name="__codelineno-5-103" href="#create-__codelineno-5-103"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-104" name="__codelineno-5-104" href="#create-__codelineno-5-104"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-105" name="__codelineno-5-105" href="#create-__codelineno-5-105"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-106" name="__codelineno-5-106" href="#create-__codelineno-5-106"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[1]</span>
<a id="__codelineno-5-107" name="__codelineno-5-107" href="#create-__codelineno-5-107"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-108" name="__codelineno-5-108" href="#create-__codelineno-5-108"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-109" name="__codelineno-5-109" href="#create-__codelineno-5-109"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-110" name="__codelineno-5-110" href="#create-__codelineno-5-110"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-111" name="__codelineno-5-111" href="#create-__codelineno-5-111"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-112" name="__codelineno-5-112" href="#create-__codelineno-5-112"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-113" name="__codelineno-5-113" href="#create-__codelineno-5-113"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-114" name="__codelineno-5-114" href="#create-__codelineno-5-114"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[2]</span>
<a id="__codelineno-5-115" name="__codelineno-5-115" href="#create-__codelineno-5-115"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-116" name="__codelineno-5-116" href="#create-__codelineno-5-116"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-117" name="__codelineno-5-117" href="#create-__codelineno-5-117"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-118" name="__codelineno-5-118" href="#create-__codelineno-5-118"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-119" name="__codelineno-5-119" href="#create-__codelineno-5-119"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-120" name="__codelineno-5-120" href="#create-__codelineno-5-120"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-121" name="__codelineno-5-121" href="#create-__codelineno-5-121"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-5-122" name="__codelineno-5-122" href="#create-__codelineno-5-122"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host[3]</span>
<a id="__codelineno-5-123" name="__codelineno-5-123" href="#create-__codelineno-5-123"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-124" name="__codelineno-5-124" href="#create-__codelineno-5-124"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port</span>
<a id="__codelineno-5-125" name="__codelineno-5-125" href="#create-__codelineno-5-125"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-126" name="__codelineno-5-126" href="#create-__codelineno-5-126"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-127" name="__codelineno-5-127" href="#create-__codelineno-5-127"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-128" name="__codelineno-5-128" href="#create-__codelineno-5-128"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-129" name="__codelineno-5-129" href="#create-__codelineno-5-129"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-130" name="__codelineno-5-130" href="#create-__codelineno-5-130"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-131" name="__codelineno-5-131" href="#create-__codelineno-5-131"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-132" name="__codelineno-5-132" href="#create-__codelineno-5-132"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-133" name="__codelineno-5-133" href="#create-__codelineno-5-133"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-134" name="__codelineno-5-134" href="#create-__codelineno-5-134"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-135" name="__codelineno-5-135" href="#create-__codelineno-5-135"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-136" name="__codelineno-5-136" href="#create-__codelineno-5-136"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-137" name="__codelineno-5-137" href="#create-__codelineno-5-137"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-138" name="__codelineno-5-138" href="#create-__codelineno-5-138"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-139" name="__codelineno-5-139" href="#create-__codelineno-5-139"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-140" name="__codelineno-5-140" href="#create-__codelineno-5-140"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-141" name="__codelineno-5-141" href="#create-__codelineno-5-141"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-142" name="__codelineno-5-142" href="#create-__codelineno-5-142"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-143" name="__codelineno-5-143" href="#create-__codelineno-5-143"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-144" name="__codelineno-5-144" href="#create-__codelineno-5-144"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-145" name="__codelineno-5-145" href="#create-__codelineno-5-145"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-146" name="__codelineno-5-146" href="#create-__codelineno-5-146"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[0]</span>
<a id="__codelineno-5-147" name="__codelineno-5-147" href="#create-__codelineno-5-147"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-148" name="__codelineno-5-148" href="#create-__codelineno-5-148"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[0]</span>
<a id="__codelineno-5-149" name="__codelineno-5-149" href="#create-__codelineno-5-149"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-150" name="__codelineno-5-150" href="#create-__codelineno-5-150"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-151" name="__codelineno-5-151" href="#create-__codelineno-5-151"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-152" name="__codelineno-5-152" href="#create-__codelineno-5-152"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-153" name="__codelineno-5-153" href="#create-__codelineno-5-153"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-154" name="__codelineno-5-154" href="#create-__codelineno-5-154"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-155" name="__codelineno-5-155" href="#create-__codelineno-5-155"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-156" name="__codelineno-5-156" href="#create-__codelineno-5-156"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-157" name="__codelineno-5-157" href="#create-__codelineno-5-157"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-158" name="__codelineno-5-158" href="#create-__codelineno-5-158"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-159" name="__codelineno-5-159" href="#create-__codelineno-5-159"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-160" name="__codelineno-5-160" href="#create-__codelineno-5-160"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-161" name="__codelineno-5-161" href="#create-__codelineno-5-161"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-162" name="__codelineno-5-162" href="#create-__codelineno-5-162"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-163" name="__codelineno-5-163" href="#create-__codelineno-5-163"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-164" name="__codelineno-5-164" href="#create-__codelineno-5-164"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-165" name="__codelineno-5-165" href="#create-__codelineno-5-165"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-166" name="__codelineno-5-166" href="#create-__codelineno-5-166"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-167" name="__codelineno-5-167" href="#create-__codelineno-5-167"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-168" name="__codelineno-5-168" href="#create-__codelineno-5-168"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-169" name="__codelineno-5-169" href="#create-__codelineno-5-169"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-170" name="__codelineno-5-170" href="#create-__codelineno-5-170"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[1]</span>
<a id="__codelineno-5-171" name="__codelineno-5-171" href="#create-__codelineno-5-171"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-172" name="__codelineno-5-172" href="#create-__codelineno-5-172"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[1]</span>
<a id="__codelineno-5-173" name="__codelineno-5-173" href="#create-__codelineno-5-173"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-174" name="__codelineno-5-174" href="#create-__codelineno-5-174"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-175" name="__codelineno-5-175" href="#create-__codelineno-5-175"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-176" name="__codelineno-5-176" href="#create-__codelineno-5-176"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-177" name="__codelineno-5-177" href="#create-__codelineno-5-177"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-178" name="__codelineno-5-178" href="#create-__codelineno-5-178"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-179" name="__codelineno-5-179" href="#create-__codelineno-5-179"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-180" name="__codelineno-5-180" href="#create-__codelineno-5-180"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-181" name="__codelineno-5-181" href="#create-__codelineno-5-181"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-182" name="__codelineno-5-182" href="#create-__codelineno-5-182"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-183" name="__codelineno-5-183" href="#create-__codelineno-5-183"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-184" name="__codelineno-5-184" href="#create-__codelineno-5-184"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-185" name="__codelineno-5-185" href="#create-__codelineno-5-185"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-186" name="__codelineno-5-186" href="#create-__codelineno-5-186"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-187" name="__codelineno-5-187" href="#create-__codelineno-5-187"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-188" name="__codelineno-5-188" href="#create-__codelineno-5-188"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-189" name="__codelineno-5-189" href="#create-__codelineno-5-189"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-190" name="__codelineno-5-190" href="#create-__codelineno-5-190"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-191" name="__codelineno-5-191" href="#create-__codelineno-5-191"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-192" name="__codelineno-5-192" href="#create-__codelineno-5-192"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-193" name="__codelineno-5-193" href="#create-__codelineno-5-193"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-194" name="__codelineno-5-194" href="#create-__codelineno-5-194"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[2]</span>
<a id="__codelineno-5-195" name="__codelineno-5-195" href="#create-__codelineno-5-195"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-196" name="__codelineno-5-196" href="#create-__codelineno-5-196"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-197" name="__codelineno-5-197" href="#create-__codelineno-5-197"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-198" name="__codelineno-5-198" href="#create-__codelineno-5-198"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-199" name="__codelineno-5-199" href="#create-__codelineno-5-199"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-200" name="__codelineno-5-200" href="#create-__codelineno-5-200"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-201" name="__codelineno-5-201" href="#create-__codelineno-5-201"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[2]</span>
<a id="__codelineno-5-202" name="__codelineno-5-202" href="#create-__codelineno-5-202"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-203" name="__codelineno-5-203" href="#create-__codelineno-5-203"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-204" name="__codelineno-5-204" href="#create-__codelineno-5-204"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-205" name="__codelineno-5-205" href="#create-__codelineno-5-205"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[0]</span>
<a id="__codelineno-5-206" name="__codelineno-5-206" href="#create-__codelineno-5-206"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-207" name="__codelineno-5-207" href="#create-__codelineno-5-207"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-208" name="__codelineno-5-208" href="#create-__codelineno-5-208"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-209" name="__codelineno-5-209" href="#create-__codelineno-5-209"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-210" name="__codelineno-5-210" href="#create-__codelineno-5-210"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-211" name="__codelineno-5-211" href="#create-__codelineno-5-211"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-212" name="__codelineno-5-212" href="#create-__codelineno-5-212"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-213" name="__codelineno-5-213" href="#create-__codelineno-5-213"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[1]</span>
<a id="__codelineno-5-214" name="__codelineno-5-214" href="#create-__codelineno-5-214"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-215" name="__codelineno-5-215" href="#create-__codelineno-5-215"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-216" name="__codelineno-5-216" href="#create-__codelineno-5-216"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-5-217" name="__codelineno-5-217" href="#create-__codelineno-5-217"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[4]</span>
<a id="__codelineno-5-218" name="__codelineno-5-218" href="#create-__codelineno-5-218"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw[3]</span>
<a id="__codelineno-5-219" name="__codelineno-5-219" href="#create-__codelineno-5-219"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-5-220" name="__codelineno-5-220" href="#create-__codelineno-5-220"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">port[3]</span>
<a id="__codelineno-5-221" name="__codelineno-5-221" href="#create-__codelineno-5-221"></a><span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw[2]</span>
<a id="__codelineno-5-222" name="__codelineno-5-222" href="#create-__codelineno-5-222"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-223" name="__codelineno-5-223" href="#create-__codelineno-5-223"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">one2one</span>
<a id="__codelineno-5-224" name="__codelineno-5-224" href="#create-__codelineno-5-224"></a><span class="nt">instances</span><span class="p">:</span>
<a id="__codelineno-5-225" name="__codelineno-5-225" href="#create-__codelineno-5-225"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-5-226" name="__codelineno-5-226" href="#create-__codelineno-5-226"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<a id="__codelineno-5-227" name="__codelineno-5-227" href="#create-__codelineno-5-227"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<a id="__codelineno-5-228" name="__codelineno-5-228" href="#create-__codelineno-5-228"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-5-229" name="__codelineno-5-229" href="#create-__codelineno-5-229"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-230" name="__codelineno-5-230" href="#create-__codelineno-5-230"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leafsw</span>
<a id="__codelineno-5-231" name="__codelineno-5-231" href="#create-__codelineno-5-231"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<a id="__codelineno-5-232" name="__codelineno-5-232" href="#create-__codelineno-5-232"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">switch</span>
<a id="__codelineno-5-233" name="__codelineno-5-233" href="#create-__codelineno-5-233"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spinesw</span>
<a id="__codelineno-5-234" name="__codelineno-5-234" href="#create-__codelineno-5-234"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-5-235" name="__codelineno-5-235" href="#create-__codelineno-5-235"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Link characteristics for connectivity between servers and leaf switches</span>
<a id="__codelineno-5-236" name="__codelineno-5-236" href="#create-__codelineno-5-236"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf-link</span>
<a id="__codelineno-5-237" name="__codelineno-5-237" href="#create-__codelineno-5-237"></a><span class="w">  </span><span class="nt">physical</span><span class="p">:</span>
<a id="__codelineno-5-238" name="__codelineno-5-238" href="#create-__codelineno-5-238"></a><span class="w">    </span><span class="nt">bandwidth</span><span class="p">:</span>
<a id="__codelineno-5-239" name="__codelineno-5-239" href="#create-__codelineno-5-239"></a><span class="w">      </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gigabits_per_second</span>
<a id="__codelineno-5-240" name="__codelineno-5-240" href="#create-__codelineno-5-240"></a><span class="w">      </span><span class="nt">gigabits_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<a id="__codelineno-5-241" name="__codelineno-5-241" href="#create-__codelineno-5-241"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Link characteristics for connectivity between leaf switches and spine</span>
<a id="__codelineno-5-242" name="__codelineno-5-242" href="#create-__codelineno-5-242"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">switches</span>
<a id="__codelineno-5-243" name="__codelineno-5-243" href="#create-__codelineno-5-243"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spine-link</span>
<a id="__codelineno-5-244" name="__codelineno-5-244" href="#create-__codelineno-5-244"></a><span class="w">  </span><span class="nt">physical</span><span class="p">:</span>
<a id="__codelineno-5-245" name="__codelineno-5-245" href="#create-__codelineno-5-245"></a><span class="w">    </span><span class="nt">bandwidth</span><span class="p">:</span>
<a id="__codelineno-5-246" name="__codelineno-5-246" href="#create-__codelineno-5-246"></a><span class="w">      </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gigabits_per_second</span>
<a id="__codelineno-5-247" name="__codelineno-5-247" href="#create-__codelineno-5-247"></a><span class="w">      </span><span class="nt">gigabits_per_second</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400</span>
<a id="__codelineno-5-248" name="__codelineno-5-248" href="#create-__codelineno-5-248"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">closfabric</span>
</code></pre></div>
</details></section><section class="print-page" id="annotate" heading-number="5"><h1 id="annotate-the-annotate_graph-api">The <code>annotate_graph</code> API</h1>
<h2 id="annotate-overview">Overview</h2>
<p>Once the infrastructure or system of systems has been defined by using the <code>set_graph</code> API the base graph can be extended by using the <code>annotate_graph</code> API to add additional data using nodes and edges as endpoints for the data.</p>
<p>The main objective of the <code>annotate_graph</code> API is to separate the infrastructure model from specific use-case models by allowing the graph to be extended with any type of data.  This ensures that <code>InfraGraph</code> does not morph into an attempt to define every nuance present in a system of systems.</p>
<p>Any annotation efforts can always be proposed as model or service enhancements by submitting <a href="https://github.com/Keysight/infragraph/issues">issues</a> or <a href="https://github.com/Keysight/infragraph/pulls">pull requests</a> to the <a href="https://github.com/Keysight/infragraph">InfraGraph repository</a>.</p>
<h3 id="annotate-additional-data">Additional Data</h3>
<p>Some examples of additional data are:
  - AI data such as:
    - ranks
    - communication groups
  - Configuration data such as:
    - network interface card settings
    - device addresses
    - device routing tables</p>
<p>The following code examples demonstrates how to use the <code>query_graph</code> API in conjunction with the <code>annotate_graph</code> API to extend the graph with additional user specific data.</p>
<h2 id="annotate-adding-rank-data">Adding <code>rank</code> data</h2>
<p>In the <a href="#create">Getting Started</a> example, the instances of the <code>Server</code> device were created with the name of <code>host</code> and each instance having a specific number of components with a name of <code>npu</code>.</p>
<p>The following code demonstrates adding a <code>rank</code> attribute to every <code>host</code> instance that has a component with the name of <code>npu</code>.</p>
<details open>
<summary><strong>Add a rank to each host npu</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#annotate-__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#annotate-__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#annotate-__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.closfabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClosFabric</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#annotate-__codelineno-0-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#annotate-__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#annotate-__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#annotate-__codelineno-0-7"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#annotate-__codelineno-0-8"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_rank_annotations</span><span class="p">():</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#annotate-__codelineno-0-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Test adding a rank attribute to every npu node&quot;&quot;&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#annotate-__codelineno-0-10"></a>    <span class="c1"># create the graph</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#annotate-__codelineno-0-11"></a>    <span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#annotate-__codelineno-0-12"></a>    <span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">ClosFabric</span><span class="p">())</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#annotate-__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#annotate-__codelineno-0-14"></a>    <span class="c1"># query the graph for host npus</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#annotate-__codelineno-0-15"></a>    <span class="n">npu_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#annotate-__codelineno-0-16"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">npu_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;npu filter&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#annotate-__codelineno-0-17"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ID_FILTER</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#annotate-__codelineno-0-18"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">id_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#annotate-__codelineno-0-19"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">id_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;host\.\d+\.npu\.\d+&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#annotate-__codelineno-0-20"></a>    <span class="n">npu_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">npu_request</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#annotate-__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#annotate-__codelineno-0-22"></a>    <span class="c1"># annotate the graph</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#annotate-__codelineno-0-23"></a>    <span class="n">annotate_request</span> <span class="o">=</span> <span class="n">AnnotateRequest</span><span class="p">()</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#annotate-__codelineno-0-24"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">match</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">):</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#annotate-__codelineno-0-25"></a>        <span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">match</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#annotate-__codelineno-0-26"></a>    <span class="n">service</span><span class="o">.</span><span class="n">annotate_graph</span><span class="p">(</span><span class="n">annotate_request</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#annotate-__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#annotate-__codelineno-0-28"></a>    <span class="c1"># query the graph for rank attributes</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#annotate-__codelineno-0-29"></a>    <span class="n">rank_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#annotate-__codelineno-0-30"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">rank_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;rank filter&quot;</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#annotate-__codelineno-0-31"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#annotate-__codelineno-0-32"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rank&quot;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#annotate-__codelineno-0-33"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#annotate-__codelineno-0-34"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\d+&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#annotate-__codelineno-0-35"></a>    <span class="n">rank_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">rank_request</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#annotate-__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#annotate-__codelineno-0-37"></a>    <span class="c1"># validation</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#annotate-__codelineno-0-38"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#annotate-__codelineno-0-39"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">npu_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#annotate-__codelineno-0-40"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">rank_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#annotate-__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#annotate-__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#annotate-__codelineno-0-43"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#annotate-__codelineno-0-44"></a>    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">])</span>
</code></pre></div>
</details>

<h2 id="annotate-adding-ipaddress-data">Adding <code>ipaddress</code> data</h2>
<p>In the <a href="#create">Getting Started</a> example, the instances of the <code>Server</code> device were created with the name of <code>host</code> and each instance having a <code>mgmt</code> nic component.</p>
<p>The following code demonstrates adding an <code>ipaddress</code> attribute to the <code>host</code> instance <code>mgmt</code> nic.</p>
<details open>
<summary><strong>Add an ipaddress to each host mgmt component</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#annotate-__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#annotate-__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ipaddress</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#annotate-__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#annotate-__codelineno-1-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.blueprints.fabrics.closfabric</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClosFabric</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#annotate-__codelineno-1-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph.infragraph_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InfraGraphService</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#annotate-__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#annotate-__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#annotate-__codelineno-1-8"></a><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#annotate-__codelineno-1-9"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_ipaddress_annotations</span><span class="p">():</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#annotate-__codelineno-1-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Test adding an ipaddress attribute to every server nic node&quot;&quot;&quot;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#annotate-__codelineno-1-11"></a>    <span class="c1"># create the graph</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#annotate-__codelineno-1-12"></a>    <span class="n">service</span> <span class="o">=</span> <span class="n">InfraGraphService</span><span class="p">()</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#annotate-__codelineno-1-13"></a>    <span class="n">service</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="n">ClosFabric</span><span class="p">())</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#annotate-__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#annotate-__codelineno-1-15"></a>    <span class="c1"># query the graph for host nics</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#annotate-__codelineno-1-16"></a>    <span class="n">npu_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#annotate-__codelineno-1-17"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">npu_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;mgmt nic filter&quot;</span><span class="p">)</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#annotate-__codelineno-1-18"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#annotate-__codelineno-1-19"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;type&quot;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#annotate-__codelineno-1-20"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">EQ</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#annotate-__codelineno-1-21"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;mgmt-nic&quot;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#annotate-__codelineno-1-22"></a>    <span class="n">nic_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">npu_request</span><span class="p">)</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#annotate-__codelineno-1-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#annotate-__codelineno-1-24"></a>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#annotate-__codelineno-1-25"></a>    <span class="c1"># annotate the graph</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#annotate-__codelineno-1-26"></a>    <span class="n">annotate_request</span> <span class="o">=</span> <span class="n">AnnotateRequest</span><span class="p">()</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#annotate-__codelineno-1-27"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">match</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">):</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#annotate-__codelineno-1-28"></a>        <span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#annotate-__codelineno-1-29"></a>            <span class="n">name</span><span class="o">=</span><span class="n">match</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#annotate-__codelineno-1-30"></a>            <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;ipaddress&quot;</span><span class="p">,</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#annotate-__codelineno-1-31"></a>            <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ipaddress</span><span class="o">.</span><span class="n">ip_address</span><span class="p">(</span><span class="n">idx</span><span class="p">)),</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#annotate-__codelineno-1-32"></a>        <span class="p">)</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#annotate-__codelineno-1-33"></a>    <span class="n">service</span><span class="o">.</span><span class="n">annotate_graph</span><span class="p">(</span><span class="n">annotate_request</span><span class="p">)</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#annotate-__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#annotate-__codelineno-1-35"></a>    <span class="c1"># query the graph for ipaddress attributes</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#annotate-__codelineno-1-36"></a>    <span class="n">ipaddress_request</span> <span class="o">=</span> <span class="n">QueryRequest</span><span class="p">()</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#annotate-__codelineno-1-37"></a>    <span class="nb">filter</span> <span class="o">=</span> <span class="n">ipaddress_request</span><span class="o">.</span><span class="n">node_filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ipaddress filter&quot;</span><span class="p">)</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#annotate-__codelineno-1-38"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">QueryNodeFilter</span><span class="o">.</span><span class="n">ATTRIBUTE_FILTER</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#annotate-__codelineno-1-39"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;ipaddress&quot;</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#annotate-__codelineno-1-40"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">QueryNodeId</span><span class="o">.</span><span class="n">REGEX</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#annotate-__codelineno-1-41"></a>    <span class="nb">filter</span><span class="o">.</span><span class="n">attribute_filter</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;.*&quot;</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#annotate-__codelineno-1-42"></a>    <span class="n">ipaddress_response</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">query_graph</span><span class="p">(</span><span class="n">ipaddress_request</span><span class="p">)</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#annotate-__codelineno-1-43"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">ipaddress_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#annotate-__codelineno-1-44"></a>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#annotate-__codelineno-1-45"></a>    <span class="c1"># validation</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#annotate-__codelineno-1-46"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#annotate-__codelineno-1-47"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nic_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#annotate-__codelineno-1-48"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotate_request</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ipaddress_response</span><span class="o">.</span><span class="n">node_matches</span><span class="p">)</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#annotate-__codelineno-1-49"></a>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#annotate-__codelineno-1-50"></a>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#annotate-__codelineno-1-51"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#annotate-__codelineno-1-52"></a>    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="vm">__file__</span><span class="p">])</span>
</code></pre></div>
</details></section><section class="print-page" id="examples" heading-number="6"><h1 id="examples-examples">Examples</h1><p>These examples demonstrate <code>describing</code> a variety of devices and infrastructures using text descriptions and diagrams to <code>defining</code> them using a <code>standardized schema</code>.</p>
<h2 id="examples-dgx-a100-server">DGX-A100 Server</h2>
<p>This server diagram acts as an example of how multiple components can be connected to a single component such as multiple gpu components are connected to a single pcie switch.</p>
<p>The graph model is able to capture the asymmetric layout of the device.</p>
<h3 id="examples-description">Description</h3>
<p><img alt="dgxa100" src="../images/dgxa100.png" /></p>
<h3 id="examples-standardized-definition">Standardized Definition</h3>
<details open>
<summary><strong>DGX device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#examples-__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#examples-__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">infragraph</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#examples-__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#examples-__codelineno-0-4"></a><span class="c1"># pyright: reportArgumentType=false</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#examples-__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#examples-__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#examples-__codelineno-0-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">Dgx</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#examples-__codelineno-0-8"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nic_device</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#examples-__codelineno-0-9"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an InfraGraph device to infrastructure based on the following components:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#examples-__codelineno-0-10"></a><span class="sd">        - 2 cpus</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#examples-__codelineno-0-11"></a><span class="sd">        - 8 npus</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#examples-__codelineno-0-12"></a><span class="sd">        - 4 pcie switches</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#examples-__codelineno-0-13"></a><span class="sd">        - 8 nics</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#examples-__codelineno-0-14"></a><span class="sd">        - 1 nvlink switch</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#examples-__codelineno-0-15"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#examples-__codelineno-0-16"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#examples-__codelineno-0-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;dgx&quot;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#examples-__codelineno-0-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Nvidia DGX System&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#examples-__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#examples-__codelineno-0-20"></a>        <span class="n">cpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#examples-__codelineno-0-21"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#examples-__codelineno-0-22"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;AMD Epyc 7742 CPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#examples-__codelineno-0-23"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#examples-__codelineno-0-24"></a>        <span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#examples-__codelineno-0-25"></a>        <span class="n">cpu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CPU</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#examples-__codelineno-0-26"></a>        <span class="n">npu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#examples-__codelineno-0-27"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;npu&quot;</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#examples-__codelineno-0-28"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Nvidia A100 GPU&quot;</span><span class="p">,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#examples-__codelineno-0-29"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#examples-__codelineno-0-30"></a>        <span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#examples-__codelineno-0-31"></a>        <span class="n">npu</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NPU</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#examples-__codelineno-0-32"></a>        <span class="n">nvlsw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#examples-__codelineno-0-33"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlsw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#examples-__codelineno-0-34"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;NVLink Switch&quot;</span><span class="p">,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#examples-__codelineno-0-35"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#examples-__codelineno-0-36"></a>        <span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#examples-__codelineno-0-37"></a>        <span class="n">nvlsw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CUSTOM</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#examples-__codelineno-0-38"></a>        <span class="n">pciesw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#examples-__codelineno-0-39"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pciesw&quot;</span><span class="p">,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#examples-__codelineno-0-40"></a>            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;PCI Express Switch Gen 4&quot;</span><span class="p">,</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#examples-__codelineno-0-41"></a>            <span class="n">count</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#examples-__codelineno-0-42"></a>        <span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#examples-__codelineno-0-43"></a>        <span class="n">pciesw</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">CUSTOM</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#examples-__codelineno-0-44"></a>        <span class="k">if</span> <span class="n">nic_device</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#examples-__codelineno-0-45"></a>            <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#examples-__codelineno-0-46"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#examples-__codelineno-0-47"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generic Nic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#examples-__codelineno-0-48"></a>                <span class="n">count</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#examples-__codelineno-0-49"></a>            <span class="p">)</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#examples-__codelineno-0-50"></a>            <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">NIC</span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#examples-__codelineno-0-51"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#examples-__codelineno-0-52"></a>            <span class="n">nic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#examples-__codelineno-0-53"></a>                <span class="n">name</span><span class="o">=</span><span class="n">nic_device</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#examples-__codelineno-0-54"></a>                <span class="n">description</span><span class="o">=</span><span class="n">nic_device</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#examples-__codelineno-0-55"></a>                <span class="n">count</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#examples-__codelineno-0-56"></a>            <span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#examples-__codelineno-0-57"></a>            <span class="n">nic</span><span class="o">.</span><span class="n">choice</span> <span class="o">=</span> <span class="n">Component</span><span class="o">.</span><span class="n">DEVICE</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#examples-__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#examples-__codelineno-0-59"></a>        <span class="n">cpu_fabric</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;fabric&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;AMD Infinity Fabric&quot;</span><span class="p">)</span>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#examples-__codelineno-0-60"></a>        <span class="n">pcie</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;pcie&quot;</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#examples-__codelineno-0-61"></a>        <span class="n">nvlink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;nvlink&quot;</span><span class="p">)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#examples-__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#examples-__codelineno-0-63"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">cpu_fabric</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#examples-__codelineno-0-64"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#examples-__codelineno-0-65"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">cpu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#examples-__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#examples-__codelineno-0-67"></a>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">nvlink</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#examples-__codelineno-0-68"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">npu</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#examples-__codelineno-0-69"></a>        <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="n">nvlsw</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#examples-__codelineno-0-70"></a>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#examples-__codelineno-0-71"></a>        <span class="k">for</span> <span class="n">npu_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;0:2&quot;</span><span class="p">,</span> <span class="s2">&quot;2:4&quot;</span><span class="p">,</span> <span class="s2">&quot;4:6&quot;</span><span class="p">,</span> <span class="s2">&quot;6:8&quot;</span><span class="p">],</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#examples-__codelineno-0-72"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#examples-__codelineno-0-73"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">npu</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">npu_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#examples-__codelineno-0-74"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#examples-__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#examples-__codelineno-0-76"></a>        <span class="k">for</span> <span class="n">nic_idx</span><span class="p">,</span> <span class="n">pciesw_idx</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;0:2&quot;</span><span class="p">,</span> <span class="s2">&quot;2:4&quot;</span><span class="p">,</span> <span class="s2">&quot;4:6&quot;</span><span class="p">,</span> <span class="s2">&quot;6:8&quot;</span><span class="p">],</span> <span class="nb">range</span><span class="p">(</span><span class="n">pciesw</span><span class="o">.</span><span class="n">count</span><span class="p">)):</span>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#examples-__codelineno-0-77"></a>            <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">DeviceEdge</span><span class="o">.</span><span class="n">MANY2MANY</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="n">pcie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#examples-__codelineno-0-78"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep1</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nic</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">nic_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#examples-__codelineno-0-79"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">ep2</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pciesw</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">pciesw_idx</span><span class="si">}</span><span class="s2">]&quot;</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#examples-__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#examples-__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#examples-__codelineno-0-82"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#examples-__codelineno-0-83"></a>    <span class="n">device</span> <span class="o">=</span> <span class="n">Dgx</span><span class="p">()</span>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#examples-__codelineno-0-84"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">Device</span><span class="o">.</span><span class="n">YAML</span><span class="p">))</span>
</code></pre></div>
</details>
<details closed>
<summary><strong>DGX device definition as yaml</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#examples-__codelineno-1-1"></a><span class="nt">components</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#examples-__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#examples-__codelineno-1-3"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#examples-__codelineno-1-4"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AMD Epyc 7742 CPU</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#examples-__codelineno-1-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#examples-__codelineno-1-6"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#examples-__codelineno-1-7"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#examples-__codelineno-1-8"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nvidia A100 GPU</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#examples-__codelineno-1-9"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#examples-__codelineno-1-10"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#examples-__codelineno-1-11"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#examples-__codelineno-1-12"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NVLink Switch</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#examples-__codelineno-1-13"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#examples-__codelineno-1-14"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#examples-__codelineno-1-15"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#examples-__codelineno-1-16"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PCI Express Switch Gen 4</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#examples-__codelineno-1-17"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#examples-__codelineno-1-18"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">choice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#examples-__codelineno-1-19"></a><span class="w">  </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#examples-__codelineno-1-20"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generic Nic</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#examples-__codelineno-1-21"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#examples-__codelineno-1-22"></a><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nvidia DGX System</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#examples-__codelineno-1-23"></a><span class="nt">edges</span><span class="p">:</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#examples-__codelineno-1-24"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#examples-__codelineno-1-25"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#examples-__codelineno-1-26"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#examples-__codelineno-1-27"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#examples-__codelineno-1-28"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#examples-__codelineno-1-29"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#examples-__codelineno-1-30"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#examples-__codelineno-1-31"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#examples-__codelineno-1-32"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#examples-__codelineno-1-33"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlsw</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#examples-__codelineno-1-34"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#examples-__codelineno-1-35"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#examples-__codelineno-1-36"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#examples-__codelineno-1-37"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[0:2]</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#examples-__codelineno-1-38"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#examples-__codelineno-1-39"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#examples-__codelineno-1-40"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#examples-__codelineno-1-41"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#examples-__codelineno-1-42"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#examples-__codelineno-1-43"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[2:4]</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#examples-__codelineno-1-44"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#examples-__codelineno-1-45"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[1]</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#examples-__codelineno-1-46"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#examples-__codelineno-1-47"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#examples-__codelineno-1-48"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#examples-__codelineno-1-49"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[4:6]</span>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#examples-__codelineno-1-50"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#examples-__codelineno-1-51"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#examples-__codelineno-1-52"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#examples-__codelineno-1-53"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#examples-__codelineno-1-54"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#examples-__codelineno-1-55"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npu[6:8]</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#examples-__codelineno-1-56"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#examples-__codelineno-1-57"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[3]</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#examples-__codelineno-1-58"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#examples-__codelineno-1-59"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#examples-__codelineno-1-60"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#examples-__codelineno-1-61"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[0:2]</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#examples-__codelineno-1-62"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#examples-__codelineno-1-63"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[0]</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#examples-__codelineno-1-64"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#examples-__codelineno-1-65"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#examples-__codelineno-1-66"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#examples-__codelineno-1-67"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[2:4]</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#examples-__codelineno-1-68"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#examples-__codelineno-1-69"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[1]</span>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#examples-__codelineno-1-70"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#examples-__codelineno-1-71"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-72" name="__codelineno-1-72" href="#examples-__codelineno-1-72"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-73" name="__codelineno-1-73" href="#examples-__codelineno-1-73"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[4:6]</span>
<a id="__codelineno-1-74" name="__codelineno-1-74" href="#examples-__codelineno-1-74"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-75" name="__codelineno-1-75" href="#examples-__codelineno-1-75"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[2]</span>
<a id="__codelineno-1-76" name="__codelineno-1-76" href="#examples-__codelineno-1-76"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-77" name="__codelineno-1-77" href="#examples-__codelineno-1-77"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-78" name="__codelineno-1-78" href="#examples-__codelineno-1-78"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ep1</span><span class="p">:</span>
<a id="__codelineno-1-79" name="__codelineno-1-79" href="#examples-__codelineno-1-79"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nic[6:8]</span>
<a id="__codelineno-1-80" name="__codelineno-1-80" href="#examples-__codelineno-1-80"></a><span class="w">  </span><span class="nt">ep2</span><span class="p">:</span>
<a id="__codelineno-1-81" name="__codelineno-1-81" href="#examples-__codelineno-1-81"></a><span class="w">    </span><span class="nt">component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pciesw[3]</span>
<a id="__codelineno-1-82" name="__codelineno-1-82" href="#examples-__codelineno-1-82"></a><span class="w">  </span><span class="nt">link</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-83" name="__codelineno-1-83" href="#examples-__codelineno-1-83"></a><span class="w">  </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">many2many</span>
<a id="__codelineno-1-84" name="__codelineno-1-84" href="#examples-__codelineno-1-84"></a><span class="nt">links</span><span class="p">:</span>
<a id="__codelineno-1-85" name="__codelineno-1-85" href="#examples-__codelineno-1-85"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AMD Infinity Fabric</span>
<a id="__codelineno-1-86" name="__codelineno-1-86" href="#examples-__codelineno-1-86"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fabric</span>
<a id="__codelineno-1-87" name="__codelineno-1-87" href="#examples-__codelineno-1-87"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcie</span>
<a id="__codelineno-1-88" name="__codelineno-1-88" href="#examples-__codelineno-1-88"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nvlink</span>
<a id="__codelineno-1-89" name="__codelineno-1-89" href="#examples-__codelineno-1-89"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dgx</span>
</code></pre></div>
</details>

<h2 id="examples-gh200-mgx">GH200-MGX</h2>
<h3 id="examples-description_1">Description</h3>
<h4 id="examples-npu-component">NPU Component</h4>
<p><img alt="spine and leaf" src="../images/gh200.png" /></p>
<h4 id="examples-device">Device</h4>
<p><img alt="spine and leaf" src="../images/gh200-mgx.png" /></p>
<h3 id="examples-standardized-definition_1">Standardized Definition</h3>
<details open>
<summary><strong>GH200-MGX device definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#examples-__codelineno-2-1"></a><span class="n">TBD</span><span class="o">...</span>
</code></pre></div>
</details>

<h2 id="examples-scaleupscaleout-infrastructure">ScaleUp/ScaleOut Infrastructure</h2>
<h3 id="examples-description_2">Description</h3>
<p><img alt="ai-ml-hpc-datacenter-networks" src="../images/ai-ml-hpc-datacenter-networks.png" />
https://mips.com/blog/reimagining-ai-infrastructure-the-power-of-converged-back-end-networks/</p>
<ul>
<li>1024 hosts<ul>
<li>1 npu/host</li>
<li>10 nics/host</li>
</ul>
</li>
<li>512 scaleup switches<ul>
<li>16 ports/switch</li>
</ul>
</li>
<li>2 scaleout switches<ul>
<li>1024 ports/switch</li>
</ul>
</li>
<li>64 Racks<ul>
<li>16 hosts/rack</li>
<li>8 scale up switches/rack</li>
</ul>
</li>
</ul>
<p><img alt="ai-ml-hpc-datacenter-networks" src="../images/scaleup-scaleout.png" /></p>
<h3 id="examples-standardized-definition_2">Standardized Definition</h3>
<details open>
<summary><strong>ScaleUp/ScaleOut infrastructure definition using OpenApiArt generated classes</strong></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#examples-__codelineno-3-1"></a><span class="n">TBD</span><span class="o">...</span>
</code></pre></div>
</details></section></div><style>.print-site-enumerate-headings #index > h1:before { content: '1 ' }

                .print-site-enumerate-headings #index h2:before { content: '1.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-reset: counter-index-3 ;  counter-increment: counter-index-2 }
            
                .print-site-enumerate-headings #index h3:before { content: '1.' counter(counter-index-2) '.' counter(counter-index-3) ' ' }
                .print-site-enumerate-headings #index h3 {  counter-increment: counter-index-3 }
            
.print-site-enumerate-headings #background > h1:before { content: '2 ' }

                .print-site-enumerate-headings #background h2:before { content: '2.' counter(counter-background-2) ' ' }
                .print-site-enumerate-headings #background h2 {  counter-reset: counter-background-3 ;  counter-increment: counter-background-2 }
            
                .print-site-enumerate-headings #background h3:before { content: '2.' counter(counter-background-2) '.' counter(counter-background-3) ' ' }
                .print-site-enumerate-headings #background h3 {  counter-increment: counter-background-3 }
            
.print-site-enumerate-headings #schema > h1:before { content: '3 ' }

                .print-site-enumerate-headings #schema h2:before { content: '3.' counter(counter-schema-2) ' ' }
                .print-site-enumerate-headings #schema h2 {  counter-reset: counter-schema-3 ;  counter-increment: counter-schema-2 }
            
                .print-site-enumerate-headings #schema h3:before { content: '3.' counter(counter-schema-2) '.' counter(counter-schema-3) ' ' }
                .print-site-enumerate-headings #schema h3 {  counter-increment: counter-schema-3 }
            
.print-site-enumerate-headings #create > h1:before { content: '4 ' }

                .print-site-enumerate-headings #create h2:before { content: '4.' counter(counter-create-2) ' ' }
                .print-site-enumerate-headings #create h2 {  counter-reset: counter-create-3 ;  counter-increment: counter-create-2 }
            
                .print-site-enumerate-headings #create h3:before { content: '4.' counter(counter-create-2) '.' counter(counter-create-3) ' ' }
                .print-site-enumerate-headings #create h3 {  counter-increment: counter-create-3 }
            
.print-site-enumerate-headings #annotate > h1:before { content: '5 ' }

                .print-site-enumerate-headings #annotate h2:before { content: '5.' counter(counter-annotate-2) ' ' }
                .print-site-enumerate-headings #annotate h2 {  counter-reset: counter-annotate-3 ;  counter-increment: counter-annotate-2 }
            
                .print-site-enumerate-headings #annotate h3:before { content: '5.' counter(counter-annotate-2) '.' counter(counter-annotate-3) ' ' }
                .print-site-enumerate-headings #annotate h3 {  counter-increment: counter-annotate-3 }
            
.print-site-enumerate-headings #examples > h1:before { content: '6 ' }

                .print-site-enumerate-headings #examples h2:before { content: '6.' counter(counter-examples-2) ' ' }
                .print-site-enumerate-headings #examples h2 {  counter-reset: counter-examples-3 ;  counter-increment: counter-examples-2 }
            
                .print-site-enumerate-headings #examples h3:before { content: '6.' counter(counter-examples-2) '.' counter(counter-examples-3) ' ' }
                .print-site-enumerate-headings #examples h3 {  counter-increment: counter-examples-3 }
            
.print-site-enumerate-headings #openapi > h1:before { content: '7 ' }</style>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Keysight/infragraph" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "/", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.tracking", "navigation.top"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>